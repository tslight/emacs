<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-09 Mon 01:09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Configuration</title>
<meta name="author" content="Toby Slight" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs Configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org21d8f09">Lexical Binding</a></li>
<li><a href="#orgc74fee6">Doom Speed Hacks</a>
<ul>
<li><a href="#orgb32ccf7">Avoid garbage collection at startup</a></li>
<li><a href="#orga6feb5c">Unset file-name-handler-alist temporarily</a></li>
</ul>
</li>
<li><a href="#org208ad32">Settings</a>
<ul>
<li><a href="#orgfa4939c">Auto-save</a></li>
<li><a href="#org8797424">Backups</a></li>
<li><a href="#orge4c018a">Bell</a></li>
<li><a href="#org72b87e9">Bookmarks</a></li>
<li><a href="#org7b3418b">Clipboard</a></li>
<li><a href="#org4737709">Code Style</a></li>
<li><a href="#org39f9667">Compilation Scroll Output</a></li>
<li><a href="#org0f236fc">Customize settings file</a></li>
<li><a href="#org803d433">Delete all on backspace</a></li>
<li><a href="#org6540f6e">Emacsclient executable</a></li>
<li><a href="#org7554c61">Enable all advanced features</a></li>
<li><a href="#orgc18a166">Encoding</a></li>
<li><a href="#orgf3c8c2e">Encryption</a></li>
<li><a href="#org1e2d86e">Final newline</a></li>
<li><a href="#org0ecf089">History</a></li>
<li><a href="#org1318d92">Initial startup</a></li>
<li><a href="#orgf4fb039">Kill Ring Duplicates</a></li>
<li><a href="#org5078dff">More extensive apropos</a></li>
<li><a href="#org710d2cc">More Messages</a></li>
<li><a href="#orgf586a44">Mouse yank at point</a></li>
<li><a href="#org7aa47fd">Native Compilation</a></li>
<li><a href="#orga8932e5">No lockfiles</a></li>
<li><a href="#orga5e3a0a">Pop mark on repeat</a></li>
<li><a href="#orgdda840d">Prefer newer over compiled</a></li>
<li><a href="#orgc74cd98">Preferred programs</a></li>
<li><a href="#org59b04ee">Repeat on final keystroke</a></li>
<li><a href="#orgf6841de">Safe Local Variables</a></li>
<li><a href="#org7c2f25c">Scrolling</a></li>
<li><a href="#orgfddc699">Sentence End Spaces</a></li>
<li><a href="#orgddffcf0">Sort Fold Case</a></li>
<li><a href="#orgc009840">Truncate Lines</a></li>
<li><a href="#org0ca4239">Undo limits</a></li>
<li><a href="#orgd38fa26">Undo save</a></li>
<li><a href="#org5349675">Uniquify</a></li>
<li><a href="#org7f9b2f1">User info</a></li>
<li><a href="#org916018b">Windows</a></li>
<li><a href="#orgfe46d61">Logging stuff</a></li>
<li><a href="#org0e59591">Yes or no</a></li>
</ul>
</li>
<li><a href="#org88fb96c">Keybindings</a>
<ul>
<li><a href="#orgee0165e">Buffers</a></li>
<li><a href="#orgf7e535c">Browse Url</a></li>
<li><a href="#org2b4b185">Calculator</a></li>
<li><a href="#org6a9f902">Editing</a></li>
<li><a href="#org2942747">Eval</a></li>
<li><a href="#org71a709d">Frames</a></li>
<li><a href="#orgdc50d4d">Menubar</a></li>
<li><a href="#orgf365a29">Registers</a></li>
<li><a href="#orga18de11">Special mode</a></li>
</ul>
</li>
<li><a href="#org87bcc28">Theme/UI</a>
<ul>
<li><a href="#org7c3b3d9">Disable themes</a></li>
<li><a href="#orgaffa3a6">Maximize on startup</a></li>
<li><a href="#org53f487e">Setup Frame for Emacsclient</a></li>
<li><a href="#org7b894a5">Turn off UI elements</a></li>
</ul>
</li>
<li><a href="#org9843f2f">Buffer Functions</a>
<ul>
<li><a href="#org20e7211">Encoding</a></li>
<li><a href="#orgf1af278">Indent Buffer</a></li>
<li><a href="#orgb6d1b5d">Kill this buffer</a></li>
<li><a href="#org5de75b9">Last buffer</a></li>
<li><a href="#orgba19e9a">Narrow DWIM</a></li>
<li><a href="#org671bb4a">Nuke buffers</a></li>
<li><a href="#org505d1a9">Save buffers silently</a></li>
</ul>
</li>
<li><a href="#org160d02f">Editing Functions</a>
<ul>
<li><a href="#org9728584">Aligning symbols</a></li>
<li><a href="#org391d599">Beginning of line</a></li>
<li><a href="#org23b9008">Change numbers</a></li>
<li><a href="#orgd6f5171">Delete inside delimiters</a></li>
<li><a href="#orge5e820c">Generate a numbered list</a></li>
<li><a href="#org38fc74c">Kill Region</a></li>
<li><a href="#org6d7c45a">Kill Ring Save</a></li>
<li><a href="#org02ea06a">Kill Ring Save Whole Buffer</a></li>
<li><a href="#org8f8986a">Moving lines</a></li>
<li><a href="#org8ed349e">Sort Words</a></li>
<li><a href="#org45aa43b">Surround stuff</a></li>
<li><a href="#orgf9a3977">Untabify a buffer</a></li>
<li><a href="#orgdef6acd">XML pretty print</a></li>
</ul>
</li>
<li><a href="#org1f2939f">File Functions</a>
<ul>
<li><a href="#org29b744b">Delete this file</a></li>
<li><a href="#org7eba187">Insert other buffer file name</a></li>
<li><a href="#org32bee21">Make backup of current file</a></li>
<li><a href="#orgbfc1b09">Open current file as root</a></li>
<li><a href="#orgb065182">Rename file and buffer</a></li>
<li><a href="#org20da031">Yank current file contents to kill ring</a></li>
<li><a href="#orge78901c">Yank current file name to kill ring</a></li>
</ul>
</li>
<li><a href="#org7a7ebba">Miscellaneous</a>
<ul>
<li><a href="#org2e5a158">Byte compile and load on save</a></li>
<li><a href="#org7726703">Ensure init files are byte compiled</a></li>
<li><a href="#orgfc9e39e">Recompile config</a></li>
<li><a href="#orgba316a0">Tangle config</a></li>
<li><a href="#org93d3163">Googling</a></li>
</ul>
</li>
<li><a href="#orgccc03fd">Window Functions</a>
<ul>
<li><a href="#org0364169">Better scrolling of other windows</a></li>
<li><a href="#org954425b">Kill buffer other window</a></li>
<li><a href="#orgc43d938">Open a buffer in another window</a></li>
<li><a href="#org7a6820c">Split window right to last buffer</a></li>
<li><a href="#org48d2ffc">Split window below to last buffer</a></li>
<li><a href="#org7f44184">Switch to the previous window</a></li>
<li><a href="#org7e6899c">Toggle focus to last window</a></li>
<li><a href="#org29f2fd0">Toggle maximize window</a></li>
<li><a href="#org2c45878">Toggle vertical -&gt; horizontal splits</a></li>
</ul>
</li>
<li><a href="#org6a7dd16">Emacs Packages</a>
<ul>
<li><a href="#org7b858e5">Ansi Color</a></li>
<li><a href="#org305f9cb">Auto-fill</a></li>
<li><a href="#org72fbf30">Auto-revert</a></li>
<li><a href="#orge5f4f0e">Battery</a></li>
<li><a href="#org56947f0">Column Number</a></li>
<li><a href="#org38aa103">Dabbrev</a></li>
<li><a href="#org98f3334">Dired</a>
<ul>
<li><a href="#orgd1b981e">Dired Extras</a></li>
<li><a href="#org5a75a6f">Dired Omit</a></li>
<li><a href="#org7585958">Dired Listing Switches</a></li>
<li><a href="#org67a3216">Dired Settings</a></li>
<li><a href="#org0850949">Dired Keybindings</a></li>
<li><a href="#org9740207">Dired AUX</a></li>
<li><a href="#orgfad92cf">Dired-X Jump (Emacs&lt;28)</a></li>
<li><a href="#orgc1dd345">Find Dired</a></li>
<li><a href="#orgdfdee63">Windows Find</a></li>
<li><a href="#orgc62aa12">Writeable Dired</a></li>
</ul>
</li>
<li><a href="#org8a261a4">Doc View</a></li>
<li><a href="#org5158610">Ediff</a></li>
<li><a href="#org7594688">Eldoc</a></li>
<li><a href="#org8a330f0">Electric</a></li>
<li><a href="#org1fd6a98">ERC</a></li>
<li><a href="#org8ec7f9d">Eshell</a></li>
<li><a href="#orgece5e1b">Flymake</a></li>
<li><a href="#org0358a8a">Flyspell</a></li>
<li><a href="#orgc692f88">Gnus</a></li>
<li><a href="#orgb9abdec">Hide/Show</a></li>
<li><a href="#org45dae98">Highlight changes</a></li>
<li><a href="#org2fd8625">Highlight line</a></li>
<li><a href="#orgda1329a">Hippie Expand</a></li>
<li><a href="#org936f86b">Imenu</a></li>
<li><a href="#org52f840e">Isearch</a>
<ul>
<li><a href="#org9dc0162">Isearch exit</a></li>
<li><a href="#org15ab349">Copy to isearch</a></li>
<li><a href="#org6d89d5f">Kill to isearch</a></li>
<li><a href="#org528dd49">Isearch Abort DWIM</a></li>
<li><a href="#org493c254">Keybindings</a></li>
<li><a href="#org8f16a62">Settings</a></li>
</ul>
</li>
<li><a href="#org37bf929">Line Numbers</a></li>
<li><a href="#orgd0d4a84">Minibuffer</a>
<ul>
<li><a href="#org2105e20">Completion framework settings</a></li>
<li><a href="#org86ec4a4">Misc Minibuffer settings</a></li>
<li><a href="#org6a080ed">Save history mode</a></li>
</ul>
</li>
<li><a href="#org5c911d0">Occur</a></li>
<li><a href="#org2c5d213">Org</a>
<ul>
<li><a href="#orgb84d25b">Org Babel Load Languages</a></li>
<li><a href="#org46c6b15">Org Capture Templates</a></li>
<li><a href="#org5410109">Org Export &amp; View HTML</a></li>
<li><a href="#org4c4cfb8">Org Global Keybindings</a></li>
<li><a href="#orga5d0900">Org Latex</a></li>
<li><a href="#org8bf7977">Org Misc Settings</a></li>
<li><a href="#orgce7d5b8">Org Outline/Goto</a></li>
<li><a href="#orgf6517b6">Org Recompile Post Tangle</a></li>
<li><a href="#org11f38e8">Org Recursive Sort</a></li>
<li><a href="#org0d4b466">Org Refile</a></li>
<li><a href="#orgbb64d42">Org Special Keys</a></li>
<li><a href="#org1e0f9b7">Org Speed Commands</a></li>
<li><a href="#orgacd2173">Org Src</a></li>
<li><a href="#org06add37">Org Structure Templates</a></li>
<li><a href="#orgf238ee4">Org Todo Keywords</a></li>
</ul>
</li>
<li><a href="#org1b1379c">Pending delete</a></li>
<li><a href="#org1970304">Prettify Symbols</a></li>
<li><a href="#orgc95585d">Project (Emacs 28+)</a></li>
<li><a href="#orgf30bcb6">Pulse</a></li>
<li><a href="#org41652b3">Python</a></li>
<li><a href="#orgafd9c77">Recentf</a></li>
<li><a href="#org12a708b">Repeat Mode</a></li>
<li><a href="#org43afca2">Saveplace</a></li>
<li><a href="#org6e3be01">Selective Display</a></li>
<li><a href="#orgf7968b6">Semantic</a></li>
<li><a href="#orge02f661">Shell</a></li>
<li><a href="#org41eb11e">Shell Script</a></li>
<li><a href="#org6801368">Show paren</a></li>
<li><a href="#orga9f9b8b">Size Indication</a></li>
<li><a href="#orga331de5">Subword</a></li>
<li><a href="#org4807bf9">Tab-bar (Emacs 27+)</a></li>
<li><a href="#orga21eb3e">Term</a>
<ul>
<li><a href="#org55fa565">ANSI Term launcher</a></li>
<li><a href="#org31086ec">Set term coding system to UTF-8</a></li>
<li><a href="#orgea0af02">Switch to ANSI Term</a></li>
<li><a href="#org1df0ca2">Term Advise</a></li>
</ul>
</li>
<li><a href="#orge008108">Time</a></li>
<li><a href="#orgc9eb9df">Tramp</a></li>
<li><a href="#org08135ae">Version Control</a></li>
<li><a href="#org9047061">View mode</a></li>
<li><a href="#org500f13b">Whitespace</a></li>
<li><a href="#org654ee34">Windmove</a></li>
<li><a href="#orgcd947a4">Window Divider</a></li>
<li><a href="#orgc314db0">Winner mode</a></li>
</ul>
</li>
<li><a href="#org716c738">MELPA Packages</a>
<ul>
<li><a href="#org3a3185f">Setup package.el</a></li>
<li><a href="#org89d46dd">use-package bootstrap</a></li>
<li><a href="#orgb8f824a">Ansible</a></li>
<li><a href="#org82c39b8">Async</a></li>
<li><a href="#orga37b2b7">Blacken</a></li>
<li><a href="#orgdeef1c0">Completion</a>
<ul>
<li><a href="#orgbb8269c">Vertico</a></li>
<li><a href="#org8ca77a2">Consult</a></li>
<li><a href="#orgfd1ee7f">Marginalia</a></li>
<li><a href="#orgdb3329f">Orderless</a></li>
</ul>
</li>
<li><a href="#orgb2343ac">Default Text Scale</a></li>
<li><a href="#org7f72e56">Diminish</a></li>
<li><a href="#org53f4d65">Docker</a></li>
<li><a href="#org95a77a7">Eglot</a></li>
<li><a href="#orgf9156e0">Exec path from shell</a></li>
<li><a href="#org2f05923">Flycheck</a></li>
<li><a href="#org82f09cc">Git</a>
<ul>
<li><a href="#org8570d55">Gitlab CI</a></li>
<li><a href="#org9c732d9">Git Timemachine</a></li>
<li><a href="#orgbf7b8f6">Lazygit</a></li>
<li><a href="#orgeeb7e36">Magit</a></li>
</ul>
</li>
<li><a href="#orgd3a05bc">Go mode</a></li>
<li><a href="#org773f407">Hungry delete</a></li>
<li><a href="#org39c7c93">JS2 mode</a></li>
<li><a href="#orga618927">JSON</a></li>
<li><a href="#org2679f74">Markdown</a></li>
<li><a href="#orgb3119e6">Org</a>
<ul>
<li><a href="#org1dba6c6">htmlize</a></li>
</ul>
</li>
<li><a href="#org17358c3">Powershell</a></li>
<li><a href="#org05db64e">Projectile</a></li>
<li><a href="#org1e9d172">Restclient</a></li>
<li><a href="#org82e6d30">systemd</a></li>
<li><a href="#org8938ec7">Terraform</a></li>
<li><a href="#org69726a1">Trashed</a></li>
<li><a href="#orgfd3404b">Web Mode</a></li>
<li><a href="#orgab63bb0">Which Key</a></li>
<li><a href="#orgd55ee51">Writeable Grep</a></li>
<li><a href="#org5820145">YAML</a></li>
<li><a href="#org4f13247">Yasnippet</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
A fairly standard <a href="https://en.wikipedia.org/wiki/Literate_programming">literate</a> Emacs configuration using <a href="https://orgmode.org/">Org mode</a>. <b>Emacs 26+ ONLY</b>.
</p>

<p>
To install, evaluate the code block below with <code>C-c C-c</code> in an Emacs buffer:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-tangle)
(<span style="color: #b6a0ff;">if</span> (not (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)) (load early-init))
(load init-file)
(ts-ensure-byte-compiled-init)
</pre>
</div>

<p>
This will tangle all the code blocks below into <code>~/.emacs.d/init.el</code>, compile
that file and load it, installing a <a href="#org716c738">plethora of packages</a> along the way.
</p>

<p>
Be sure to back up your current <code>~/.emacs.d</code> with something like <code>mv
~/.emacs.d{,.bak}</code>.
</p>

<div id="outline-container-org21d8f09" class="outline-2">
<h2 id="org21d8f09">Lexical Binding</h2>
<div class="outline-text-2" id="text-org21d8f09">
<p>
This must come at the beginning of the file
</p>

<p>
<a href="https://nullprogram.com/blog/2016/12/22/">Some Performance Advantages of Lexical Scope</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp" id="orgd15bcba"><span style="color: #989898;">;; </span><span style="color: #989898;">-*- lexical-binding: t; -*-</span>
</pre>
</div>

<p>
And one for <code>~/.emacs.d/early-init.el</code> if it exists&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">-*- lexical-binding: t; -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc74fee6" class="outline-2">
<h2 id="orgc74fee6"><a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">Doom Speed Hacks</a></h2>
<div class="outline-text-2" id="text-orgc74fee6">
</div>
<div id="outline-container-orgb32ccf7" class="outline-3">
<h3 id="orgb32ccf7">Avoid garbage collection at startup</h3>
<div class="outline-text-3" id="text-orgb32ccf7">
<p>
The GC can easily double startup time, so we suppress it at startup by
turning up gc-cons-threshold (and perhaps gc-cons-percentage) temporarily:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gc-cons-threshold most-positive-fixnum <span style="color: #989898;">; </span><span style="color: #989898;">2^61 bytes</span>
      gc-cons-percentage 0.6)
</pre>
</div>

<p>
It is important to reset the garbage collection settings eventually. Not
doing so will cause garbage collection freezes during long-term interactive
use. Conversely, a gc-cons-threshold that is too small will cause
stuttering. We use 16mb as our default.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-default-gc-cons-settings</span> ()
  (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold 16777216 <span style="color: #989898;">; </span><span style="color: #989898;">16mb</span>
        gc-cons-percentage 0.1))
(add-hook 'emacs-startup-hook 'ts-default-gc-cons-settings)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6feb5c" class="outline-3">
<h3 id="orga6feb5c">Unset file-name-handler-alist temporarily</h3>
<div class="outline-text-3" id="text-orga6feb5c">
<p>
Emacs consults this variable every time a file is read or library loaded, or
when certain functions in the file API are used (like expand-file-name or
file-truename).
</p>

<p>
Emacs does this to check if a special handler is needed to read that file, but
none of them are (typically) necessary at startup, so we disable them
(temporarily!):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">ts-default-file-name-handler-alist</span> file-name-handler-alist)
(<span style="color: #b6a0ff;">setq</span> file-name-handler-alist nil)
</pre>
</div>

<p>
Don’t forget to restore file-name-handler-alist, otherwise TRAMP won’t work and
compressed/encrypted files won’t open.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-restore-default-file-name-handler-alist</span> ()
  (<span style="color: #b6a0ff;">setq</span> file-name-handler-alist ts-default-file-name-handler-alist))
(add-hook 'emacs-startup-hook 'ts-restore-default-file-name-handler-alist)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org208ad32" class="outline-2">
<h2 id="org208ad32">Settings</h2>
<div class="outline-text-2" id="text-org208ad32">
</div>
<div id="outline-container-orgfa4939c" class="outline-3">
<h3 id="orgfa4939c">Auto-save</h3>
<div class="outline-text-3" id="text-orgfa4939c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> auto-save-file-name-transforms '((<span style="color: #79a8ff;">".*"</span> <span style="color: #79a8ff;">"~/.emacs.d/auto-save-list/"</span> t)))
(<span style="color: #b6a0ff;">setq</span> auto-save-timeout 5)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8797424" class="outline-3">
<h3 id="org8797424">Backups</h3>
<div class="outline-text-3" id="text-org8797424">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> backup-directory-alist '((<span style="color: #79a8ff;">"."</span> . <span style="color: #79a8ff;">"~/.emacs.d/backups"</span>)))
(<span style="color: #b6a0ff;">setq</span> backup-by-copying t) <span style="color: #989898;">;; </span><span style="color: #989898;">copy files, don't rename them.</span>
(<span style="color: #b6a0ff;">setq</span> delete-old-versions t)
(<span style="color: #b6a0ff;">setq</span> kept-new-versions 12)
(<span style="color: #b6a0ff;">setq</span> kept-old-versions 12)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge4c018a" class="outline-3">
<h3 id="orge4c018a">Bell</h3>
<div class="outline-text-3" id="text-orge4c018a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> ring-bell-function 'ignore)
(<span style="color: #b6a0ff;">setq</span> visible-bell 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-org72b87e9" class="outline-3">
<h3 id="org72b87e9">Bookmarks</h3>
<div class="outline-text-3" id="text-org72b87e9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> bookmark-save-flag 1) <span style="color: #989898;">;; </span><span style="color: #989898;">always save bookmarks to file</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b3418b" class="outline-3">
<h3 id="org7b3418b">Clipboard</h3>
<div class="outline-text-3" id="text-org7b3418b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> select-enable-clipboard t)
<span style="color: #989898;">;; </span><span style="color: #989898;">(setq select-enable-primary t) ;; breaks standard yank meaning that following</span>
<span style="color: #989898;">;; </span><span style="color: #989898;">doesn't work as expected:</span>
(delete-selection-mode t)
(<span style="color: #b6a0ff;">setq</span> x-select-enable-clipboard-manager nil)
(<span style="color: #b6a0ff;">setq</span> save-interprogram-paste-before-kill t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4737709" class="outline-3">
<h3 id="org4737709">Code Style</h3>
<div class="outline-text-3" id="text-org4737709">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> c-default-style <span style="color: #79a8ff;">"bsd"</span>)
(<span style="color: #b6a0ff;">setq</span> c-basic-offset 4)
(<span style="color: #b6a0ff;">setq</span> css-indent-offset 2)
(<span style="color: #b6a0ff;">setq</span> js-indent-level 2)

<span style="color: #989898;">;; </span><span style="color: #989898;">If indent-tabs-mode is t, it may use tab, resulting in mixed spaces and tabs</span>
(<span style="color: #b6a0ff;">setq-default</span> indent-tabs-mode nil)

<span style="color: #989898;">;; </span><span style="color: #989898;">make tab key do indent first then completion.</span>
(<span style="color: #b6a0ff;">setq-default</span> tab-always-indent 'complete)
</pre>
</div>
</div>
</div>

<div id="outline-container-org39f9667" class="outline-3">
<h3 id="org39f9667">Compilation Scroll Output</h3>
<div class="outline-text-3" id="text-org39f9667">
<p>
Place point after complilation error
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> compilation-scroll-output 'first-error)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f236fc" class="outline-3">
<h3 id="org0f236fc">Customize settings file</h3>
<div class="outline-text-3" id="text-org0f236fc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> custom-file (expand-file-name <span style="color: #79a8ff;">"custom.el"</span> user-emacs-directory))
</pre>
</div>
</div>
</div>

<div id="outline-container-org803d433" class="outline-3">
<h3 id="org803d433">Delete all on backspace</h3>
<div class="outline-text-3" id="text-org803d433">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> backward-delete-char-untabify-method 'all)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6540f6e" class="outline-3">
<h3 id="org6540f6e">Emacsclient executable</h3>
<div class="outline-text-3" id="text-org6540f6e">
<p>
Only tangled on Windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">https://emacs.stackexchange.com/a/31061</span>
(<span style="color: #b6a0ff;">when</span> (equal system-type 'windows-nt)
  (<span style="color: #b6a0ff;">if</span> (file-readable-p <span style="color: #79a8ff;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
      (<span style="color: #b6a0ff;">setq-default</span> with-editor-emacsclient-executable <span style="color: #79a8ff;">"C:/Program Files/Emacs/x86_64/bin/emacsclient.exe"</span>)
    (<span style="color: #b6a0ff;">setq-default</span> with-editor-emacsclient-executable nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7554c61" class="outline-3">
<h3 id="org7554c61">Enable all advanced features</h3>
<div class="outline-text-3" id="text-org7554c61">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> disabled-command-function nil) <span style="color: #989898;">;; </span><span style="color: #989898;">enable all "advanced" features</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc18a166" class="outline-3">
<h3 id="orgc18a166">Encoding</h3>
<div class="outline-text-3" id="text-orgc18a166">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq-default</span> buffer-file-coding-system 'utf-8-unix)
(<span style="color: #b6a0ff;">setq-default</span> default-buffer-file-coding-system 'utf-8-unix)
(<span style="color: #b6a0ff;">setq</span> coding-system-for-read 'utf-8-unix)
(<span style="color: #b6a0ff;">setq</span> coding-system-for-write 'utf-8-unix)
(set-language-environment <span style="color: #79a8ff;">"UTF-8"</span>)
(set-default-coding-systems 'utf-8-unix)
(prefer-coding-system 'utf-8-unix)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf3c8c2e" class="outline-3">
<h3 id="orgf3c8c2e">Encryption</h3>
<div class="outline-text-3" id="text-orgf3c8c2e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> epa-file-cache-passphrase-for-symmetric-encryption t)
(<span style="color: #b6a0ff;">setf</span> epg-pinentry-mode 'loopback)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e2d86e" class="outline-3">
<h3 id="org1e2d86e">Final newline</h3>
<div class="outline-text-3" id="text-org1e2d86e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> require-final-newline t) <span style="color: #989898;">;; </span><span style="color: #989898;">useful for crontab</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ecf089" class="outline-3">
<h3 id="org0ecf089">History</h3>
<div class="outline-text-3" id="text-org0ecf089">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> history-length t)
(<span style="color: #b6a0ff;">setq</span> history-delete-duplicates t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1318d92" class="outline-3">
<h3 id="org1318d92">Initial startup</h3>
<div class="outline-text-3" id="text-org1318d92">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">display-startup-echo-area-message</span> ()
  <span style="color: #9ac8e0;">"Redefine this function to be more useful."</span>
  (message <span style="color: #79a8ff;">"Started in %s. Hacks &amp; Glory await! :-)"</span> (emacs-init-time)))
(<span style="color: #b6a0ff;">setq</span> inhibit-startup-screen t)
(<span style="color: #b6a0ff;">setq</span> initial-scratch-message nil)
(<span style="color: #b6a0ff;">setq</span> initial-major-mode 'fundamental-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4fb039" class="outline-3">
<h3 id="orgf4fb039">Kill Ring Duplicates</h3>
<div class="outline-text-3" id="text-orgf4fb039">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> kill-do-not-save-duplicates t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5078dff" class="outline-3">
<h3 id="org5078dff">More extensive apropos</h3>
<div class="outline-text-3" id="text-org5078dff">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> apropos-do-all t) <span style="color: #989898;">;; </span><span style="color: #989898;">doesn't seem to be documented anywhere..</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org710d2cc" class="outline-3">
<h3 id="org710d2cc">More Messages</h3>
<div class="outline-text-3" id="text-org710d2cc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> message-log-max 10000)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf586a44" class="outline-3">
<h3 id="orgf586a44">Mouse yank at point</h3>
<div class="outline-text-3" id="text-orgf586a44">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> mouse-yank-at-point t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7aa47fd" class="outline-3">
<h3 id="org7aa47fd">Native Compilation</h3>
<div class="outline-text-3" id="text-org7aa47fd">
<p>
Compile <code>elc</code> files as needed, in a deferred/async manner.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">when</span> (fboundp 'native-compile-async)
  (<span style="color: #b6a0ff;">setq</span> comp-deferred-compilation t
        comp-deferred-compilation-black-list '(<span style="color: #79a8ff;">"/mu4e.*\\.el$"</span>)))
</pre>
</div>

<p>
Dealing with system-wide packages:
</p>

<p>
Some packages like for example mu4e are located in /usr and need root
permissions to be compiled, for them you can run
</p>

<div class="org-src-container">
<pre class="src src-shell">sudo emacs -Q -batch -L . -f batch-native-compile *.el
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8932e5" class="outline-3">
<h3 id="orga8932e5">No lockfiles</h3>
<div class="outline-text-3" id="text-orga8932e5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> create-lockfiles nil) <span style="color: #989898;">;; </span><span style="color: #989898;">prevent creation of .#myfile.ext</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5e3a0a" class="outline-3">
<h3 id="orga5e3a0a">Pop mark on repeat</h3>
<div class="outline-text-3" id="text-orga5e3a0a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> set-mark-command-repeat-pop t) <span style="color: #989898;">;; </span><span style="color: #989898;">repeating C-SPC after popping, pops it</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdda840d" class="outline-3">
<h3 id="orgdda840d">Prefer newer over compiled</h3>
<div class="outline-text-3" id="text-orgdda840d">
<p>
If init.elc is older, use newer <code>init.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> load-prefer-newer t) <span style="color: #989898;">;; </span><span style="color: #989898;">if init.elc is older, use newer init.el</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc74cd98" class="outline-3">
<h3 id="orgc74cd98">Preferred programs</h3>
<div class="outline-text-3" id="text-orgc74cd98">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">when</span> (executable-find <span style="color: #79a8ff;">"rg"</span>)
  (<span style="color: #b6a0ff;">setq</span> grep-program <span style="color: #79a8ff;">"rg"</span>))

(<span style="color: #b6a0ff;">when</span> (executable-find <span style="color: #79a8ff;">"fd"</span>)
  (<span style="color: #b6a0ff;">setq</span> find-program <span style="color: #79a8ff;">"fd"</span>))

(<span style="color: #b6a0ff;">when</span> (executable-find <span style="color: #79a8ff;">"aspell"</span>)
  (<span style="color: #b6a0ff;">setq</span> ispell-program-name <span style="color: #79a8ff;">"aspell"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org59b04ee" class="outline-3">
<h3 id="org59b04ee">Repeat on final keystroke</h3>
<div class="outline-text-3" id="text-org59b04ee">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> repeat-on-final-keystroke t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6841de" class="outline-3">
<h3 id="orgf6841de">Safe Local Variables</h3>
<div class="outline-text-3" id="text-orgf6841de">
<p>
This variables are added to the end of this file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> safe-local-variable-values
      '((eval setq org-confirm-babel-evaluate 'nil)
        (eval setq early-init (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory))
        (eval setq init-file (expand-file-name <span style="color: #79a8ff;">"init.el"</span> user-emacs-directory))
        (eval add-hook 'after-save-hook 'org-html-export-to-html nil t)
        (eval add-hook 'after-save-hook 'org-latex-export-to-pdf nil t)
        (eval add-hook 'after-save-hook 'org-twbs-export-to-pdf nil t)
        (eval add-hook 'after-save-hook 'org-babel-tangle nil t)
        (eval add-hook 'after-save-hook (<span style="color: #b6a0ff;">lambda</span> nil (org-export-to-file 'html <span style="color: #79a8ff;">"index.html"</span>) (org-latex-export-to-pdf)) nil t)
        (after-save-hook : (<span style="color: #b6a0ff;">lambda</span> nil (org-export-to-file 'html <span style="color: #79a8ff;">"index.html"</span>) (org-latex-export-to-pdf)))
        (after-save-hook (<span style="color: #b6a0ff;">lambda</span> nil (org-export-to-file 'html <span style="color: #79a8ff;">"index.html"</span>) (org-latex-export-to-pdf)))
        (org-html-validation-link)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c2f25c" class="outline-3">
<h3 id="org7c2f25c">Scrolling</h3>
<div class="outline-text-3" id="text-org7c2f25c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> scroll-step 4)
(<span style="color: #b6a0ff;">setq</span> scroll-margin 2)
(<span style="color: #b6a0ff;">setq</span> scroll-conservatively 4)
(<span style="color: #b6a0ff;">setq</span> scroll-preserve-screen-position t)
</pre>
</div>

<blockquote>
<p>
When enabled, and if your mouse supports it, you can scroll the display up or
down at pixel resolution, according to what your mouse wheel reports. Unlike
pixel-scroll-mode, this mode scrolls the display pixel-by-pixel, as opposed to
only animating line-by-line scrolls.
</p>
</blockquote>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(pixel-scroll-precision-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfddc699" class="outline-3">
<h3 id="orgfddc699">Sentence End Spaces</h3>
<div class="outline-text-3" id="text-orgfddc699">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> sentence-end-double-space nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgddffcf0" class="outline-3">
<h3 id="orgddffcf0">Sort Fold Case</h3>
<div class="outline-text-3" id="text-orgddffcf0">
<p>
When do I ever want to sort case sensitively?!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> sort-fold-case t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc009840" class="outline-3">
<h3 id="orgc009840">Truncate Lines</h3>
<div class="outline-text-3" id="text-orgc009840">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-default 'truncate-lines t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ca4239" class="outline-3">
<h3 id="org0ca4239">Undo limits</h3>
<div class="outline-text-3" id="text-org0ca4239">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">http://www.dr-qubit.org/Lost_undo-tree_history.html</span>
(<span style="color: #b6a0ff;">setq</span> undo-limit 80000000)
(<span style="color: #b6a0ff;">setq</span> undo-strong-limit 90000000)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd38fa26" class="outline-3">
<h3 id="orgd38fa26">Undo save</h3>
<div class="outline-text-3" id="text-orgd38fa26">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'desktop-locals-to-save 'buffer-undo-list)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5349675" class="outline-3">
<h3 id="org5349675">Uniquify</h3>
<div class="outline-text-3" id="text-org5349675">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> uniquify-buffer-name-style 'forward)
(<span style="color: #b6a0ff;">setq</span> uniquify-strip-common-suffix t)
(<span style="color: #b6a0ff;">setq</span> uniquify-after-kill-buffer-p t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f9b2f1" class="outline-3">
<h3 id="org7f9b2f1">User info</h3>
<div class="outline-text-3" id="text-org7f9b2f1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> user-full-name <span style="color: #79a8ff;">"Toby Slight"</span>)
(<span style="color: #b6a0ff;">setq</span> user-mail-address <span style="color: #79a8ff;">"tslight@pm.me"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org916018b" class="outline-3">
<h3 id="org916018b">Windows</h3>
<div class="outline-text-3" id="text-org916018b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> split-width-threshold 200)
(<span style="color: #b6a0ff;">setq</span> split-height-threshold 100)
(<span style="color: #b6a0ff;">setq</span> auto-window-vscroll nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfe46d61" class="outline-3">
<h3 id="orgfe46d61">Logging stuff</h3>
<div class="outline-text-3" id="text-orgfe46d61">
<p>
<a href="https://www.reddit.com/r/emacs/comments/l42oep/suppress_nativecomp_warnings_buffer/">https://www.reddit.com/r/emacs/comments/l42oep/suppress_nativecomp_warnings_buffer/</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> warning-minimum-level <span style="color: #f78fe7;">:error</span>)
(<span style="color: #b6a0ff;">setq</span> warning-suppress-types '((comp) (comp) (comp)))
(<span style="color: #b6a0ff;">setq</span> comp-async-report-warnings-errors 'nil)
(<span style="color: #b6a0ff;">setq</span> native-comp-async-report-warnings-errors 'nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0e59591" class="outline-3">
<h3 id="org0e59591">Yes or no</h3>
<div class="outline-text-3" id="text-org0e59591">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p) <span style="color: #989898;">;; </span><span style="color: #989898;">never have to type full word</span>
(<span style="color: #b6a0ff;">setq</span> confirm-kill-emacs 'y-or-n-p)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org88fb96c" class="outline-2">
<h2 id="org88fb96c">Keybindings</h2>
<div class="outline-text-2" id="text-org88fb96c">
</div>
<div id="outline-container-orgee0165e" class="outline-3">
<h3 id="orgee0165e">Buffers</h3>
<div class="outline-text-3" id="text-orgee0165e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-l"</span>) 'lisp-interaction-mode)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x c"</span>) 'save-buffers-kill-emacs)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x C-b"</span>) 'ibuffer)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-k"</span>) 'kill-buffer)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>) <span style="color: #989898;">; </span><span style="color: #989898;">Emacs 28</span>
  (<span style="color: #b6a0ff;">let</span> ((map ctl-x-x-map))
    (define-key map <span style="color: #79a8ff;">"e"</span> #'eval-buffer)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7e535c" class="outline-3">
<h3 id="orgf7e535c">Browse Url</h3>
<div class="outline-text-3" id="text-orgf7e535c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-b"</span>) 'browse-url-of-file)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b4b185" class="outline-3">
<h3 id="org2b4b185">Calculator</h3>
<div class="outline-text-3" id="text-org2b4b185">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c c"</span>) 'calculator)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-c"</span>) 'calc)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a9f902" class="outline-3">
<h3 id="org6a9f902">Editing</h3>
<div class="outline-text-3" id="text-org6a9f902">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c C-e"</span>) 'pp-eval-last-sexp)
(global-set-key (kbd <span style="color: #79a8ff;">"C-z"</span>) 'zap-up-to-char) <span style="color: #989898;">; </span><span style="color: #989898;">suspend is still bound to C-x C-z</span>
(global-set-key (kbd <span style="color: #79a8ff;">"M-z"</span>) 'zap-to-char)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-t"</span>) 'transpose-regions)
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-p"</span>) 'transpose-paragraphs)
</pre>
</div>

<p>
Remap some default to saner options
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"M-%"</span>) 'query-replace-regexp) <span style="color: #989898;">; </span><span style="color: #989898;">regex all the things!</span>
(global-set-key (kbd <span style="color: #79a8ff;">"M-;"</span>) 'comment-line)         <span style="color: #989898;">; </span><span style="color: #989898;">comment-dwim by default</span>
(global-set-key (kbd <span style="color: #79a8ff;">"C-M-;"</span>) 'comment-dwim)       <span style="color: #989898;">; </span><span style="color: #989898;">unbound by default</span>
(global-set-key (kbd <span style="color: #79a8ff;">"C-x C-;"</span>) 'comment-box)      <span style="color: #989898;">; </span><span style="color: #989898;">comment-line by default</span>
(global-set-key (kbd <span style="color: #79a8ff;">"M-o"</span>) 'delete-blank-lines)   <span style="color: #989898;">; </span><span style="color: #989898;">this is on C-x C-o by default</span>
(global-set-key (kbd <span style="color: #79a8ff;">"M-SPC"</span>) 'cycle-spacing)      <span style="color: #989898;">; </span><span style="color: #989898;">just-one-space by default</span>
</pre>
</div>

<p>
Always do what I mean!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key [remap capitalize-word] 'capitalize-dwim)
(global-set-key [remap downcase-word] 'downcase-dwim)
(global-set-key [remap upcase-word] 'upcase-dwim)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2942747" class="outline-3">
<h3 id="org2942747">Eval</h3>
<div class="outline-text-3" id="text-org2942747">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-e b"</span>) (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">interactive</span>) (eval-buffer) (message <span style="color: #79a8ff;">"Evaluated buffer"</span>)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-e d"</span>) (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">interactive</span>) (eval-defun) (message <span style="color: #79a8ff;">"Evaluated function"</span>)))
(global-set-key (kbd <span style="color: #79a8ff;">"C-x M-e r"</span>) (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">interactive</span>) (eval-region) (message <span style="color: #79a8ff;">"Evaluated region"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org71a709d" class="outline-3">
<h3 id="org71a709d">Frames</h3>
<div class="outline-text-3" id="text-org71a709d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-&lt;f10&gt;"</span>) 'toggle-frame-maximized)
(global-set-key (kbd <span style="color: #79a8ff;">"C-&lt;f11&gt;"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s-f"</span>) 'toggle-frame-fullscreen)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s-m"</span>) 'toggle-frame-maximized)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc50d4d" class="outline-3">
<h3 id="orgdc50d4d">Menubar</h3>
<div class="outline-text-3" id="text-orgdc50d4d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"S-&lt;f10&gt;"</span>) 'menu-bar-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf365a29" class="outline-3">
<h3 id="orgf365a29">Registers</h3>
<div class="outline-text-3" id="text-orgf365a29">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-x j"</span>) 'jump-to-register)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga18de11" class="outline-3">
<h3 id="orga18de11">Special mode</h3>
<div class="outline-text-3" id="text-orga18de11">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">for help modes, and simple/special modes</span>
(define-key special-mode-map <span style="color: #79a8ff;">"n"</span> #'forward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"p"</span> #'backward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"f"</span> #'forward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"b"</span> #'backward-button)
(define-key special-mode-map <span style="color: #79a8ff;">"n"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #79a8ff;">"p"</span> #'widget-backward)
(define-key special-mode-map <span style="color: #79a8ff;">"f"</span> #'widget-forward)
(define-key special-mode-map <span style="color: #79a8ff;">"b"</span> #'widget-backward)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org87bcc28" class="outline-2">
<h2 id="org87bcc28">Theme/UI</h2>
<div class="outline-text-2" id="text-org87bcc28">
</div>
<div id="outline-container-org7c3b3d9" class="outline-3">
<h3 id="org7c3b3d9">Disable themes</h3>
<div class="outline-text-3" id="text-org7c3b3d9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">load-theme</span> (before theme-dont-propagate activate)
  <span style="color: #9ac8e0;">"Disable theme before loading new one."</span>
  (mapc #'disable-theme custom-enabled-themes))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaffa3a6" class="outline-3">
<h3 id="orgaffa3a6">Maximize on startup</h3>
<div class="outline-text-3" id="text-orgaffa3a6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> default-frame-alist '((undecorated . t)
                            (fullscreen . maximized)
                            (vertical-scroll-bars . nil)))
(<span style="color: #b6a0ff;">setq</span> frame-resize-pixelwise t) <span style="color: #989898;">;; </span><span style="color: #989898;">jwm resize fix</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org53f487e" class="outline-3">
<h3 id="org53f487e">Setup Frame for Emacsclient</h3>
<div class="outline-text-3" id="text-org53f487e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-setup-emacs-nw</span> ()
  <span style="color: #9ac8e0;">"Change some settings to make Emacs more terminal friendly."</span>
  (xterm-mouse-mode 1)
  (mouse-avoidance-mode 'banish)
  (<span style="color: #b6a0ff;">setq</span> mouse-wheel-follow-mouse 't) <span style="color: #989898;">;; </span><span style="color: #989898;">scroll window under mouse</span>
  (<span style="color: #b6a0ff;">setq</span> mouse-wheel-progressive-speed nil) <span style="color: #989898;">;; </span><span style="color: #989898;">don't accelerate scrolling</span>
  (<span style="color: #b6a0ff;">setq</span> mouse-wheel-scroll-amount '(1 ((shift) . 1))) <span style="color: #989898;">;; </span><span style="color: #989898;">one line at a time</span>
  (global-set-key [mouse-4] '(lambda () (<span style="color: #b6a0ff;">interactive</span>) (scroll-down 1)))
  (global-set-key [mouse-5] '(lambda () (<span style="color: #b6a0ff;">interactive</span>) (scroll-up 1))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-setup-emacs-gui</span> ()
  <span style="color: #9ac8e0;">"Change some settings that are only applicable to graphical Emacs."</span>
  (<span style="color: #b6a0ff;">cond</span> ((eq system-type 'windows-nt) (set-frame-font <span style="color: #79a8ff;">"Cascadia Mono 11"</span> nil t))
        ((eq system-type 'darwin) (set-frame-font <span style="color: #79a8ff;">"Monaco 12"</span> nil t))
        ((eq system-type 'gnu/linux) (set-frame-font <span style="color: #79a8ff;">"Monospace 11"</span> nil t))
        (t (set-frame-font <span style="color: #79a8ff;">"Monospace 11"</span> nil t))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-after-make-frame</span> (frame)
  <span style="color: #9ac8e0;">"Add custom settings after making the FRAME."</span>
  (select-frame frame)
  (<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
      (load-theme 'wombat)
    (load-theme 'modus-vivendi))
  (<span style="color: #b6a0ff;">if</span> (display-graphic-p)
      (ts-setup-emacs-gui)
    (ts-setup-emacs-nw)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (daemonp)
    (add-hook 'after-make-frame-functions #'ts-after-make-frame(selected-frame))
  (ts-after-make-frame(selected-frame)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b894a5" class="outline-3">
<h3 id="org7b894a5">Turn off UI elements</h3>
<div class="outline-text-3" id="text-org7b894a5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (not (eq system-type 'darwin))
    (<span style="color: #b6a0ff;">if</span> (fboundp 'menu-bar-mode) (menu-bar-mode -1)))
(<span style="color: #b6a0ff;">if</span> (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
(<span style="color: #b6a0ff;">if</span> (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(<span style="color: #b6a0ff;">if</span> (fboundp 'tooltip-mode) (tooltip-mode -1))
(<span style="color: #b6a0ff;">if</span> (fboundp 'set-horizontal-scroll-bar-mode)
    (set-horizontal-scroll-bar-mode nil))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9843f2f" class="outline-2">
<h2 id="org9843f2f">Buffer Functions</h2>
<div class="outline-text-2" id="text-org9843f2f">
</div>
<div id="outline-container-org20e7211" class="outline-3">
<h3 id="org20e7211">Encoding</h3>
<div class="outline-text-3" id="text-org20e7211">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-convert-to-unix-coding-system</span> ()
  <span style="color: #9ac8e0;">"Change the current buffer's file encoding to unix."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((coding-str (symbol-name buffer-file-coding-system)))
    (<span style="color: #b6a0ff;">when</span> (string-match <span style="color: #79a8ff;">"-</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">(?:</span><span style="color: #79a8ff;">dos</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">mac</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">)</span><span style="color: #79a8ff;">$"</span> coding-str)
      (set-buffer-file-coding-system 'unix))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x RET u"</span>) 'ts-convert-to-unix-coding-system)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-hide-dos-eol</span> ()
  <span style="color: #9ac8e0;">"Do not show ^M in files containing mixed UNIX and DOS line endings."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">setq</span> buffer-display-table (make-display-table))
  (aset buffer-display-table ?\^M []))

(add-hook 'find-file-hook 'ts-hide-dos-eol)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1af278" class="outline-3">
<h3 id="orgf1af278">Indent Buffer</h3>
<div class="outline-text-3" id="text-orgf1af278">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-indent-buffer</span> ()
  <span style="color: #9ac8e0;">"Indent the contents of a buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (indent-region (point-min) (point-max)))

(global-set-key (kbd <span style="color: #79a8ff;">"M-i"</span>) 'ts-indent-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6d1b5d" class="outline-3">
<h3 id="orgb6d1b5d">Kill this buffer</h3>
<div class="outline-text-3" id="text-orgb6d1b5d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-this-buffer</span> ()
  <span style="color: #9ac8e0;">"Kill the current buffer - `</span><span style="color: #00bcff;">kill-this-buffer</span><span style="color: #9ac8e0;">' is unreliable."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (kill-buffer (current-buffer)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x k"</span>) 'ts-kill-this-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5de75b9" class="outline-3">
<h3 id="org5de75b9">Last buffer</h3>
<div class="outline-text-3" id="text-org5de75b9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-last-buffer</span> ()
  <span style="color: #9ac8e0;">"Switch back and forth between two buffers easily."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (switch-to-buffer (other-buffer (current-buffer) 1)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c b"</span>) 'ts-last-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba19e9a" class="outline-3">
<h3 id="orgba19e9a">Narrow DWIM</h3>
<div class="outline-text-3" id="text-orgba19e9a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-narrow-or-widen-dwim</span> (p)
  <span style="color: #9ac8e0;">"If the buffer is narrowed, it widens, otherwise, it narrows intelligently.</span>

<span style="color: #9ac8e0;">Intelligently means: region, org-src-block, org-subtree, or</span>
<span style="color: #9ac8e0;">defun, whichever applies first.</span>

<span style="color: #9ac8e0;">Narrowing to org-src-block actually calls `</span><span style="color: #00bcff;">org-edit-src-code</span><span style="color: #9ac8e0;">'.</span>
<span style="color: #9ac8e0;">With prefix P, don't widen, just narrow even if buffer is already</span>
<span style="color: #9ac8e0;">narrowed."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">declare</span> (interactive-only))
  (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">and</span> (buffer-narrowed-p) (not p)) (widen))
        ((region-active-p)
         (narrow-to-region (region-beginning) (region-end)))
        ((derived-mode-p 'org-mode)
         <span style="color: #989898;">;; </span><span style="color: #989898;">`</span><span style="color: #00bcff;">org-edit-src-code</span><span style="color: #989898;">' is not a real narrowing command.</span>
         <span style="color: #989898;">;; </span><span style="color: #989898;">Remove this first conditional if you don't want it.</span>
         (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">ignore-errors</span> (org-edit-src-code))
                (delete-other-windows))
               ((org-at-block-p)
                (org-narrow-to-block))
               (t (org-narrow-to-subtree))))
        (t (narrow-to-defun))))

(define-key ctl-x-map <span style="color: #79a8ff;">"n"</span> 'ts-narrow-or-widen-dwim)
(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-x n"</span>) 'ts-narrow-or-widen-dwim))
</pre>
</div>
</div>
</div>

<div id="outline-container-org671bb4a" class="outline-3">
<h3 id="org671bb4a">Nuke buffers</h3>
<div class="outline-text-3" id="text-org671bb4a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-nuke-buffers</span> ()
  <span style="color: #9ac8e0;">"Kill all buffers, leaving *scratch* only."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapc
   (<span style="color: #b6a0ff;">lambda</span> (buffer)
     (kill-buffer buffer))
   (buffer-list))
  (<span style="color: #b6a0ff;">if</span> current-prefix-arg
      (delete-other-windows)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-n"</span>) 'ts-nuke-buffers)
</pre>
</div>
</div>
</div>

<div id="outline-container-org505d1a9" class="outline-3">
<h3 id="org505d1a9">Save buffers silently</h3>
<div class="outline-text-3" id="text-org505d1a9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-save-buffers-silently</span> ()
  <span style="color: #9ac8e0;">"Save all open buffers without prompting."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (save-some-buffers t)
  (message <span style="color: #79a8ff;">"Saved all buffers :-)"</span>))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c s"</span>) 'ts-save-buffers-silently)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org160d02f" class="outline-2">
<h2 id="org160d02f">Editing Functions</h2>
<div class="outline-text-2" id="text-org160d02f">
</div>
<div id="outline-container-org9728584" class="outline-3">
<h3 id="org9728584">Aligning symbols</h3>
<div class="outline-text-3" id="text-org9728584">
<p>
Some handy functions to make aligning symbols less painful.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-align-symbol</span> (begin end symbol)
  <span style="color: #9ac8e0;">"Align any SYMBOL in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r\nsEnter align symbol: "</span>)
  (align-regexp begin end (concat <span style="color: #79a8ff;">"</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">(</span><span style="color: #79a8ff;">\\s-*</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">)</span><span style="color: #79a8ff;">"</span> symbol) 1 1))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c a"</span>) 'ts-align-symbol)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-align-numbers</span> (begin end)
  <span style="color: #9ac8e0;">"Align numbers in region (between BEGIN and END)."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r"</span>)
  (ts-align-symbol begin end <span style="color: #79a8ff;">"[0-9]+"</span>))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c #"</span>) 'ts-align-numbers)

(<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">align-regexp</span> (around align-regexp-with-spaces activate)
  <span style="color: #9ac8e0;">"Force alignment commands to use spaces, not tabs."</span>
  (<span style="color: #b6a0ff;">let</span> ((indent-tabs-mode nil))
    ad-do-it))
</pre>
</div>
</div>
</div>

<div id="outline-container-org391d599" class="outline-3">
<h3 id="org391d599">Beginning of line</h3>
<div class="outline-text-3" id="text-org391d599">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-move-beginning-of-line</span> ()
  <span style="color: #9ac8e0;">"Move point back to indentation.</span>

<span style="color: #9ac8e0;">If there is any non blank characters to the left of the cursor.</span>
<span style="color: #9ac8e0;">Otherwise point moves to beginning of line."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (= (point) (<span style="color: #b6a0ff;">save-excursion</span> (back-to-indentation) (point)))
      (beginning-of-line)
    (back-to-indentation)))

(global-set-key [remap move-beginning-of-line] 'ts-move-beginning-of-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-org23b9008" class="outline-3">
<h3 id="org23b9008">Change numbers</h3>
<div class="outline-text-3" id="text-org23b9008">
<p>
Increment or decrement numbers at the point.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts--change-number</span> (<span style="color: #6ae4b9;">&amp;optional</span> arg)
  <span style="color: #9ac8e0;">"Increment the number forward from point by '</span><span style="color: #00bcff;">arg</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p*"</span>)
  (<span style="color: #b6a0ff;">save-excursion</span>
    (<span style="color: #b6a0ff;">save-match-data</span>
      (<span style="color: #b6a0ff;">let</span> (inc-by field-width answer)
        (<span style="color: #b6a0ff;">setq</span> inc-by (<span style="color: #b6a0ff;">if</span> arg arg 1))
        (skip-chars-backward <span style="color: #79a8ff;">"0123456789"</span>)
        (<span style="color: #b6a0ff;">when</span> (re-search-forward <span style="color: #79a8ff;">"[0-9]+"</span> nil t)
          (<span style="color: #b6a0ff;">setq</span> field-width (- (match-end 0) (match-beginning 0)))
          (<span style="color: #b6a0ff;">setq</span> answer (+ (string-to-number (match-string 0) 10) inc-by))
          (<span style="color: #b6a0ff;">when</span> (&lt; answer 0)
            (<span style="color: #b6a0ff;">setq</span> answer (+ (expt 10 field-width) answer)))
          (replace-match (format (concat <span style="color: #79a8ff;">"%0"</span> (int-to-string field-width) <span style="color: #79a8ff;">"d"</span>)
                                 answer)))))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-change-number</span> (inc)
  <span style="color: #9ac8e0;">"Adjust the height of the default face by INC.</span>

<span style="color: #9ac8e0;">INC may be passed as a numeric prefix argument."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (<span style="color: #b6a0ff;">let</span> ((ev last-command-event)
        (echo-keystrokes nil))
    (<span style="color: #b6a0ff;">let*</span> ((base (event-basic-type ev))
           (step
            (<span style="color: #b6a0ff;">pcase</span> base
              ((<span style="color: #b6a0ff;">or</span> ?+ ?=) inc)
              (?- (- inc))
              (?0 0)
              (_ inc))))
      (ts--change-number step)
      <span style="color: #989898;">;; </span><span style="color: #989898;">(unless (zerop step)</span>
      (message <span style="color: #79a8ff;">"Use +,-,0 for further adjustment"</span>)
      (set-transient-map
       (<span style="color: #b6a0ff;">let</span> ((map (make-sparse-keymap)))
         (<span style="color: #b6a0ff;">dolist</span> (mods '(() (control)))
           (<span style="color: #b6a0ff;">dolist</span> (key '(?- ?+ ?= ?0)) <span style="color: #989898;">;; </span><span style="color: #989898;">= is often unshifted +.</span>
             (define-key map (vector (append mods (list key)))
                         (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">interactive</span>) (ts-change-number (abs inc))))))
         map)))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c +"</span>) 'ts-change-number)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c -"</span>) 'ts-change-number)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6f5171" class="outline-3">
<h3 id="orgd6f5171">Delete inside delimiters</h3>
<div class="outline-text-3" id="text-orgd6f5171">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-delete-inside-delimiters</span> (arg)
  <span style="color: #9ac8e0;">"Deletes the text within parentheses, brackets or quotes.</span>
<span style="color: #9ac8e0;">With prefix ARG, delete delimiters too."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  <span style="color: #989898;">;; </span><span style="color: #989898;">Search for a match on the same line, don't delete across lines</span>
  (search-backward-regexp <span style="color: #79a8ff;">"[[{(&lt;\"</span><span style="color: #fec43f;">\</span><span style="color: #79a8ff;">']"</span> (line-beginning-position))
  (forward-char)
  (<span style="color: #b6a0ff;">let</span> ((lstart (point)))
    (search-forward-regexp <span style="color: #79a8ff;">"[]})&gt;\"</span><span style="color: #fec43f;">\</span><span style="color: #79a8ff;">']"</span> (line-end-position))
    (backward-char)
    (<span style="color: #b6a0ff;">if</span> arg
        (kill-region (- lstart 1) (+ (point) 1))
      (kill-region lstart (point)))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c d"</span>) 'ts-delete-inside-delimiters)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5e820c" class="outline-3">
<h3 id="orge5e820c">Generate a numbered list</h3>
<div class="outline-text-3" id="text-orge5e820c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-generate-numbered-list</span> (start end char)
  <span style="color: #9ac8e0;">"Create a numbered list from START to END.  Using CHAR as punctuation."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"nStart number:\nnEnd number:\nsCharacter:"</span>)
  (<span style="color: #b6a0ff;">let</span> ((x start))
    (<span style="color: #b6a0ff;">while</span> (&lt;= x end)
      (insert (concat (number-to-string x) char))
      (newline)
      (<span style="color: #b6a0ff;">setq</span> x (+ x 1)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org38fc74c" class="outline-3">
<h3 id="org38fc74c">Kill Region</h3>
<div class="outline-text-3" id="text-org38fc74c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-region</span> (arg)
  <span style="color: #9ac8e0;">"Cut region or current ARG lines to kill ring."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (<span style="color: #b6a0ff;">let</span> (p1 p2)
    (<span style="color: #b6a0ff;">if</span> (use-region-p)
        (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (region-beginning))
               (<span style="color: #b6a0ff;">setq</span> p2 (region-end)))
      (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (line-beginning-position))
             (<span style="color: #b6a0ff;">setq</span> p2 (line-beginning-position (+ arg 1)))))
    (kill-region p1 p2)))

(global-set-key [remap kill-region] 'ts-kill-region)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d7c45a" class="outline-3">
<h3 id="org6d7c45a">Kill Ring Save</h3>
<div class="outline-text-3" id="text-org6d7c45a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-ring-save</span> (arg)
  <span style="color: #9ac8e0;">"Copy region or current ARG lines to kill ring."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (<span style="color: #b6a0ff;">let</span> (p1 p2)
    (<span style="color: #b6a0ff;">if</span> (use-region-p)
        (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (region-beginning))
               (<span style="color: #b6a0ff;">setq</span> p2 (region-end)))
      (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> p1 (line-beginning-position))
             (<span style="color: #b6a0ff;">setq</span> p2 (line-beginning-position (+ arg 1)))))
    (kill-ring-save p1 p2)
    (goto-char p2)))

(global-set-key [remap kill-ring-save] 'ts-kill-ring-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-org02ea06a" class="outline-3">
<h3 id="org02ea06a">Kill Ring Save Whole Buffer</h3>
<div class="outline-text-3" id="text-org02ea06a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-ring-save-whole-buffer</span> ()
  <span style="color: #9ac8e0;">"Save the entire contents of the buffer to the kill ring."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (kill-ring-save (point-min) (point-max))
  (message <span style="color: #79a8ff;">"Saved whole buffer to kill ring :-)"</span>))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c h"</span>) 'ts-kill-ring-save-whole-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f8986a" class="outline-3">
<h3 id="org8f8986a">Moving lines</h3>
<div class="outline-text-3" id="text-org8f8986a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">save-column</span> (<span style="color: #6ae4b9;">&amp;rest</span> body)
  `(<span style="color: #b6a0ff;">let</span> ((column (current-column)))
     (<span style="color: #b6a0ff;">unwind-protect</span> (<span style="color: #b6a0ff;">progn</span> ,@body) (move-to-column column))))
(put 'save-column 'lisp-indent-function 0)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">move-line-up</span> ()
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-column</span> (transpose-lines 1) (forward-line -2)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">move-line-down</span> ()
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-column</span> (forward-line 1) (transpose-lines 1) (forward-line -1)))

(global-set-key (kbd <span style="color: #79a8ff;">"M-p"</span>) 'move-line-up)
(global-set-key (kbd <span style="color: #79a8ff;">"M-n"</span>) 'move-line-down)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ed349e" class="outline-3">
<h3 id="org8ed349e">Sort Words</h3>
<div class="outline-text-3" id="text-org8ed349e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-sort-words</span> (reverse beg end)
  <span style="color: #9ac8e0;">"Sort words in region alphabetically, in REVERSE if negative.</span>

<span style="color: #9ac8e0;">Prefixed with negative \\[</span><span style="color: #00bcff;">universal-argument</span><span style="color: #9ac8e0;">], sorts in reverse.</span>

<span style="color: #9ac8e0;">The variable `</span><span style="color: #00bcff;">sort-fold-case</span><span style="color: #9ac8e0;">' determines whether alphabetic case</span>
<span style="color: #9ac8e0;">affects the sort order.</span>

<span style="color: #9ac8e0;">See `</span><span style="color: #00bcff;">sort-regexp-fields</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"*P\nr"</span>)
  (sort-regexp-fields reverse <span style="color: #79a8ff;">"\\w+"</span> <span style="color: #79a8ff;">"\\&amp;"</span> beg end))
</pre>
</div>
</div>
</div>

<div id="outline-container-org45aa43b" class="outline-3">
<h3 id="org45aa43b">Surround stuff</h3>
<div class="outline-text-3" id="text-org45aa43b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-surround</span> (begin end open close)
  <span style="color: #9ac8e0;">"Put OPEN at BEGIN and CLOSE at END of the region.</span>
<span style="color: #9ac8e0;">If you omit CLOSE, it will reuse OPEN, unless OPEN is a (,{,&lt;,[,</span>
<span style="color: #9ac8e0;">in which case CLOSE will be the matching pair."</span>
  (<span style="color: #b6a0ff;">interactive</span>  <span style="color: #79a8ff;">"r\nsStart: \nsEnd: "</span>)
  (<span style="color: #b6a0ff;">save-excursion</span>
    (goto-char end)
    (<span style="color: #b6a0ff;">cond</span> ((string= open <span style="color: #79a8ff;">"("</span>) (insert <span style="color: #79a8ff;">")"</span>))
          ((string= open <span style="color: #79a8ff;">"["</span>) (insert <span style="color: #79a8ff;">"]"</span>))
          ((string= open <span style="color: #79a8ff;">"&lt;"</span>) (insert <span style="color: #79a8ff;">"&gt;"</span>))
          ((string= open <span style="color: #79a8ff;">"{"</span>) (insert <span style="color: #79a8ff;">"}"</span>))
          ((string= open <span style="color: #79a8ff;">""</span>) (insert open))
          (t (insert close)))
    (goto-char begin)
    (insert open)))

(global-set-key (kbd <span style="color: #79a8ff;">"M-s M-s"</span>) 'ts-surround)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9a3977" class="outline-3">
<h3 id="orgf9a3977">Untabify a buffer</h3>
<div class="outline-text-3" id="text-orgf9a3977">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-untabify-buffer</span> ()
  <span style="color: #9ac8e0;">"Convert all tabs to spaces in the buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (untabify (point-min) (point-max)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdef6acd" class="outline-3">
<h3 id="orgdef6acd">XML pretty print</h3>
<div class="outline-text-3" id="text-orgdef6acd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-xml-pretty-print</span> ()
  <span style="color: #9ac8e0;">"Reformat and indent XML."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">save-excursion</span>
    (sgml-pretty-print (point-min) (point-max))
    (indent-region (point-min) (point-max))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1f2939f" class="outline-2">
<h2 id="org1f2939f">File Functions</h2>
<div class="outline-text-2" id="text-org1f2939f">
</div>
<div id="outline-container-org29b744b" class="outline-3">
<h3 id="org29b744b">Delete this file</h3>
<div class="outline-text-3" id="text-org29b744b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-delete-this-file</span> ()
  <span style="color: #9ac8e0;">"Delete the current file, and kill the buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">or</span> (buffer-file-name) (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"No file is currently being edited"</span>))
  (<span style="color: #b6a0ff;">when</span> (yes-or-no-p (format <span style="color: #79a8ff;">"Really delete '</span><span style="color: #00bcff;">%s</span><span style="color: #79a8ff;">'?"</span>
                             (file-name-nondirectory buffer-file-name)))
    (delete-file (buffer-file-name) t)
    (kill-this-buffer)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f d"</span>) 'ts-delete-this-file)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7eba187" class="outline-3">
<h3 id="org7eba187">Insert other buffer file name</h3>
<div class="outline-text-3" id="text-org7eba187">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-insert-other-buffer-file-name</span> (arg)
  <span style="color: #9ac8e0;">"Does what it say on the the tin!</span>
<span style="color: #9ac8e0;">With prefix ARG, omit path."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (insert (completing-read
           <span style="color: #79a8ff;">"Select Buffer Filename: "</span>
           (delete nil
                   (mapcar (<span style="color: #b6a0ff;">lambda</span> (buffer)
                             (<span style="color: #b6a0ff;">if</span> (buffer-file-name buffer)
                                 (<span style="color: #b6a0ff;">if</span> arg
                                     (file-name-nondirectory
                                      (buffer-file-name buffer))
                                   (buffer-file-name buffer))))
                           (buffer-list))))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f i"</span>) 'ts-insert-other-buffer-file-name)
</pre>
</div>
</div>
</div>

<div id="outline-container-org32bee21" class="outline-3">
<h3 id="org32bee21">Make backup of current file</h3>
<div class="outline-text-3" id="text-org32bee21">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-make-backup</span> ()
  <span style="color: #9ac8e0;">"Make a backup copy of current file or dired marked files.</span>

<span style="color: #9ac8e0;">If in dired, backup current file or marked files."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> (($fname (buffer-file-name)))
    (<span style="color: #b6a0ff;">if</span> $fname
        (<span style="color: #b6a0ff;">let</span> (($backup-name
               (concat $fname <span style="color: #79a8ff;">"."</span> (format-time-string <span style="color: #79a8ff;">"%y%m%d%H%M"</span>) <span style="color: #79a8ff;">".bak"</span>)))
          (copy-file $fname $backup-name t)
          (message (concat <span style="color: #79a8ff;">"Backup saved at: "</span> $backup-name)))
      (<span style="color: #b6a0ff;">if</span> (string-equal major-mode <span style="color: #79a8ff;">"dired-mode"</span>)
          (<span style="color: #b6a0ff;">progn</span>
            (mapc (<span style="color: #b6a0ff;">lambda</span> ($x)
                    (<span style="color: #b6a0ff;">let</span> (($backup-name
                           (concat $x <span style="color: #79a8ff;">"."</span> (format-time-string <span style="color: #79a8ff;">"%y%m%d%H%M"</span>) <span style="color: #79a8ff;">".bak"</span>)))
                      (copy-file $x $backup-name t)))
                  (dired-get-marked-files))
            (message <span style="color: #79a8ff;">"marked files backed up"</span>))
        (<span style="color: #fec43f;">user-error</span> <span style="color: #79a8ff;">"Buffer not file nor dired"</span>)))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-make-backup-and-save</span> ()
  <span style="color: #9ac8e0;">"Backup of current file and save, or backup dired marked files.</span>
<span style="color: #9ac8e0;">For detail, see `</span><span style="color: #00bcff;">ts-make-backup</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (buffer-file-name)
      (<span style="color: #b6a0ff;">progn</span>
        (ts-make-backup)
        (<span style="color: #b6a0ff;">when</span> (buffer-modified-p)
          (save-buffer)))
    (<span style="color: #b6a0ff;">progn</span>
      (ts-make-backup))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f b"</span>) 'ts-make-backup-and-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbfc1b09" class="outline-3">
<h3 id="orgbfc1b09">Open current file as root</h3>
<div class="outline-text-3" id="text-orgbfc1b09">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-sudoedit</span> (<span style="color: #6ae4b9;">&amp;optional</span> arg)
  <span style="color: #9ac8e0;">"Open current or ARG file as root."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">or</span> arg (not buffer-file-name))
      (find-file (concat <span style="color: #79a8ff;">"/sudo:root@localhost:"</span>
                         (read-file-name <span style="color: #79a8ff;">"Find file (as root): "</span>)))
    (find-alternate-file (concat <span style="color: #79a8ff;">"/sudo:root@localhost:"</span> buffer-file-name))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f s"</span>) 'ts-sudoedit)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb065182" class="outline-3">
<h3 id="orgb065182">Rename file and buffer</h3>
<div class="outline-text-3" id="text-orgb065182">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-rename-this-file-and-buffer</span> (new-name)
  <span style="color: #9ac8e0;">"Renames both current buffer and file it's visiting to NEW-NAME."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"FNew name: "</span>)
  (<span style="color: #b6a0ff;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="color: #b6a0ff;">unless</span> filename
      (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"Buffer '</span><span style="color: #00bcff;">%s</span><span style="color: #79a8ff;">' is not visiting a file!"</span> name))
    (<span style="color: #b6a0ff;">if</span> (get-buffer new-name)
        (message <span style="color: #79a8ff;">"A buffer named '</span><span style="color: #00bcff;">%s</span><span style="color: #79a8ff;">' already exists!"</span> new-name)
      (<span style="color: #b6a0ff;">progn</span>
        (<span style="color: #b6a0ff;">when</span> (file-exists-p filename)
          (rename-file filename new-name 1))
        (rename-buffer new-name)
        (set-visited-file-name new-name)))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f r"</span>) 'ts-rename-this-file-and-buffer)
</pre>
</div>
</div>
</div>

<div id="outline-container-org20da031" class="outline-3">
<h3 id="org20da031">Yank current file contents to kill ring</h3>
<div class="outline-text-3" id="text-org20da031">
<p>
Very useful for copying ssh public keys&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-copy-file-contents-to-clipboard</span> (file)
  <span style="color: #9ac8e0;">"Copy a file's contents to the clipboard."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"f"</span>)
  (<span style="color: #b6a0ff;">with-current-buffer</span> (find-file-noselect file)
    (kill-new (buffer-substring-no-properties (point-min) (point-max))))
  (message <span style="color: #79a8ff;">"Copied contents of %s to the clipboard"</span> file))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f h"</span>) 'ts-copy-file-contents-to-clipboard)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge78901c" class="outline-3">
<h3 id="orge78901c">Yank current file name to kill ring</h3>
<div class="outline-text-3" id="text-orge78901c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-copy-file-name-to-clipboard</span> (arg)
  <span style="color: #9ac8e0;">"Copy the current buffer file name to the clipboard.</span>
<span style="color: #9ac8e0;">With prefix ARG, omit path."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">let</span> ((filename (<span style="color: #b6a0ff;">if</span> (equal major-mode 'dired-mode)
                      (<span style="color: #b6a0ff;">if</span> arg
                          (file-name-nondirectory
                           (directory-file-name
                            (file-name-directory default-directory)))
                        default-directory)
                    (<span style="color: #b6a0ff;">if</span> arg
                        (file-name-nondirectory buffer-file-name)
                      (buffer-file-name)))))
    (<span style="color: #b6a0ff;">when</span> filename
      (kill-new filename)
      (message <span style="color: #79a8ff;">"Copied '</span><span style="color: #00bcff;">%s</span><span style="color: #79a8ff;">' to the clipboard."</span> filename))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c f w"</span>) 'ts-copy-file-name-to-clipboard)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7a7ebba" class="outline-2">
<h2 id="org7a7ebba">Miscellaneous</h2>
<div class="outline-text-2" id="text-org7a7ebba">
</div>
<div id="outline-container-org2e5a158" class="outline-3">
<h3 id="org2e5a158">Byte compile and load on save</h3>
<div class="outline-text-3" id="text-org2e5a158">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-byte-compile-and-load</span> ()
  <span style="color: #9ac8e0;">"Byte compile Emacs Lisp files and load if ARG."</span>
  (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> buffer-file-name
             (equal (file-name-extension buffer-file-name) <span style="color: #79a8ff;">"el"</span>)
             (equal major-mode 'emacs-lisp-mode))
    (byte-compile-file buffer-file-name)
    (message <span style="color: #79a8ff;">"Compiled %s :-)"</span> buffer-file-name)
    (load (file-name-sans-extension buffer-file-name))
    (message <span style="color: #79a8ff;">"Loaded %s :-)"</span> buffer-file-name)))

(add-hook 'after-save-hook 'ts-byte-compile-and-load)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7726703" class="outline-3">
<h3 id="org7726703">Ensure init files are byte compiled</h3>
<div class="outline-text-3" id="text-org7726703">
<p>
This block will byte compile <code>early-init.el</code> and <code>init.el</code> if an existing
<code>.elc</code> file is not up to date with their contents.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-ensure-byte-compiled-init</span> ()
  <span style="color: #9ac8e0;">"Run `</span><span style="color: #00bcff;">byte-recompile-file</span><span style="color: #9ac8e0;">' on config files with '</span><span style="color: #00bcff;">nil</span><span style="color: #9ac8e0;">' FORCE and ARG 0.</span>
<span style="color: #9ac8e0;">This means we don't compile if .elc is up to date but we always</span>
<span style="color: #9ac8e0;">create a new .elc file if it doesn't already exist."</span>
  (autoload 'byte-recompile-file <span style="color: #79a8ff;">"bytecomp"</span>)
  (<span style="color: #b6a0ff;">if</span> (file-readable-p (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory))
      (byte-recompile-file (expand-file-name <span style="color: #79a8ff;">"early-init.el"</span> user-emacs-directory) 'nil 0))
  (byte-recompile-file (expand-file-name <span style="color: #79a8ff;">"init.el"</span> user-emacs-directory) 'nil 0))

(add-hook 'after-init-hook 'ts-ensure-byte-compiled-init)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc9e39e" class="outline-3">
<h3 id="orgfc9e39e">Recompile config</h3>
<div class="outline-text-3" id="text-orgfc9e39e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">ts-files-to-recompile</span> '(<span style="color: #79a8ff;">"early-init.el"</span> <span style="color: #79a8ff;">"init.el"</span>)
  <span style="color: #9ac8e0;">"Files under `</span><span style="color: #00bcff;">user-emacs-directory</span><span style="color: #9ac8e0;">' that we use for configuration."</span>)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-recompile-config</span> ()
  <span style="color: #9ac8e0;">"Recompile everything in Emacs configuration."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (mapc (<span style="color: #b6a0ff;">lambda</span> (file)
          (<span style="color: #b6a0ff;">let</span> ((path (expand-file-name file user-emacs-directory)))
            (<span style="color: #b6a0ff;">when</span> (file-readable-p path)
              (byte-recompile-file path t 0)
              (load (file-name-sans-extension path))
              (message <span style="color: #79a8ff;">"Re-compiled &amp; loaded %s :-)"</span> path))))
        ts-files-to-recompile))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba316a0" class="outline-3">
<h3 id="orgba316a0">Tangle config</h3>
<div class="outline-text-3" id="text-orgba316a0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-tangle-config</span> ()
  <span style="color: #9ac8e0;">"Re-tangle my org mode configuration file."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (autoload 'org-babel-tangle-file <span style="color: #79a8ff;">"ob-tangle"</span>)
  (org-babel-tangle-file <span style="color: #79a8ff;">"~/src/emacs/README.org"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org93d3163" class="outline-3">
<h3 id="org93d3163">Googling</h3>
<div class="outline-text-3" id="text-org93d3163">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-google</span> (arg)
  <span style="color: #9ac8e0;">"Googles a query or region.  With prefix ARG, wrap in quotes."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">let</span> ((query
         (<span style="color: #b6a0ff;">if</span> (region-active-p)
             (buffer-substring (region-beginning) (region-end))
           (read-string <span style="color: #79a8ff;">"Query: "</span>))))
    (<span style="color: #b6a0ff;">when</span> arg (<span style="color: #b6a0ff;">setq</span> query (concat <span style="color: #79a8ff;">"\""</span> query <span style="color: #79a8ff;">"\""</span>)))
    (browse-url
     (concat <span style="color: #79a8ff;">"http://www.google.com/search?ie=utf-8&amp;oe=utf-8&amp;q="</span> query))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-s"</span>) 'ts-google)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgccc03fd" class="outline-2">
<h2 id="orgccc03fd">Window Functions</h2>
<div class="outline-text-2" id="text-orgccc03fd">
</div>
<div id="outline-container-org0364169" class="outline-3">
<h3 id="org0364169">Better scrolling of other windows</h3>
<div class="outline-text-3" id="text-org0364169">
<p>
This is better, since I don't need to send prefix to <code>scroll-other-window</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-scroll-other-window</span> (arg)
  <span style="color: #9ac8e0;">"Scroll up other window when called with prefix."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">if</span> arg (scroll-other-window-down) (scroll-other-window)))

(global-set-key [remap scroll-other-window] 'ts-scroll-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org954425b" class="outline-3">
<h3 id="org954425b">Kill buffer other window</h3>
<div class="outline-text-3" id="text-org954425b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-buffer-other-window</span> ()
  <span style="color: #9ac8e0;">"Kill the buffer in the last used window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  <span style="color: #989898;">;; </span><span style="color: #989898;">Window selection is used because point goes to a different window if more</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">than 2 windows are present</span>
  (<span style="color: #b6a0ff;">let</span> ((current-window (selected-window))
        (other-window (get-mru-window t t t)))
    (select-window other-window)
    (kill-this-buffer)
    (select-window current-window)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c w k"</span>) 'ts-kill-buffer-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc43d938" class="outline-3">
<h3 id="orgc43d938">Open a buffer in another window</h3>
<div class="outline-text-3" id="text-orgc43d938">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-display-buffer-in-previous-window</span> (buffer)
  <span style="color: #9ac8e0;">"Display BUFFER in other window without switching to it."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"BDisplay buffer in other window: "</span>)
  (display-buffer buffer 'display-buffer-in-previous-window))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c w o"</span>) 'ts-display-buffer-in-previous-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a6820c" class="outline-3">
<h3 id="org7a6820c">Split window right to last buffer</h3>
<div class="outline-text-3" id="text-org7a6820c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-split-window-right</span> (prefix)
  <span style="color: #9ac8e0;">"Split the window vertically and display the previous buffer.</span>
<span style="color: #9ac8e0;">With PREFIX stay in current buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (split-window-right)
  (other-window 1)
  (<span style="color: #b6a0ff;">if</span> (= prefix 1)
      (switch-to-next-buffer)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c 3"</span>) 'ts-split-window-right)
</pre>
</div>
</div>
</div>

<div id="outline-container-org48d2ffc" class="outline-3">
<h3 id="org48d2ffc">Split window below to last buffer</h3>
<div class="outline-text-3" id="text-org48d2ffc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-split-window-below</span> (prefix)
  <span style="color: #9ac8e0;">"Split the window horizontally and display the previous buffer.</span>
<span style="color: #9ac8e0;">With PREFIX stay in current buffer."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"p"</span>)
  (split-window-below)
  (other-window 1)
  (<span style="color: #b6a0ff;">if</span> (= prefix 1)
      (switch-to-next-buffer)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c 2"</span>) 'ts-split-window-below)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f44184" class="outline-3">
<h3 id="org7f44184">Switch to the previous window</h3>
<div class="outline-text-3" id="text-org7f44184">
<p>
This is basically <code>other-window</code> backwards.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-prev-window</span> ()
  <span style="color: #9ac8e0;">"Go the previously used window, excluding other frames."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (other-window -1))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x O"</span>) 'ts-prev-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e6899c" class="outline-3">
<h3 id="org7e6899c">Toggle focus to last window</h3>
<div class="outline-text-3" id="text-org7e6899c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-last-window</span> ()
  <span style="color: #9ac8e0;">"Switch back and forth between two windows easily."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((win (get-mru-window t t t)))
    (<span style="color: #b6a0ff;">unless</span> win (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"Last window not found"</span>))
    (<span style="color: #b6a0ff;">let</span> ((frame (window-frame win)))
      (raise-frame frame)
      (select-frame frame)
      (select-window win))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c w w"</span>) 'ts-last-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org29f2fd0" class="outline-3">
<h3 id="org29f2fd0">Toggle maximize window</h3>
<div class="outline-text-3" id="text-org29f2fd0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-toggle-maximize-window</span> ()
  <span style="color: #9ac8e0;">"Temporarily maximize a window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (= 1 (length (window-list)))
      (jump-to-register '_)
    (<span style="color: #b6a0ff;">progn</span>
      (window-configuration-to-register '_)
      (delete-other-windows))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c z"</span>) 'ts-toggle-maximize-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c45878" class="outline-3">
<h3 id="org2c45878">Toggle vertical -&gt; horizontal splits</h3>
<div class="outline-text-3" id="text-org2c45878">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-toggle-split</span> ()
  <span style="color: #9ac8e0;">"Switch window split from horizontally to vertically.</span>
<span style="color: #9ac8e0;">Or vice versa. Change right window to bottom, or change bottom</span>
<span style="color: #9ac8e0;">window to right."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (autoload 'windmove-find-other-window <span style="color: #79a8ff;">"windmove"</span> nil t)
  (<span style="color: #b6a0ff;">let</span> ((done))
    (<span style="color: #b6a0ff;">dolist</span> (dirs '((right . down) (down . right)))
      (<span style="color: #b6a0ff;">unless</span> done
        (<span style="color: #b6a0ff;">let*</span> ((win (selected-window))
               (nextdir (car dirs))
               (neighbour-dir (cdr dirs))
               (next-win (windmove-find-other-window nextdir win))
               (neighbour1 (windmove-find-other-window neighbour-dir win))
               (neighbour2 (<span style="color: #b6a0ff;">if</span> next-win
                               (<span style="color: #b6a0ff;">with-selected-window</span> next-win
                                 (windmove-find-other-window
                                  neighbour-dir next-win)))))
          (<span style="color: #b6a0ff;">setq</span> done (<span style="color: #b6a0ff;">and</span> (eq neighbour1 neighbour2)
                          (not (eq (minibuffer-window) next-win))))
          (<span style="color: #b6a0ff;">if</span> done
              (<span style="color: #b6a0ff;">let*</span> ((other-buf (window-buffer next-win)))
                (delete-window next-win)
                (<span style="color: #b6a0ff;">if</span> (eq nextdir 'right)
                    (split-window-vertically)
                  (split-window-horizontally))
                (set-window-buffer
                 (windmove-find-other-window neighbour-dir)
                 other-buf))))))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c w s"</span>) 'ts-toggle-split)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6a7dd16" class="outline-2">
<h2 id="org6a7dd16">Emacs Packages</h2>
<div class="outline-text-2" id="text-org6a7dd16">
</div>
<div id="outline-container-org7b858e5" class="outline-3">
<h3 id="org7b858e5">Ansi Color</h3>
<div class="outline-text-3" id="text-org7b858e5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'comint-output-filter-functions 'ansi-color-process-output)
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">colorize-compilation-buffer</span> ()
  <span style="color: #9ac8e0;">"ANSI color in compilation buffer."</span>
  (ansi-color-apply-on-region compilation-filter-start (point)))
(add-hook 'compilation-filter-hook 'colorize-compilation-buffer)
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-display-ansi-colors</span> ()
  (<span style="color: #b6a0ff;">interactive</span>)
  (ansi-color-apply-on-region (point-min) (point-max)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org305f9cb" class="outline-3">
<h3 id="org305f9cb">Auto-fill</h3>
<div class="outline-text-3" id="text-org305f9cb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-fill-or-unfill</span> ()
  <span style="color: #9ac8e0;">"Like `</span><span style="color: #00bcff;">fill-paragraph</span><span style="color: #9ac8e0;">', but unfill if used twice."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((fill-column
         (<span style="color: #b6a0ff;">if</span> (eq last-command 'ts-fill-or-unfill)
             (<span style="color: #b6a0ff;">progn</span> (<span style="color: #b6a0ff;">setq</span> this-command nil)
                    (point-max))
           fill-column)))
    (call-interactively #'fill-paragraph)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-unfill-region</span> (beg end)
  <span style="color: #9ac8e0;">"Unfill the region from BEG to END.</span>
<span style="color: #9ac8e0;">Joining text paragraphs into a single logical line. This is</span>
<span style="color: #9ac8e0;">useful, e.g., for use with function `</span><span style="color: #00bcff;">visual-line-mode</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"*r"</span>)
  (<span style="color: #b6a0ff;">let</span> ((fill-column (point-max)))
    (fill-region beg end)))

(global-set-key [remap fill-paragraph] 'ts-fill-or-unfill)
(global-set-key (kbd <span style="color: #79a8ff;">"C-M-q"</span>) 'ts-unfill-region)

(<span style="color: #b6a0ff;">setq-default</span> fill-column 79)
(add-hook 'org-mode-hook 'auto-fill-mode)
(add-hook 'text-mode-hook 'auto-fill-mode)

(global-set-key (kbd <span style="color: #79a8ff;">"C-c M-t a"</span>) 'toggle-text-mode-autofill)
</pre>
</div>
</div>
</div>

<div id="outline-container-org72fbf30" class="outline-3">
<h3 id="org72fbf30">Auto-revert</h3>
<div class="outline-text-3" id="text-org72fbf30">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-auto-revert-mode) <span style="color: #989898;">;; </span><span style="color: #989898;">reload if file changed on disk</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5f4f0e" class="outline-3">
<h3 id="orge5f4f0e">Battery</h3>
<div class="outline-text-3" id="text-orge5f4f0e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'battery
  (<span style="color: #b6a0ff;">setq</span> battery-mode-line-format <span style="color: #79a8ff;">" [%b%p%%]"</span>)
  (<span style="color: #b6a0ff;">setq</span> battery-mode-line-limit 95)
  (<span style="color: #b6a0ff;">setq</span> battery-update-interval 180)
  (<span style="color: #b6a0ff;">setq</span> battery-load-low 20)
  (<span style="color: #b6a0ff;">setq</span> battery-load-critical 10))

(add-hook 'after-init-hook 'display-battery-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org56947f0" class="outline-3">
<h3 id="org56947f0">Column Number</h3>
<div class="outline-text-3" id="text-org56947f0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'column-number-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org38aa103" class="outline-3">
<h3 id="org38aa103">Dabbrev</h3>
<div class="outline-text-3" id="text-org38aa103">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dabbrev
  (<span style="color: #b6a0ff;">setq</span> abbrev-file-name (concat user-emacs-directory <span style="color: #79a8ff;">"abbrevs"</span>))
  (<span style="color: #b6a0ff;">setq</span> save-abbrevs 'silently)
  (<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
    (<span style="color: #b6a0ff;">setq</span> abbrev-suggest t))
  (<span style="color: #b6a0ff;">setq</span> dabbrev-abbrev-char-regexp <span style="color: #79a8ff;">"\\sw</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">\\s_"</span>)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-abbrev-skip-leading-regexp <span style="color: #79a8ff;">"[$*/=']"</span>)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-backward-only nil)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-distinction 'case-replace)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-fold-search t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-case-replace 'case-replace)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-check-other-buffers t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-eliminate-newlines t)
  (<span style="color: #b6a0ff;">setq</span> dabbrev-upcase-means-case-search t)
  (message <span style="color: #79a8ff;">"Lazy loaded dabbrev :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org98f3334" class="outline-3">
<h3 id="org98f3334">Dired</h3>
<div class="outline-text-3" id="text-org98f3334">
</div>
<div id="outline-container-orgd1b981e" class="outline-4">
<h4 id="orgd1b981e">Dired Extras</h4>
<div class="outline-text-4" id="text-orgd1b981e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-dired-get-size</span> ()
    <span style="color: #9ac8e0;">"Get cumlative size of marked or current item."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (<span style="color: #b6a0ff;">let</span> ((files (dired-get-marked-files)))
      (<span style="color: #b6a0ff;">with-temp-buffer</span>
        (apply 'call-process <span style="color: #79a8ff;">"/usr/bin/du"</span> nil t nil <span style="color: #79a8ff;">"-sch"</span> files)
        (message <span style="color: #79a8ff;">"Size of all marked files: %s"</span>
                 (<span style="color: #b6a0ff;">progn</span>
                   (re-search-backward <span style="color: #79a8ff;">"</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">(</span><span style="color: #79a8ff;">^[0-9.,]+[A-Za-z]+</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">)</span><span style="color: #79a8ff;">.*total$"</span>)
                   (match-string 1))))))

  (define-key dired-mode-map <span style="color: #79a8ff;">"?"</span> 'ts-dired-get-size)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-dired-beginning-of-buffer</span> ()
    <span style="color: #9ac8e0;">"Go to first file in directory."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (goto-char (point-min))
    (dired-next-line 2))

  (define-key dired-mode-map [remap beginning-of-buffer] 'ts-dired-beginning-of-buffer)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-dired-end-of-buffer</span> ()
    <span style="color: #9ac8e0;">"Go to last file in directory."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (goto-char (point-max))
    (dired-next-line -1))

  (define-key dired-mode-map [remap end-of-buffer] 'ts-dired-end-of-buffer)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-dired-up-directory</span> ()
    (<span style="color: #b6a0ff;">interactive</span>)
    (find-alternate-file <span style="color: #79a8ff;">".."</span>))

  (define-key dired-mode-map <span style="color: #79a8ff;">"b"</span> 'ts-dired-up-directory))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a75a6f" class="outline-4">
<h4 id="org5a75a6f">Dired Omit</h4>
<div class="outline-text-4" id="text-org5a75a6f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
  (autoload 'dired-omit-mode <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (autoload 'dired-omit-files <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (<span style="color: #b6a0ff;">setq</span> dired-omit-files <span style="color: #79a8ff;">"\\`[.]?#</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">\\`[.][.]?\\'</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">^\\..+$"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7585958" class="outline-4">
<h4 id="org7585958">Dired Listing Switches</h4>
<div class="outline-text-4" id="text-org7585958">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
  (<span style="color: #b6a0ff;">when</span> (eq system-type 'darwin) (<span style="color: #b6a0ff;">setq</span> dired-listing-switches <span style="color: #79a8ff;">"-alh"</span>))
  (<span style="color: #b6a0ff;">when</span> (eq system-type 'berkeley-unix) (<span style="color: #b6a0ff;">setq</span> dired-listing-switches <span style="color: #79a8ff;">"-alhpL"</span>))
  (<span style="color: #b6a0ff;">when</span> (eq system-type 'gnu/linux)
    (<span style="color: #b6a0ff;">setq</span> dired-listing-switches
          <span style="color: #79a8ff;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org67a3216" class="outline-4">
<h4 id="org67a3216">Dired Settings</h4>
<div class="outline-text-4" id="text-org67a3216">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
  (<span style="color: #b6a0ff;">setq</span> dired-dwim-target t
        delete-by-moving-to-trash t
        dired-use-ls-dired nil
        dired-recursive-copies 'always
        dired-recursive-deletes 'always))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0850949" class="outline-4">
<h4 id="org0850949">Dired Keybindings</h4>
<div class="outline-text-4" id="text-org0850949">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired
  (define-key dired-mode-map <span style="color: #79a8ff;">"f"</span> 'dired-find-alternate-file)
  (define-key dired-mode-map <span style="color: #79a8ff;">"c"</span> 'dired-do-compress-to)
  (define-key dired-mode-map <span style="color: #79a8ff;">")"</span> 'dired-omit-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9740207" class="outline-4">
<h4 id="org9740207">Dired AUX</h4>
<div class="outline-text-4" id="text-org9740207">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'dired-aux
  (<span style="color: #b6a0ff;">setq</span> dired-isearch-filenames 'dwim)
  <span style="color: #989898;">;; </span><span style="color: #989898;">The following variables were introduced in Emacs 27.1</span>
  (<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27.1"</span>)
    (<span style="color: #b6a0ff;">setq</span> dired-create-destination-dirs 'ask)
    (<span style="color: #b6a0ff;">setq</span> dired-vc-rename-file t))
  (message <span style="color: #79a8ff;">"Lazy loaded dired-aux :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfad92cf" class="outline-4">
<h4 id="orgfad92cf">Dired-X Jump (Emacs&lt;28)</h4>
<div class="outline-text-4" id="text-orgfad92cf">
<p>
Has to come outside of with-eval-after-load otherwise we have no dired-jump.
</p>

<p>
This is in <code>dired</code> not <code>dired-jump</code> in Emacs 28, which means we no longer have
to autoload these and bind the default keys prior to <code>dired</code> being loaded.
</p>

<p>
The default keys are <code>C-x C-j</code> and <code>C-x 4 C-j</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">This is in `</span><span style="color: #00bcff;">dired</span><span style="color: #989898;">' not `</span><span style="color: #00bcff;">dired-jump</span><span style="color: #989898;">' in Emacs 28</span>
(<span style="color: #b6a0ff;">when</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
  (autoload 'dired-jump <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x C-j"</span>) 'dired-jump)
  (autoload 'dired-jump-other-window <span style="color: #79a8ff;">"dired-x"</span> nil t)
  (define-key ctl-x-4-map <span style="color: #79a8ff;">"C-j"</span> 'dired-jump-other-window))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1dd345" class="outline-4">
<h4 id="orgc1dd345">Find Dired</h4>
<div class="outline-text-4" id="text-orgc1dd345">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'find-dired
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq find-ls-option '("-print0 | xargs -0 ls -ld" . "-ld"))</span>
  (<span style="color: #b6a0ff;">setq</span> find-ls-option
        '(<span style="color: #79a8ff;">"-ls"</span> . <span style="color: #79a8ff;">"-AGFhlv --group-directories-first --time-style=long-iso"</span>))
  (<span style="color: #b6a0ff;">setq</span> find-name-arg <span style="color: #79a8ff;">"-iname"</span>)
  (message <span style="color: #79a8ff;">"Lazy loaded find-dired :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdfdee63" class="outline-4">
<h4 id="orgdfdee63">Windows Find</h4>
<div class="outline-text-4" id="text-orgdfdee63">
<p>
First install GnuWin32 binaries from <a href="http://gnuwin32.sourceforge.net/packages.html">here</a>.
</p>

<p>
Or if you want all the GNU tools on your Windows box - use <a href="https://sourceforge.net/projects/getgnuwin32/files/getgnuwin32/">this</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> find-program <span style="color: #79a8ff;">"C:/Program Files (x86)/GnuWin32/bin/find.exe"</span>)
(<span style="color: #b6a0ff;">setq</span> grep-program <span style="color: #79a8ff;">"C:/Program Files (x86)/GnuWin32/bin/grep.exe"</span>)
(<span style="color: #b6a0ff;">setq</span> xargs-program <span style="color: #79a8ff;">"C:/Program Files (x86)/GnuWin32/bin/xargs.exe"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc62aa12" class="outline-4">
<h4 id="orgc62aa12">Writeable Dired</h4>
<div class="outline-text-4" id="text-orgc62aa12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'wdired
  (<span style="color: #b6a0ff;">setq</span> wdired-allow-to-change-permissions t)
  (<span style="color: #b6a0ff;">setq</span> wdired-create-parent-directories t)
  (message <span style="color: #79a8ff;">"Lazy loaded wdired :-)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8a261a4" class="outline-3">
<h3 id="org8a261a4">Doc View</h3>
<div class="outline-text-3" id="text-org8a261a4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'doc-view-mode
  (<span style="color: #b6a0ff;">setq</span> doc-view-continuous t)
  (<span style="color: #b6a0ff;">setq</span> doc-view-resolution 300)
  (message <span style="color: #79a8ff;">"Lazy loaded doc-view-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5158610" class="outline-3">
<h3 id="org5158610">Ediff</h3>
<div class="outline-text-3" id="text-org5158610">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'ediff
  (<span style="color: #b6a0ff;">setq</span> ediff-diff-options <span style="color: #79a8ff;">"-w"</span>)
  (<span style="color: #b6a0ff;">setq</span> ediff-keep-variants nil)
  (<span style="color: #b6a0ff;">setq</span> ediff-make-buffers-readonly-at-startup nil)
  (<span style="color: #b6a0ff;">setq</span> ediff-merge-revisions-with-ancestor t)
  (<span style="color: #b6a0ff;">setq</span> ediff-show-clashes-only t)
  (<span style="color: #b6a0ff;">setq</span> ediff-split-window-function 'split-window-horizontally)
  (<span style="color: #b6a0ff;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)
  (add-hook 'ediff-after-quit-hook-internal 'winner-undo)

  <span style="color: #989898;">;; </span><span style="color: #989898;">https://emacs.stackexchange.com/a/24602</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">disable-y-or-n-p</span> (orig-fun <span style="color: #6ae4b9;">&amp;rest</span> args)
    <span style="color: #9ac8e0;">"Advise ORIG-FUN with ARGS so it dynamically rebinds `</span><span style="color: #00bcff;">y-or-n-p</span><span style="color: #9ac8e0;">'."</span>
    (<span style="color: #b6a0ff;">cl-letf</span> (((symbol-function 'y-or-n-p) (<span style="color: #b6a0ff;">lambda</span> () t)))
      (apply orig-fun args)))

  (advice-add 'ediff-quit <span style="color: #f78fe7;">:around</span> #'disable-y-or-n-p)
  (message <span style="color: #79a8ff;">"Lazy loaded ediff :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7594688" class="outline-3">
<h3 id="org7594688">Eldoc</h3>
<div class="outline-text-3" id="text-org7594688">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'emacs-lisp-mode-hook 'eldoc-mode)
(add-hook 'lisp-interaction-mode-hook 'eldoc-mode)
(add-hook 'lisp-mode-hook 'eldoc-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a330f0" class="outline-3">
<h3 id="org8a330f0">Electric</h3>
<div class="outline-text-3" id="text-org8a330f0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'electric-indent-mode)
<span style="color: #989898;">;; </span><span style="color: #989898;">(add-hook 'text-mode-hook 'electric-quote-mode)</span>
(add-hook 'after-init-hook 'electric-pair-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1fd6a98" class="outline-3">
<h3 id="org1fd6a98">ERC</h3>
<div class="outline-text-3" id="text-org1fd6a98">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'erc
  (<span style="color: #b6a0ff;">setq</span> erc-autojoin-channels-alist '((<span style="color: #79a8ff;">"freenode.net"</span> <span style="color: #79a8ff;">"#emacs"</span>)))
  (<span style="color: #b6a0ff;">setq</span> erc-fill-column 80)
  (<span style="color: #b6a0ff;">setq</span> erc-hide-list '(<span style="color: #79a8ff;">"JOIN"</span> <span style="color: #79a8ff;">"PART"</span> <span style="color: #79a8ff;">"QUIT"</span>))
  (<span style="color: #b6a0ff;">setq</span> erc-input-line-position -2)
  (<span style="color: #b6a0ff;">setq</span> erc-keywords '(<span style="color: #79a8ff;">"knowayback"</span>))
  (<span style="color: #b6a0ff;">setq</span> erc-nick <span style="color: #79a8ff;">"knowayback"</span>)
  (<span style="color: #b6a0ff;">setq</span> erc-prompt-for-password t)
  (<span style="color: #b6a0ff;">setq</span> erc-track-enable-keybindings t)
  (message <span style="color: #79a8ff;">"Lazy loaded erc :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ec7f9d" class="outline-3">
<h3 id="org8ec7f9d">Eshell</h3>
<div class="outline-text-3" id="text-org8ec7f9d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'eshell
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-eshell-complete-recent-dir</span> (<span style="color: #6ae4b9;">&amp;optional</span> arg)
    <span style="color: #9ac8e0;">"Switch to a recent `</span><span style="color: #00bcff;">eshell</span><span style="color: #9ac8e0;">' directory using completion.</span>
<span style="color: #9ac8e0;">With \\[</span><span style="color: #00bcff;">universal-argument</span><span style="color: #9ac8e0;">] also open the directory in a `</span><span style="color: #00bcff;">dired</span><span style="color: #9ac8e0;">'</span>
<span style="color: #9ac8e0;">buffer."</span>
    (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
    (<span style="color: #b6a0ff;">let*</span> ((dirs (ring-elements eshell-last-dir-ring))
           (dir (completing-read <span style="color: #79a8ff;">"Switch to recent dir: "</span> dirs nil t)))
      (insert dir)
      (eshell-send-input)
      (<span style="color: #b6a0ff;">when</span> arg
        (dired dir))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-eshell-complete-history</span> ()
    <span style="color: #9ac8e0;">"Insert element from `</span><span style="color: #00bcff;">eshell</span><span style="color: #9ac8e0;">' history using completion."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (<span style="color: #b6a0ff;">let</span> ((hist (ring-elements eshell-history-ring)))
      (insert
       (completing-read <span style="color: #79a8ff;">"Input history: "</span> hist nil t))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-eshell-prompt</span> ()
    <span style="color: #9ac8e0;">"Custom eshell prompt."</span>
    (concat
     (propertize (user-login-name) 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"green"</span> ))
     (propertize <span style="color: #79a8ff;">"@"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>))
     (propertize (system-name) `face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"green"</span>))
     (propertize <span style="color: #79a8ff;">":"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>))
     (<span style="color: #b6a0ff;">if</span> (string= (eshell/pwd) (getenv <span style="color: #79a8ff;">"HOME"</span>))
         (propertize <span style="color: #79a8ff;">"~"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"magenta"</span>))
       (propertize (eshell/basename (eshell/pwd)) 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"magenta"</span>)))
     <span style="color: #79a8ff;">"\n"</span>
     (<span style="color: #b6a0ff;">if</span> (= (user-uid) 0)
         (propertize <span style="color: #79a8ff;">"#"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"red"</span>))
       (propertize <span style="color: #79a8ff;">"$"</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"yellow"</span>)))
     (propertize <span style="color: #79a8ff;">" "</span> 'face `(<span style="color: #f78fe7;">:foreground</span> <span style="color: #79a8ff;">"white"</span>))))

  <span style="color: #989898;">;; </span><span style="color: #989898;">https://www.emacswiki.org/emacs/EshellPrompt</span>
  (<span style="color: #b6a0ff;">setq</span> eshell-cd-on-directory t
        eshell-destroy-buffer-when-process-dies t
        eshell-highlight-prompt nil
        eshell-hist-ignoredups t
        eshell-history-size 4096
        eshell-ls-use-colors t
        eshell-prefer-lisp-functions t
        eshell-prefer-lisp-variables t
        eshell-prompt-regexp <span style="color: #79a8ff;">"^[</span><span style="color: #ff5f59; font-weight: bold;">^</span><span style="color: #79a8ff;">#$\n]*[#$] "</span>
        eshell-prompt-function 'ts-eshell-prompt
        eshell-review-quick-commands nil
        eshell-save-history-on-exit t
        eshell-smart-space-goes-to-end t
        eshell-where-to-jump 'begin)

  (add-to-list 'eshell-modules-list 'eshell-tramp) <span style="color: #989898;">;; </span><span style="color: #989898;">no sudo password with ~/.authinfo</span>
  (add-hook 'eshell-preoutput-filter-functions 'ansi-color-apply)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-eshell-keys</span>()
    (define-key eshell-mode-map (kbd <span style="color: #79a8ff;">"M-r"</span>) 'ts-eshell-complete-history)
    (define-key eshell-mode-map (kbd <span style="color: #79a8ff;">"C-="</span>) 'ts-eshell-complete-recent-dir))

  (add-hook 'eshell-mode-hook 'ts-eshell-keys)
  (message <span style="color: #79a8ff;">"Lazy loaded eshell :-)"</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-eshell-other-window</span> ()
  <span style="color: #9ac8e0;">"Open an `</span><span style="color: #00bcff;">eshell</span><span style="color: #9ac8e0;">' in another window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (eshell))

(autoload 'eshell <span style="color: #79a8ff;">"eshell"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c e"</span>) 'eshell)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 e"</span>) 'ts-eshell-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgece5e1b" class="outline-3">
<h3 id="orgece5e1b">Flymake</h3>
<div class="outline-text-3" id="text-orgece5e1b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'prog-mode-hook 'flymake-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0358a8a" class="outline-3">
<h3 id="org0358a8a">Flyspell</h3>
<div class="outline-text-3" id="text-org0358a8a">
<p>
Don't bother using this on Windows as I can rather be bothered to install
<a href="http://aspell.net/win32/">Aspell</a> for Windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (eq system-type 'windows-nt)
  (add-hook 'text-mode-hook 'flyspell-mode)
  (add-hook 'org-mode-hook 'flyspell-mode)
  (add-hook 'prog-mode-hook 'flyspell-prog-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc692f88" class="outline-3">
<h3 id="orgc692f88">Gnus</h3>
<div class="outline-text-3" id="text-orgc692f88">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'gnus
  (<span style="color: #b6a0ff;">setq</span> gnus-init-file <span style="color: #79a8ff;">"~/.emacs.d/init.el"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-home-directory <span style="color: #79a8ff;">"~/.emacs.d/"</span>)
  (<span style="color: #b6a0ff;">setq</span> message-directory <span style="color: #79a8ff;">"~/.emacs.d/mail"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-directory <span style="color: #79a8ff;">"~/.emacs.d/news"</span>)
  (<span style="color: #b6a0ff;">setq</span> nnfolder-directory <span style="color: #79a8ff;">"~/.emacs.d/mail/archive"</span>)
  (<span style="color: #b6a0ff;">setq</span> gnus-use-full-window nil)
  (<span style="color: #b6a0ff;">setq</span> gnus-select-method '(nntp <span style="color: #79a8ff;">"news.gwene.org"</span>))
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq gnus-secondary-select-methods '((nntp "news.gnus.org")))</span>
  (<span style="color: #b6a0ff;">setq</span> gnus-summary-thread-gathering-function 'gnus-gather-threads-by-subject)
  (<span style="color: #b6a0ff;">setq</span> gnus-thread-hide-subtree t)
  (<span style="color: #b6a0ff;">setq</span> gnus-thread-ignore-subject t)
  (message <span style="color: #79a8ff;">"Lazy loaded gnus :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9abdec" class="outline-3">
<h3 id="orgb9abdec">Hide/Show</h3>
<div class="outline-text-3" id="text-orgb9abdec">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'shell-script-mode-hook 'hs-minor-mode)
(add-hook 'prog-mode-hook 'hs-minor-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org45dae98" class="outline-3">
<h3 id="org45dae98">Highlight changes</h3>
<div class="outline-text-3" id="text-org45dae98">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> highlight-changes-visibility-initial-state nil)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c n"</span>) 'highlight-changes-next-change)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c p"</span>) 'highlight-changes-previous-change)
(add-hook 'emacs-startup-hook 'global-highlight-changes-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2fd8625" class="outline-3">
<h3 id="org2fd8625">Highlight line</h3>
<div class="outline-text-3" id="text-org2fd8625">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'dired-mode-hook 'hl-line-mode)
(add-hook 'org-mode-hook 'hl-line-mode)
(add-hook 'prog-mode-hook 'hl-line-mode)
(add-hook 'shell-script-mode-hook 'hl-line-mode)
(add-hook 'text-mode-hook 'hl-line-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda1329a" class="outline-3">
<h3 id="orgda1329a">Hippie Expand</h3>
<div class="outline-text-3" id="text-orgda1329a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-hippie-expand-completions</span> (<span style="color: #6ae4b9;">&amp;optional</span> hippie-expand-function)
  <span style="color: #9ac8e0;">"Return the full list of completions generated by HIPPIE-EXPAND-FUNCTION.</span>
<span style="color: #9ac8e0;">The optional argument can be generated with `</span><span style="color: #00bcff;">make-hippie-expand-function</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">let</span> ((this-command 'ts-hippie-expand-completions)
        (last-command last-command)
        (buffer-modified (buffer-modified-p))
        (hippie-expand-function (<span style="color: #b6a0ff;">or</span> hippie-expand-function 'hippie-expand)))
    (<span style="color: #b6a0ff;">cl-flet</span> ((ding)) <span style="color: #989898;">; </span><span style="color: #989898;">avoid the (ding) when hippie-expand exhausts its options.</span>
      (<span style="color: #b6a0ff;">while</span> (<span style="color: #b6a0ff;">progn</span>
               (funcall hippie-expand-function nil)
               (<span style="color: #b6a0ff;">setq</span> last-command 'ts-hippie-expand-completions)
               (not (equal he-num -1)))))
    <span style="color: #989898;">;; </span><span style="color: #989898;">Evaluating the completions modifies the buffer, however we will finish</span>
    <span style="color: #989898;">;; </span><span style="color: #989898;">up in the same state that we began.</span>
    (set-buffer-modified-p buffer-modified)
    <span style="color: #989898;">;; </span><span style="color: #989898;">Provide the options in the order in which they are normally generated.</span>
    (delete he-search-string (reverse he-tried-table))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-hippie-complete-with</span> (hippie-expand-function)
  <span style="color: #9ac8e0;">"Offer `</span><span style="color: #00bcff;">completing-read</span><span style="color: #9ac8e0;">' using the specified HIPPIE-EXPAND-FUNCTION."</span>
  (<span style="color: #b6a0ff;">let*</span> ((options (ts-hippie-expand-completions hippie-expand-function))
         (selection (<span style="color: #b6a0ff;">and</span> options (completing-read <span style="color: #79a8ff;">"Completions: "</span> options))))
    (<span style="color: #b6a0ff;">if</span> selection
        (he-substitute-string selection t)
      (message <span style="color: #79a8ff;">"No expansion found"</span>))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-hippie-expand-completing-read</span> ()
  <span style="color: #9ac8e0;">"Offer `</span><span style="color: #00bcff;">completing-read</span><span style="color: #9ac8e0;">' for the word at point."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (ts-hippie-complete-with 'hippie-expand))

(global-set-key (kbd <span style="color: #79a8ff;">"M-/"</span>) 'hippie-expand)
(global-set-key (kbd <span style="color: #79a8ff;">"C-M-/"</span>) 'ts-hippie-expand-completing-read)
</pre>
</div>
</div>
</div>

<div id="outline-container-org936f86b" class="outline-3">
<h3 id="org936f86b">Imenu</h3>
<div class="outline-text-3" id="text-org936f86b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'imenu
  (<span style="color: #b6a0ff;">setq</span> imenu-auto-rescan t)
  (<span style="color: #b6a0ff;">setq</span> imenu-auto-rescan-maxout 600000)
  (<span style="color: #b6a0ff;">setq</span> imenu-eager-completion-buffer t)
  (<span style="color: #b6a0ff;">setq</span> imenu-level-separator <span style="color: #79a8ff;">"/"</span>)
  (<span style="color: #b6a0ff;">setq</span> imenu-max-item-length 100)
  (<span style="color: #b6a0ff;">setq</span> imenu-space-replacement <span style="color: #79a8ff;">" "</span>)
  (<span style="color: #b6a0ff;">setq</span> imenu-use-markers t)
  (<span style="color: #b6a0ff;">setq</span> imenu-use-popup-menu nil)
  (message <span style="color: #79a8ff;">"Lazy loaded imenu :-)"</span>))

(autoload 'imenu <span style="color: #79a8ff;">"imenu"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c i"</span>) 'imenu)
</pre>
</div>
</div>
</div>

<div id="outline-container-org52f840e" class="outline-3">
<h3 id="org52f840e">Isearch</h3>
<div class="outline-text-3" id="text-org52f840e">
</div>
<div id="outline-container-org9dc0162" class="outline-4">
<h4 id="org9dc0162">Isearch exit</h4>
<div class="outline-text-4" id="text-org9dc0162">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-isearch-exit</span> ()
  <span style="color: #9ac8e0;">"Move point to the start of the matched string."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">when</span> (eq isearch-forward t)
    (goto-char isearch-other-end))
  (isearch-exit))

(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"RET"</span>) 'ts-isearch-exit)
</pre>
</div>
</div>
</div>

<div id="outline-container-org15ab349" class="outline-4">
<h4 id="org15ab349">Copy to isearch</h4>
<div class="outline-text-4" id="text-org15ab349">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-copy-to-isearch</span> ()
  <span style="color: #9ac8e0;">"Copy up to the search match when searching forward.</span>

<span style="color: #9ac8e0;">When searching backward, copy to the start of the search match."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (ts-isearch-exit)
  (call-interactively 'kill-ring-save)
  (exchange-point-and-mark))

(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"M-w"</span>) 'ts-copy-to-isearch)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d89d5f" class="outline-4">
<h4 id="org6d89d5f">Kill to isearch</h4>
<div class="outline-text-4" id="text-org6d89d5f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-kill-to-isearch</span> ()
  <span style="color: #9ac8e0;">"Kill up to the search match when searching forward.</span>

<span style="color: #9ac8e0;">When searching backward, kill to the beginning of the match."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (ts-isearch-exit)
  (call-interactively 'kill-region))

(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"C-k"</span>) 'ts-kill-to-isearch)
</pre>
</div>
</div>
</div>

<div id="outline-container-org528dd49" class="outline-4">
<h4 id="org528dd49">Isearch Abort DWIM</h4>
<div class="outline-text-4" id="text-org528dd49">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-isearch-abort-dwim</span> ()
  <span style="color: #9ac8e0;">"Delete failed `</span><span style="color: #00bcff;">isearch</span><span style="color: #9ac8e0;">' input, single char, or cancel search.</span>

<span style="color: #9ac8e0;">This is a modified variant of `</span><span style="color: #00bcff;">isearch-abort</span><span style="color: #9ac8e0;">' that allows us to</span>
<span style="color: #9ac8e0;">perform the following, based on the specifics of the case: (i)</span>
<span style="color: #9ac8e0;">delete the entirety of a non-matching part, when present; (ii)</span>
<span style="color: #9ac8e0;">delete a single character, when possible; (iii) exit current</span>
<span style="color: #9ac8e0;">search if no character is present and go back to point where the</span>
<span style="color: #9ac8e0;">search started."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (eq (length isearch-string) 0)
      (isearch-cancel)
    (isearch-del-char)
    (<span style="color: #b6a0ff;">while</span> (<span style="color: #b6a0ff;">or</span> (not isearch-success) isearch-error)
      (isearch-pop-state)))
  (isearch-update))

(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"&lt;backspace&gt;"</span>) 'ts-isearch-abort-dwim)
</pre>
</div>
</div>
</div>

<div id="outline-container-org493c254" class="outline-4">
<h4 id="org493c254">Keybindings</h4>
<div class="outline-text-4" id="text-org493c254">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key isearch-mode-map (kbd <span style="color: #79a8ff;">"M-/"</span>) 'isearch-complete)
(define-key minibuffer-local-isearch-map (kbd <span style="color: #79a8ff;">"M-/"</span>) 'isearch-complete-edit)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-r"</span>) 'isearch-backward-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"C-s"</span>) 'isearch-forward-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s b"</span>) 'multi-isearch-buffers-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s f"</span>) 'multi-isearch-files-regexp)
(global-set-key (kbd <span style="color: #79a8ff;">"M-s M-o"</span>) 'multi-occur)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f16a62" class="outline-4">
<h4 id="org8f16a62">Settings</h4>
<div class="outline-text-4" id="text-org8f16a62">
<p>
Don't tangle this on <code>emacs-version</code> &lt; 27
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27.1"</span>)
  (<span style="color: #b6a0ff;">setq</span> isearch-allow-scroll 'unlimited)
  (<span style="color: #b6a0ff;">setq</span> isearch-yank-on-move 'shift)
  (<span style="color: #b6a0ff;">setq</span> isearch-lazy-count t)
  (<span style="color: #b6a0ff;">setq</span> lazy-count-suffix-format <span style="color: #79a8ff;">" (%s/%s)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org37bf929" class="outline-3">
<h3 id="org37bf929">Line Numbers</h3>
<div class="outline-text-3" id="text-org37bf929">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> display-line-numbers 'relative)
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
(add-hook 'sh-script-hook 'display-line-numbers-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd0d4a84" class="outline-3">
<h3 id="orgd0d4a84">Minibuffer</h3>
<div class="outline-text-3" id="text-orgd0d4a84">
</div>
<div id="outline-container-org2105e20" class="outline-4">
<h4 id="org2105e20">Completion framework settings</h4>
<div class="outline-text-4" id="text-org2105e20">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> completion-category-defaults nil)
(<span style="color: #b6a0ff;">setq</span> completion-cycle-threshold 3)
(<span style="color: #b6a0ff;">setq</span> completion-flex-nospace nil)
(<span style="color: #b6a0ff;">setq</span> completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> completion-pcm-complete-word-inserts-delimiters t)
(<span style="color: #b6a0ff;">setq</span> completion-pcm-word-delimiters <span style="color: #79a8ff;">"-_./:| "</span>)
(<span style="color: #b6a0ff;">setq</span> completion-show-help nil)
(<span style="color: #b6a0ff;">setq</span> completions-detailed t)
(<span style="color: #b6a0ff;">setq</span> completions-format 'one-column)
</pre>
</div>
</div>
</div>

<div id="outline-container-org86ec4a4" class="outline-4">
<h4 id="org86ec4a4">Misc Minibuffer settings</h4>
<div class="outline-text-4" id="text-org86ec4a4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> enable-recursive-minibuffers t)
(<span style="color: #b6a0ff;">setq</span> file-name-shadow-mode 1)
(<span style="color: #b6a0ff;">setq</span> minibuffer-depth-indicate-mode 1)
(<span style="color: #b6a0ff;">setq</span> minibuffer-eldef-shorten-default t)
(<span style="color: #b6a0ff;">setq</span> minibuffer-electric-default-mode 1)
(<span style="color: #b6a0ff;">setq</span> read-answer-short t)
(<span style="color: #b6a0ff;">setq</span> read-buffer-completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> read-file-name-completion-ignore-case t)
(<span style="color: #b6a0ff;">setq</span> resize-mini-windows t)
</pre>
</div>

<p>
It may also be wise to raise gc-cons-threshold while the minibuffer is active,
so the GC doesn’t slow down expensive commands (or completion frameworks, like
helm and ivy). Stolen from <a href="https://github.com/hlissner/doom-emacs/blob/develop/docs/faq.org#how-does-doom-start-up-so-quickly">Doom Emacs FAQ</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'minibuffer-setup-hook (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold most-positive-fixnum)))
(add-hook 'minibuffer-exit-hook (<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">setq</span> gc-cons-threshold 16777216))) <span style="color: #989898;">; </span><span style="color: #989898;">16mb</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a080ed" class="outline-4">
<h4 id="org6a080ed">Save history mode</h4>
<div class="outline-text-4" id="text-org6a080ed">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'savehist
  (<span style="color: #b6a0ff;">setq</span> savehist-additional-variables '(kill-ring search-ring regexp-search-ring))
  (<span style="color: #b6a0ff;">setq</span> savehist-save-minibuffer-history 1)
  (message <span style="color: #79a8ff;">"Lazy loaded savehist :-)"</span>))
(add-hook 'emacs-startup-hook 'savehist-mode)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5c911d0" class="outline-3">
<h3 id="org5c911d0">Occur</h3>
<div class="outline-text-3" id="text-org5c911d0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'occur-mode-hook 'hl-line-mode)
(define-key occur-mode-map <span style="color: #79a8ff;">"t"</span> 'toggle-truncate-lines)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c5d213" class="outline-3">
<h3 id="org2c5d213">Org</h3>
<div class="outline-text-3" id="text-org2c5d213">
</div>
<div id="outline-container-orgb84d25b" class="outline-4">
<h4 id="orgb84d25b">Org Babel Load Languages</h4>
<div class="outline-text-4" id="text-orgb84d25b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">org-babel-execute-src-block</span> (around load-language nil activate)
    <span style="color: #9ac8e0;">"Load language if needed"</span>
    (<span style="color: #b6a0ff;">let</span> ((language (org-element-property <span style="color: #f78fe7;">:language</span> (org-element-at-point))))
      (<span style="color: #b6a0ff;">unless</span> (cdr (assoc (intern language) org-babel-load-languages))
        (add-to-list 'org-babel-load-languages (cons (intern language) t))
        (org-babel-do-load-languages 'org-babel-load-languages org-babel-load-languages))
      ad-do-it)))
</pre>
</div>

<p>
No need to tangle, when using the advice above, leaving here for reference.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((awk . t)
     (C . t)
     (clojure . t)
     (css . t)
     (dot . t) <span style="color: #989898;">;; </span><span style="color: #989898;">graphviz language</span>
     (emacs-lisp . t)
     (gnuplot . t)
     (haskell . t)
     <span style="color: #989898;">;; </span><span style="color: #989898;">(http . t)</span>
     (java . t)
     (js . t)
     (latex . t)
     (lisp . t)
     (makefile . t)
     (ocaml . t)
     (perl . t)
     (python . t)
     (plantuml . t)
     (ruby . t)
     (scheme . t)
     (sed . t)
     (shell . t)
     (sql . t)
     (sqlite . t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org46c6b15" class="outline-4">
<h4 id="org46c6b15">Org Capture Templates</h4>
<div class="outline-text-4" id="text-org46c6b15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-capture-templates
        '((<span style="color: #79a8ff;">"t"</span> <span style="color: #79a8ff;">"TODO Entry"</span> entry (file+headline <span style="color: #79a8ff;">"~/org/todo.org"</span> <span style="color: #79a8ff;">"Captured"</span>)
           <span style="color: #79a8ff;">"* TODO %?\n  %i\n  %a"</span>)
          (<span style="color: #79a8ff;">"j"</span> <span style="color: #79a8ff;">"Journal Entry"</span> entry (file+datetree <span style="color: #79a8ff;">"~/org/journal.org"</span> <span style="color: #79a8ff;">"Captured"</span>)
           <span style="color: #79a8ff;">"* %?\nEntered on %U\n %i\n  %a"</span>)
          (<span style="color: #79a8ff;">"n"</span> <span style="color: #79a8ff;">"Notes Entry"</span> entry (file+datetree <span style="color: #79a8ff;">"~/org/notes.org"</span> <span style="color: #79a8ff;">"Captured"</span>)
           <span style="color: #79a8ff;">"* %?\nEntered on %U\n %i\n  %a"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5410109" class="outline-4">
<h4 id="org5410109">Org Export &amp; View HTML</h4>
<div class="outline-text-4" id="text-org5410109">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-org-export-to-html-and-browse</span> ()
    <span style="color: #9ac8e0;">"Export org file to html and browse-url-of-file"</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (browse-url-of-file (org-html-export-to-html)))
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-x M-b"</span>) 'ts-org-export-to-html-and-browse))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c4cfb8" class="outline-4">
<h4 id="org4c4cfb8">Org Global Keybindings</h4>
<div class="outline-text-4" id="text-org4c4cfb8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'org-mode <span style="color: #79a8ff;">"org"</span> nil t)
(autoload 'org-agenda <span style="color: #79a8ff;">"org"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c o a"</span>) 'org-agenda)
(autoload 'org-capture <span style="color: #79a8ff;">"org"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c o c"</span>) 'org-capture)
(autoload 'org-store-link <span style="color: #79a8ff;">"org"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c o l"</span>) 'org-store-link)
(autoload 'org-time-stamp <span style="color: #79a8ff;">"org"</span> nil t)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c o t"</span>) 'org-time-stamp)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5d0900" class="outline-4">
<h4 id="orga5d0900">Org Latex</h4>
<div class="outline-text-4" id="text-orga5d0900">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org-latex
  (<span style="color: #b6a0ff;">setq</span> org-latex-listings 'minted)
  (<span style="color: #b6a0ff;">setq</span> org-latex-pdf-process
        '(<span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #79a8ff;">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span>))
  (add-to-list 'org-latex-packages-alist '(<span style="color: #79a8ff;">""</span> <span style="color: #79a8ff;">"minted"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8bf7977" class="outline-4">
<h4 id="org8bf7977">Org Misc Settings</h4>
<div class="outline-text-4" id="text-org8bf7977">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-startup-folded t) <span style="color: #989898;">; </span><span style="color: #989898;">start in overview mode</span>
  (<span style="color: #b6a0ff;">setq</span> org-directory <span style="color: #79a8ff;">"~/org"</span>)
  (<span style="color: #b6a0ff;">setq</span> org-agenda-files (file-expand-wildcards <span style="color: #79a8ff;">"~/org/*.org"</span>))
  (<span style="color: #b6a0ff;">setq</span> org-default-notes-file <span style="color: #79a8ff;">"~/org/notes.org"</span>)
  (<span style="color: #b6a0ff;">setq</span> org-image-actual-width nil) <span style="color: #989898;">; </span><span style="color: #989898;">try to get width from #+ATTR.* keyword</span>
  (<span style="color: #b6a0ff;">setf</span> org-blank-before-new-entry '((heading . nil) (plain-list-item . nil)))
  (<span style="color: #b6a0ff;">setq</span> org-emphasis-regexp-components '(<span style="color: #79a8ff;">" \t('\"{"</span> <span style="color: #79a8ff;">"- \t.,:!?;'\")}\\"</span> <span style="color: #79a8ff;">" \t\r\n,\"'"</span> <span style="color: #79a8ff;">"."</span> 300))
  (<span style="color: #b6a0ff;">setq</span> org-confirm-babel-evaluate 'nil)
  (<span style="color: #b6a0ff;">setq</span> org-export-with-toc t)
  (<span style="color: #b6a0ff;">setq</span> org-indent-indentation-per-level 1)
  (<span style="color: #b6a0ff;">setq</span> org-list-allow-alphabetical t)
  (<span style="color: #b6a0ff;">setq</span> org-list-indent-offset 1)
  (<span style="color: #b6a0ff;">setq</span> org-return-follows-link t)
  (<span style="color: #b6a0ff;">setq</span> org-startup-indented t)
  (<span style="color: #b6a0ff;">setq</span> org-html-validation-link nil) <span style="color: #989898;">; </span><span style="color: #989898;">don't add "validate" postamble</span>
  (<span style="color: #b6a0ff;">setq</span> org-use-fast-todo-selection t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce7d5b8" class="outline-4">
<h4 id="orgce7d5b8">Org Outline/Goto</h4>
<div class="outline-text-4" id="text-orgce7d5b8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-goto-interface 'outline-path-completionp)
  (<span style="color: #b6a0ff;">setq</span> org-outline-path-complete-in-steps nil)
  <span style="color: #989898;">;; </span><span style="color: #989898;">org-goto is basically imenu on steroids for org-mode</span>
  (define-key org-mode-map (kbd <span style="color: #79a8ff;">"C-c i"</span>) 'org-goto))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6517b6" class="outline-4">
<h4 id="orgf6517b6">Org Recompile Post Tangle</h4>
<div class="outline-text-4" id="text-orgf6517b6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">cond</span> ((version= emacs-version <span style="color: #79a8ff;">"27"</span>)
         (<span style="color: #b6a0ff;">progn</span>
           (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file early-init nil 0 t)))
           (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file init-file nil 0 t)))))
        ((version= emacs-version <span style="color: #79a8ff;">"28"</span>)
         (<span style="color: #b6a0ff;">progn</span>
           (add-hook 'org-babel-post-tangle-hook (<span style="color: #b6a0ff;">lambda</span> () (byte-recompile-file early-init nil 0)))
           (add-hook 'org-babel-post-tangle-hook 'emacs-lisp-byte-compile-and-load)))
        (t (add-hook 'org-babel-post-tangle-hook 'emacs-lisp-byte-compile-and-load))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org11f38e8" class="outline-4">
<h4 id="org11f38e8">Org Recursive Sort</h4>
<div class="outline-text-4" id="text-org11f38e8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-org-recursive-sort</span> ()
  <span style="color: #9ac8e0;">"Sort all entries in the current buffer, recursively."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (org-map-entries (<span style="color: #b6a0ff;">lambda</span> ()
                     (<span style="color: #b6a0ff;">condition-case</span> x
                         (org-sort-entries nil ?a) (<span style="color: #fec43f;">user-error</span>)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0d4b466" class="outline-4">
<h4 id="org0d4b466">Org Refile</h4>
<div class="outline-text-4" id="text-org0d4b466">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-refile-use-outline-path 'file)
  (<span style="color: #b6a0ff;">setq</span> org-refile-allow-creating-parent-nodes 'confirm)
  (<span style="color: #b6a0ff;">setq</span> org-refile-targets '((nil <span style="color: #f78fe7;">:maxlevel</span> . 9))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb64d42" class="outline-4">
<h4 id="orgbb64d42">Org Special Keys</h4>
<div class="outline-text-4" id="text-orgbb64d42">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-special-ctrl-a/e 'reversed)
  (<span style="color: #b6a0ff;">setq</span> org-special-ctrl-k t)
  (<span style="color: #b6a0ff;">setq</span> org-special-ctrl-o t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e0f9b7" class="outline-4">
<h4 id="org1e0f9b7">Org Speed Commands</h4>
<div class="outline-text-4" id="text-org1e0f9b7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-use-speed-commands t)
  (<span style="color: #b6a0ff;">setq</span> org-speed-commands-user
        '((<span style="color: #79a8ff;">"N"</span> . org-down-element)
          (<span style="color: #79a8ff;">"P"</span> . org-up-element))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacd2173" class="outline-4">
<h4 id="orgacd2173">Org Src</h4>
<div class="outline-text-4" id="text-orgacd2173">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-src-fontify-natively t)
  (<span style="color: #b6a0ff;">setq</span> org-src-tab-acts-natively t)
  (<span style="color: #b6a0ff;">setq</span> org-src-window-setup 'current-window))
</pre>
</div>
</div>
</div>

<div id="outline-container-org06add37" class="outline-4">
<h4 id="org06add37">Org Structure Templates</h4>
<div class="outline-text-4" id="text-org06add37">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">if</span> (not (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)) (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org-tempo</span>))
  (<span style="color: #b6a0ff;">setq</span> org-structure-template-alist (append org-structure-template-alist
                                             '((<span style="color: #79a8ff;">"cl"</span> . <span style="color: #79a8ff;">"src common-lisp"</span>)
                                               (<span style="color: #79a8ff;">"el"</span> . <span style="color: #79a8ff;">"src emacs-lisp"</span>)
                                               (<span style="color: #79a8ff;">"go"</span> . <span style="color: #79a8ff;">"src go"</span>)
                                               (<span style="color: #79a8ff;">"ja"</span> . <span style="color: #79a8ff;">"src java"</span>)
                                               (<span style="color: #79a8ff;">"js"</span> . <span style="color: #79a8ff;">"src javascript"</span>)
                                               (<span style="color: #79a8ff;">"kr"</span> . <span style="color: #79a8ff;">"src c"</span>)
                                               (<span style="color: #79a8ff;">"py"</span> . <span style="color: #79a8ff;">"src python"</span>)
                                               (<span style="color: #79a8ff;">"sh"</span> . <span style="color: #79a8ff;">"src shell"</span>)
                                               (<span style="color: #79a8ff;">"sq"</span> . <span style="color: #79a8ff;">"src sql"</span>)
                                               (<span style="color: #79a8ff;">"tx"</span> . <span style="color: #79a8ff;">"src text"</span>)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf238ee4" class="outline-4">
<h4 id="orgf238ee4">Org Todo Keywords</h4>
<div class="outline-text-4" id="text-orgf238ee4">
<p>
Add <code>!</code> in the sequence parens to insert timestamps and add <code>@</code> to require a
message.
</p>

<blockquote>
<p>
Since it is normally too much to record a note for every state, Org mode
expects configuration on a per-keyword basis for this. This is achieved by
adding special markers ‘!’ (for a timestamp) or ‘@’ (for a note with timestamp)
in parentheses after each keyword.
</p>
</blockquote>

<p>
<a href="https://orgmode.org/manual/Tracking-TODO-state-changes.html">https://orgmode.org/manual/Tracking-TODO-state-changes.html</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'org
  (<span style="color: #b6a0ff;">setq</span> org-todo-keywords '((sequence
                             <span style="color: #79a8ff;">"TODO(t)"</span>
                             <span style="color: #79a8ff;">"IN-PROGRESS(i)"</span>
                             <span style="color: #79a8ff;">"BLOCKED(b)"</span>
                             <span style="color: #79a8ff;">"DONE(d)"</span>
                             ))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1b1379c" class="outline-3">
<h3 id="org1b1379c">Pending delete</h3>
<div class="outline-text-3" id="text-org1b1379c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'pending-delete-mode 1) <span style="color: #989898;">;; </span><span style="color: #989898;">remove selected region if typing</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1970304" class="outline-3">
<h3 id="org1970304">Prettify Symbols</h3>
<div class="outline-text-3" id="text-org1970304">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'prettify-symbols
  (<span style="color: #b6a0ff;">setq</span> prettify-symbols-unprettify-at-point 'right-edge)
  (message <span style="color: #79a8ff;">"Lazy loaded prettify-symbols :-)"</span>))
(add-hook 'emacs-startup-hook 'global-prettify-symbols-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc95585d" class="outline-3">
<h3 id="orgc95585d">Project (Emacs 28+)</h3>
<div class="outline-text-3" id="text-orgc95585d">
<p>
We only tangle this when <code>emacs-version</code> &gt; 28, since it's not very useful prior
to that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">and</span> (file-directory-p <span style="color: #79a8ff;">"~/oe-developers"</span>)
         (file-readable-p <span style="color: #79a8ff;">"~/oe-developers"</span>))
    (<span style="color: #b6a0ff;">setq</span> ts-project-roots '(<span style="color: #79a8ff;">"~/src"</span> <span style="color: #79a8ff;">"~/oe-developers"</span>)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-project--git-repo-p</span> (directory)
  <span style="color: #9ac8e0;">"Return non-nil if there is a git repository in DIRECTORY."</span>
  (<span style="color: #b6a0ff;">and</span>
   (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git"</span>))
   (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/info"</span>))
   (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/objects"</span>))
   (file-directory-p (concat directory <span style="color: #79a8ff;">"/.git/refs"</span>))
   (file-regular-p (concat directory <span style="color: #79a8ff;">"/.git/HEAD"</span>))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-project--git-repos-recursive</span> (directory maxdepth)
  <span style="color: #9ac8e0;">"List git repos in under DIRECTORY recursively to MAXDEPTH."</span>
  (<span style="color: #b6a0ff;">let*</span> ((git-repos '())
         (current-directory-list
          (directory-files directory t directory-files-no-dot-files-regexp)))
    <span style="color: #989898;">;; </span><span style="color: #989898;">while we are in the current directory</span>
    (<span style="color: #b6a0ff;">if</span> (ts-project--git-repo-p directory)
        (<span style="color: #b6a0ff;">setq</span> git-repos (cons (file-truename (expand-file-name directory)) git-repos)))
    (<span style="color: #b6a0ff;">while</span> current-directory-list
      (<span style="color: #b6a0ff;">let</span> ((f (car current-directory-list)))
        (<span style="color: #b6a0ff;">cond</span> ((<span style="color: #b6a0ff;">and</span> (file-directory-p f)
                    (file-readable-p f)
                    (&gt; maxdepth 0)
                    (not (ts-project--git-repo-p f)))
               (<span style="color: #b6a0ff;">setq</span> git-repos
                     (append git-repos
                             (ts-project--git-repos-recursive f (- maxdepth 1)))))
              ((ts-project--git-repo-p f)
               (<span style="color: #b6a0ff;">setq</span> git-repos (cons
                                (file-truename (expand-file-name f)) git-repos))))
        (<span style="color: #b6a0ff;">setq</span> current-directory-list (cdr current-directory-list))))
    (delete-dups git-repos)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-project--list-projects</span> ()
  <span style="color: #9ac8e0;">"Produce list of projects in `</span><span style="color: #00bcff;">ts-project-roots</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">let</span> ((cands (delete-dups (mapcan (<span style="color: #b6a0ff;">lambda</span> (directory)
                                      (ts-project--git-repos-recursive
                                       (expand-file-name directory)
                                       10))
                                    ts-project-roots))))
    <span style="color: #989898;">;; </span><span style="color: #989898;">needs to be a list of lists</span>
    (mapcar (<span style="color: #b6a0ff;">lambda</span> (d)
              (list (abbreviate-file-name d)))
            cands)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-project-update-projects</span> ()
  <span style="color: #9ac8e0;">"Overwrite `</span><span style="color: #00bcff;">project--list</span><span style="color: #9ac8e0;">' using `</span><span style="color: #00bcff;">ts-project--list-projects</span><span style="color: #9ac8e0;">'.</span>
<span style="color: #9ac8e0;">    WARNING: This will destroy &amp; replace the contents of `</span><span style="color: #00bcff;">project-list-file</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (autoload 'project--ensure-read-project-list <span style="color: #79a8ff;">"project"</span> nil t)
  (project--ensure-read-project-list)
  (<span style="color: #b6a0ff;">setq</span> project--list (ts-project--list-projects))
  (project--write-project-list)
  (message <span style="color: #79a8ff;">"Updated project list in %s"</span> project-list-file))

<span style="color: #989898;">;; </span><span style="color: #989898;">(add-hook 'emacs-startup-hook 'ts-project-update-projects)</span>
(global-set-key (kbd <span style="color: #79a8ff;">"C-x p u"</span>) 'ts-project-update-projects)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'project
  (<span style="color: #b6a0ff;">setq</span> project-switch-commands
        '((?b <span style="color: #79a8ff;">"Buffer"</span> project-switch-to-buffer)
          (?c <span style="color: #79a8ff;">"Compile"</span> project-compile)
          (?d <span style="color: #79a8ff;">"Dired"</span> project-dired)
          (?e <span style="color: #79a8ff;">"Eshell"</span> project-eshell)
          (?f <span style="color: #79a8ff;">"File"</span> project-find-file)
          (?g <span style="color: #79a8ff;">"Grep"</span> project-find-regexp)
          (?q <span style="color: #79a8ff;">"Query replace"</span> project-query-replace-regexp)
          (?r <span style="color: #79a8ff;">"Run command"</span> project-async-shell-command)
          (?s <span style="color: #79a8ff;">"Search"</span> project-search)
          (?v <span style="color: #79a8ff;">"VC dir"</span> project-vc-dir)))
  (message <span style="color: #79a8ff;">"Lazy loaded project :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf30bcb6" class="outline-3">
<h3 id="orgf30bcb6">Pulse</h3>
<div class="outline-text-3" id="text-orgf30bcb6">
<p>
<a href="https://karthinks.com/software/batteries-included-with-emacs/">https://karthinks.com/software/batteries-included-with-emacs/</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">pulse-line</span> (<span style="color: #6ae4b9;">&amp;rest</span> _)
  <span style="color: #9ac8e0;">"Pulse the current line."</span>
  (pulse-momentary-highlight-one-line (point)))

(<span style="color: #b6a0ff;">dolist</span> (command '(scroll-up-command scroll-down-command
                                     recenter-top-bottom other-window))
  (advice-add command <span style="color: #f78fe7;">:after</span> #'pulse-line))
</pre>
</div>
</div>
</div>

<div id="outline-container-org41652b3" class="outline-3">
<h3 id="org41652b3">Python</h3>
<div class="outline-text-3" id="text-org41652b3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'python
  <span style="color: #989898;">;; </span><span style="color: #989898;">(when (eq system-type 'windows-nt)</span>
  <span style="color: #989898;">;;   </span><span style="color: #989898;">(setq exec-path</span>
  <span style="color: #989898;">;;         </span><span style="color: #989898;">(append exec-path</span>
  <span style="color: #989898;">;;                 </span><span style="color: #989898;">'("C:/Users/Toby/AppData/Local/Programs/Python/Python310")))</span>
  <span style="color: #989898;">;;   </span><span style="color: #989898;">(setq python-shell-interpreter</span>
  <span style="color: #989898;">;;         </span><span style="color: #989898;">"C:/Users/Toby/AppData/Local/Programs/Python/Python310"))</span>
  (<span style="color: #b6a0ff;">setq</span> python-fill-docstring-style 'django)
  (message <span style="color: #79a8ff;">"Lazy loaded python :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafd9c77" class="outline-3">
<h3 id="orgafd9c77">Recentf</h3>
<div class="outline-text-3" id="text-orgafd9c77">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'recentf
  (<span style="color: #b6a0ff;">setq</span> recentf-exclude '(<span style="color: #79a8ff;">".gz"</span>
                          <span style="color: #79a8ff;">".xz"</span>
                          <span style="color: #79a8ff;">".zip"</span>
                          <span style="color: #79a8ff;">"/elpa/"</span>
                          <span style="color: #79a8ff;">"/ssh:"</span>
                          <span style="color: #79a8ff;">"/sudo:"</span>
                          <span style="color: #79a8ff;">"^/var/folders\\.*"</span>
                          <span style="color: #79a8ff;">"COMMIT_EDITMSG\\'"</span>
                          <span style="color: #79a8ff;">".*-autoloads\\.el\\'"</span>
                          <span style="color: #79a8ff;">"[/\\]\\.elpa/"</span>))
  (<span style="color: #b6a0ff;">setq</span> recentf-max-menu-items 128)
  (<span style="color: #b6a0ff;">setq</span> recentf-max-saved-items 256)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts--recentf-get-paths</span> ()
    <span style="color: #9ac8e0;">"Return de-duplicated and abbreviated `</span><span style="color: #00bcff;">recentf-list</span><span style="color: #9ac8e0;">'."</span>
    (delete-dups (mapcar 'abbreviate-file-name recentf-list)))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-recentf-find-file</span> ()
    <span style="color: #9ac8e0;">"`</span><span style="color: #00bcff;">find-file</span><span style="color: #9ac8e0;">' using `</span><span style="color: #00bcff;">recentf-list</span><span style="color: #9ac8e0;">'."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (find-file (completing-read <span style="color: #79a8ff;">"Find file: "</span> (ts--recentf-get-paths))))
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c r"</span>) 'ts-recentf-find-file)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-recentf-find-file-other-window</span> ()
    <span style="color: #9ac8e0;">"`</span><span style="color: #00bcff;">find-file</span><span style="color: #9ac8e0;">' using `</span><span style="color: #00bcff;">recentf-list</span><span style="color: #9ac8e0;">'."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (find-file-other-window
     (completing-read <span style="color: #79a8ff;">"Find file in other window: "</span> (ts--recentf-get-paths))))
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 r"</span>) 'ts-recentf-find-file-other-window)

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-recentf-find-file-other-frame</span> ()
    <span style="color: #9ac8e0;">"`</span><span style="color: #00bcff;">find-file</span><span style="color: #9ac8e0;">' using `</span><span style="color: #00bcff;">recentf-list</span><span style="color: #9ac8e0;">'."</span>
    (<span style="color: #b6a0ff;">interactive</span>)
    (find-file-other-frame
     (completing-read <span style="color: #79a8ff;">"Find file in other frame: "</span> (ts--recentf-get-paths))))
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c 5 r"</span>) 'ts-recentf-find-file-other-frame)

  (message <span style="color: #79a8ff;">"Lazy loaded recentf :-)"</span>))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c C-r"</span>) 'recentf-open-files)
(add-hook 'emacs-startup-hook 'recentf-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-org12a708b" class="outline-3">
<h3 id="org12a708b">Repeat Mode</h3>
<div class="outline-text-3" id="text-org12a708b">
<p>
Emacs 28+
</p>

<p>
<a href="https://karthinks.com/software/it-bears-repeating/">https://karthinks.com/software/it-bears-repeating/</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">isearch-repeat-map</span>
  (<span style="color: #b6a0ff;">let</span> ((map (make-sparse-keymap)))
    (define-key map (kbd <span style="color: #79a8ff;">"s"</span>) #'isearch-repeat-forward)
    (define-key map (kbd <span style="color: #79a8ff;">"r"</span>) #'isearch-repeat-backward)
    map))

(<span style="color: #b6a0ff;">dolist</span> (cmd '(isearch-repeat-forward isearch-repeat-backward))
  (put cmd 'repeat-map 'isearch-repeat-map))

(repeat-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org43afca2" class="outline-3">
<h3 id="org43afca2">Saveplace</h3>
<div class="outline-text-3" id="text-org43afca2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'save-place
  (<span style="color: #b6a0ff;">setq</span> save-place-file (concat user-emacs-directory <span style="color: #79a8ff;">"saveplace.el"</span>))
  (message <span style="color: #79a8ff;">"Lazy loaded save-place-mode :-)"</span>))
(add-hook 'emacs-startup-hook 'save-place-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e3be01" class="outline-3">
<h3 id="org6e3be01">Selective Display</h3>
<div class="outline-text-3" id="text-org6e3be01">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-toggle-selective-display</span> ()
  <span style="color: #9ac8e0;">"Toggle `</span><span style="color: #00bcff;">selective-display</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> selective-display
      (<span style="color: #b6a0ff;">setq-local</span> selective-display nil)
    (<span style="color: #b6a0ff;">setq-local</span> selective-display 1)))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x $"</span>) 'ts-toggle-selective-display)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7968b6" class="outline-3">
<h3 id="orgf7968b6">Semantic</h3>
<div class="outline-text-3" id="text-orgf7968b6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'prog-mode-hook 'semantic-mode)
<span style="color: #989898;">;; </span><span style="color: #989898;">(advice-add 'semantic-idle-scheduler-function :around #'ignore)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge02f661" class="outline-3">
<h3 id="orge02f661">Shell</h3>
<div class="outline-text-3" id="text-orge02f661">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'shell
  (<span style="color: #b6a0ff;">setq</span> ansi-color-for-comint-mode t)
  (<span style="color: #b6a0ff;">unless</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>)
    <span style="color: #989898;">;; </span><span style="color: #989898;">show current directory when prompting for a shell command.</span>
    (<span style="color: #b6a0ff;">setq</span> shell-command-prompt-show-cwd t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org41eb11e" class="outline-3">
<h3 id="org41eb11e">Shell Script</h3>
<div class="outline-text-3" id="text-org41eb11e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> auto-mode-alist (append auto-mode-alist
                              '((<span style="color: #79a8ff;">"\\.sh\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\.bash.*\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\.zsh.*\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\.aliases\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\.functions\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\bashrc\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\kshrc\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\profile\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\zshenv\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\zprompt\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\zshrc\\'"</span> . shell-script-mode)
                                (<span style="color: #79a8ff;">"\\prompt_.*_setup\\'"</span> . shell-script-mode))))

(<span style="color: #b6a0ff;">setq</span> interpreter-mode-alist (append interpreter-mode-alist
                                     '((<span style="color: #79a8ff;">"bash"</span> . shell-script-mode)
                                       (<span style="color: #79a8ff;">"ksh"</span> . shell-script-mode)
                                       (<span style="color: #79a8ff;">"sh"</span> . shell-script-mode)
                                       (<span style="color: #79a8ff;">"zsh"</span> . shell-script-mode))))

(<span style="color: #b6a0ff;">with-eval-after-load</span> 'sh-script
  (add-hook 'after-save-hook 'executable-make-buffer-file-executable-if-script-p)
  (message <span style="color: #79a8ff;">"Lazy loaded shell-script-mode :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6801368" class="outline-3">
<h3 id="org6801368">Show paren</h3>
<div class="outline-text-3" id="text-org6801368">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'paren
  (<span style="color: #b6a0ff;">setq</span> show-paren-when-point-in-periphery t)
  (<span style="color: #b6a0ff;">setq</span> show-paren-when-point-inside-paren t))
(add-hook 'after-init-hook 'show-paren-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9f9b8b" class="outline-3">
<h3 id="orga9f9b8b">Size Indication</h3>
<div class="outline-text-3" id="text-orga9f9b8b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'size-indication-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga331de5" class="outline-3">
<h3 id="orga331de5">Subword</h3>
<div class="outline-text-3" id="text-orga331de5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'global-subword-mode) <span style="color: #989898;">;; </span><span style="color: #989898;">move by camel case, etc</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4807bf9" class="outline-3">
<h3 id="org4807bf9">Tab-bar (Emacs 27+)</h3>
<div class="outline-text-3" id="text-org4807bf9">
<p>
Don't tangle this block on <code>emacs-version</code> &lt; 27.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-tab-bar-select-dwim</span> ()
  <span style="color: #9ac8e0;">"Do-What-I-Mean function for getting to a `</span><span style="color: #00bcff;">tab-bar-mode</span><span style="color: #9ac8e0;">' tab.</span>
<span style="color: #9ac8e0;">If no other tab exists, create one and switch to it. If there is</span>
<span style="color: #9ac8e0;">one other tab (so two in total) switch to it without further</span>
<span style="color: #9ac8e0;">questions. Else use completion to select the tab to switch to."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((tabs (mapcar (<span style="color: #b6a0ff;">lambda</span> (tab)
                        (alist-get 'name tab))
                      (tab-bar--tabs-recent))))
    (<span style="color: #b6a0ff;">cond</span> ((eq tabs nil)
           (tab-new))
          ((eq (length tabs) 1)
           (tab-next))
          (t
           (tab-bar-switch-to-tab
            (completing-read <span style="color: #79a8ff;">"Select tab: "</span> tabs nil t))))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-x t t"</span>) 'ts-tab-bar-select-dwim)

(<span style="color: #b6a0ff;">with-eval-after-load</span> 'tab-bar-mode
  (<span style="color: #b6a0ff;">setq</span> tab-bar-close-button-show nil)
  (<span style="color: #b6a0ff;">setq</span> tab-bar-close-last-tab-choice 'tab-bar-mode-disable)
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq tab-bar-show nil)</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq tab-bar-tab-hints t)</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq tab-bar-tab-name-function 'tab-bar-tab-name-all)</span>
  (tab-bar-history-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga21eb3e" class="outline-3">
<h3 id="orga21eb3e">Term</h3>
<div class="outline-text-3" id="text-orga21eb3e">
</div>
<div id="outline-container-org55fa565" class="outline-4">
<h4 id="org55fa565">ANSI Term launcher</h4>
<div class="outline-text-4" id="text-org55fa565">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-ansi-term</span> ()
  <span style="color: #9ac8e0;">"Opens shell from $SHELL environmental variable in `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  <span style="color: #989898;">;; </span><span style="color: #989898;">https://emacs.stackexchange.com/a/48481</span>
  (<span style="color: #b6a0ff;">let</span> ((switch-to-buffer-obey-display-actions))
    (ansi-term (getenv <span style="color: #79a8ff;">"SHELL"</span>))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c tt"</span>) 'ts-ansi-term)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-ansi-term-other-window</span> ()
  <span style="color: #9ac8e0;">"Opens default $SHELL `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #9ac8e0;">' in another window."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (ts-ansi-term))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 tt"</span>) 'ts-ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org31086ec" class="outline-4">
<h4 id="org31086ec">Set term coding system to UTF-8</h4>
<div class="outline-text-4" id="text-org31086ec">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'term-exec (<span style="color: #b6a0ff;">lambda</span> () (set-process-coding-system 'utf-8-unix 'utf-8-unix)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea0af02" class="outline-4">
<h4 id="orgea0af02">Switch to ANSI Term</h4>
<div class="outline-text-4" id="text-orgea0af02">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-switch-to-ansi-term</span> ()
  <span style="color: #9ac8e0;">"Open an `</span><span style="color: #00bcff;">ansi-term</span><span style="color: #9ac8e0;">' if it doesn't already exist.</span>
<span style="color: #9ac8e0;">Otherwise switch to current one."</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">if</span> (get-buffer <span style="color: #79a8ff;">"*ansi-term*"</span>)
      (switch-to-buffer <span style="color: #79a8ff;">"*ansi-term*"</span>)
    (ansi-term (getenv <span style="color: #79a8ff;">"SHELL"</span>))))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c ts"</span>) 'ts-switch-to-ansi-term)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-switch-to-ansi-term-other-window</span>()
  <span style="color: #9ac8e0;">"Does what it states on the tin!"</span>
  (<span style="color: #b6a0ff;">interactive</span>)
  (split-window-sensibly)
  (other-window 1)
  (ts-switch-to-ansi-term))

(global-set-key (kbd <span style="color: #79a8ff;">"C-c 4 ts"</span>) 'ts-switch-to-ansi-term-other-window)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1df0ca2" class="outline-4">
<h4 id="org1df0ca2">Term Advise</h4>
<div class="outline-text-4" id="text-org1df0ca2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'term
  (<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">term-handle-exit</span> (after term-kill-buffer-on-exit activate)
    <span style="color: #9ac8e0;">"Kill term when shell exits."</span>
    (kill-buffer))
  (<span style="color: #b6a0ff;">setq</span> term-buffer-maximum-size 200000)
  (message <span style="color: #79a8ff;">"Lazy loaded term :-)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge008108" class="outline-3">
<h3 id="orge008108">Time</h3>
<div class="outline-text-3" id="text-orge008108">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'time
  (<span style="color: #b6a0ff;">setq</span> display-time-format <span style="color: #79a8ff;">"%H:%M %d/%m"</span>)
  (<span style="color: #b6a0ff;">setq</span> display-time-default-load-average 'nil))

(add-hook 'after-init-hook 'display-time-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9eb9df" class="outline-3">
<h3 id="orgc9eb9df">Tramp</h3>
<div class="outline-text-3" id="text-orgc9eb9df">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'tramp
  (<span style="color: #b6a0ff;">setq</span> tramp-backup-directory-alist backup-directory-alist)
  (<span style="color: #b6a0ff;">setq</span> tramp-default-method <span style="color: #79a8ff;">"ssh"</span>)
  (<span style="color: #b6a0ff;">setf</span> tramp-persistency-file-name (concat temporary-file-directory <span style="color: #79a8ff;">"tramp-"</span> (user-login-name)))
  (message <span style="color: #79a8ff;">"Lazy loaded tramp :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org08135ae" class="outline-3">
<h3 id="org08135ae">Version Control</h3>
<div class="outline-text-3" id="text-org08135ae">
<p>
<a href="https://protesilaos.com/dotemacs/#h:31deeff4-dfae-48d9-a906-1f3272f29bc9">Protesilaos Stavrou's VC reference</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'vc
  (<span style="color: #b6a0ff;">setq</span> vc-follow-symlinks t)
  (<span style="color: #b6a0ff;">setq</span> vc-make-backup-files t)
  (<span style="color: #b6a0ff;">setq</span> version-control t)
  (message <span style="color: #79a8ff;">"Lazy loaded vc :-)"</span>))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-vc-dir</span> (<span style="color: #6ae4b9;">&amp;optional</span> arg)
  <span style="color: #9ac8e0;">"Run `</span><span style="color: #00bcff;">vc-dir</span><span style="color: #9ac8e0;">' for the current project or directory.</span>
<span style="color: #9ac8e0;">With optional ARG (\\[</span><span style="color: #00bcff;">universal-argument</span><span style="color: #9ac8e0;">]), use the present</span>
<span style="color: #9ac8e0;">working directory, else default to the root of the current</span>
<span style="color: #9ac8e0;">project, as defined by `</span><span style="color: #00bcff;">vc-root-dir</span><span style="color: #9ac8e0;">'."</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"P"</span>)
  (<span style="color: #b6a0ff;">let</span> ((dir (<span style="color: #b6a0ff;">if</span> arg default-directory (vc-root-dir))))
    (vc-dir dir)))

(<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>)
    (global-set-key (kbd <span style="color: #79a8ff;">"C-x v d"</span>) 'ts-vc-dir)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-x v d"</span>) 'vc-dir-root))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9047061" class="outline-3">
<h3 id="org9047061">View mode</h3>
<div class="outline-text-3" id="text-org9047061">
<p>
Provide pager-like keybindings. Makes navigating read-only buffers a breeze.
Move down and up with SPC and delete (backspace) or S-SPC, half a page down and
up with d and u, and isearch with s.
</p>

<p>
Prolific emacser Omar Antolin Camarena points out a built-in way to use
view-mode in all read-only buffers, including ones you set read-only with C-x
C-q.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> view-read-only t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org500f13b" class="outline-3">
<h3 id="org500f13b">Whitespace</h3>
<div class="outline-text-3" id="text-org500f13b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">with-eval-after-load</span> 'whitespace
  (<span style="color: #b6a0ff;">setq</span> whitespace-line-column 120)
  (<span style="color: #b6a0ff;">setq</span> whitespace-style '(face
                           tabs
                           spaces
                           trailing
                           lines
                           space-before-tab::space
                           newline
                           indentation::space
                           empty
                           space-after-tab::space
                           space-mark
                           tab-mark
                           newline-mark)
        whitespace-face 'whitespace-trailing)
  (global-set-key (kbd <span style="color: #79a8ff;">"C-c M-w"</span>) 'whitespace-mode)
  (message <span style="color: #79a8ff;">"Lazy loaded whitespace :-)"</span>))
</pre>
</div>

<p>
Cleanup whitespace on save
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'before-save-hook 'whitespace-cleanup)
</pre>
</div>
</div>
</div>

<div id="outline-container-org654ee34" class="outline-3">
<h3 id="org654ee34">Windmove</h3>
<div class="outline-text-3" id="text-org654ee34">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #79a8ff;">"C-c w b"</span>) 'windmove-left)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w f"</span>) 'windmove-right)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w p"</span>) 'windmove-up)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w n"</span>) 'windmove-down)

(global-set-key (kbd <span style="color: #79a8ff;">"C-c w C-b"</span>) 'windmove-swap-states-left)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w C-f"</span>) 'windmove-swap-states-right)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w C-p"</span>) 'windmove-swap-states-up)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w C-n"</span>) 'windmove-swap-states-down)

(<span style="color: #b6a0ff;">with-eval-after-load</span> 'windmove
  (<span style="color: #b6a0ff;">setq</span> windmove-wrap-around t)
  (message <span style="color: #79a8ff;">"Lazy loaded windmove :-)"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd947a4" class="outline-3">
<h3 id="orgcd947a4">Window Divider</h3>
<div class="outline-text-3" id="text-orgcd947a4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> window-divider-default-right-width 1)
(<span style="color: #b6a0ff;">setq</span> window-divider-default-bottom-width 1)
(<span style="color: #b6a0ff;">setq</span> window-divider-default-places 'right-only)
(add-hook 'window-setup-hook 'window-divider-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc314db0" class="outline-3">
<h3 id="orgc314db0">Winner mode</h3>
<div class="outline-text-3" id="text-orgc314db0">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Startup-Summary.html#Startup-Summary">Startup Summary</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'window-setup-hook 'winner-mode)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w u"</span>) 'winner-undo)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c w r"</span>) 'winner-redo)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org716c738" class="outline-2">
<h2 id="org716c738">MELPA Packages</h2>
<div class="outline-text-2" id="text-org716c738">
<p>
I like to split up my "vanilla" Emacs configuration and custom functions from
the customisations provided by third party libraries that have been installed
using <code>package.el</code> and <code>use-package</code>.
</p>

<p>
If you want to go for a more vanilla setup, just prefix the <code>COMMENT</code> keyword
to the tile above, and re-tangle the file.
</p>

<p>
This way it makes it very easy to run a semi-stock Emacs without <code>package.el</code>
or any third party libraries, but still have some saner defaults and some extra
functionality.
</p>

<p>
I'm using John Wiegley's awesome <a href="https://github.com/jwiegley/use-package">use-package</a> to pull in and configure any third
party packages from <a href="https://melpa.org/">MELPA</a>.
</p>
</div>

<div id="outline-container-org3a3185f" class="outline-3">
<h3 id="org3a3185f">Setup package.el</h3>
<div class="outline-text-3" id="text-org3a3185f">
<p>
If we are on an Emacs version lower than "27" this will go in <code>init.el</code>,
otherwise it goes in <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Early-Init-File.html">early-init.el</a> for faster starup.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (version&lt; emacs-version <span style="color: #79a8ff;">"27"</span>) (package-initialize))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898;">;; </span><span style="color: #989898;">This must be true otherwise use-package won't load!</span>
(<span style="color: #b6a0ff;">setq</span> package-enable-at-startup t)
<span style="color: #989898;">;; </span><span style="color: #989898;">Allow loading from the package cache.</span>
(<span style="color: #b6a0ff;">setq</span> package-quickstart t)
<span style="color: #989898;">;; </span><span style="color: #989898;">Don't write (package-initialize) to my init file!</span>
(<span style="color: #b6a0ff;">setq</span> package--init-file-ensured t)
<span style="color: #989898;">;; </span><span style="color: #989898;">Turn on ahead-of-time native compilation when installing a package.</span>
(<span style="color: #b6a0ff;">setq</span> package-native-compile t)
<span style="color: #989898;">;; </span><span style="color: #989898;">Setup up archives</span>
(<span style="color: #b6a0ff;">setq</span> package-archives
      '((<span style="color: #79a8ff;">"melpa"</span> . <span style="color: #79a8ff;">"https://melpa.org/packages/"</span>)
        (<span style="color: #79a8ff;">"gnu"</span> . <span style="color: #79a8ff;">"https://elpa.gnu.org/packages/"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org89d46dd" class="outline-3">
<h3 id="org89d46dd">use-package bootstrap</h3>
<div class="outline-text-3" id="text-org89d46dd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">package</span>)
(<span style="color: #b6a0ff;">unless</span> (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))

(<span style="color: #b6a0ff;">setq</span> use-package-enable-imenu-support t
      <span style="color: #989898;">;; </span><span style="color: #989898;">use-package-hook-name-suffix nil</span>
      use-package-always-defer t
      use-package-always-ensure t
      use-package-verbose t)
(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">use-package</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8f824a" class="outline-3">
<h3 id="orgb8f824a">Ansible</h3>
<div class="outline-text-3" id="text-orgb8f824a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">ansible</span> <span style="color: #f78fe7;">:hook</span> (yaml-mode . ansible))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">ansible-doc</span> <span style="color: #f78fe7;">:hook</span> (yaml-mode . ansible-doc-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org82c39b8" class="outline-3">
<h3 id="org82c39b8">Async</h3>
<div class="outline-text-3" id="text-org82c39b8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">async</span> <span style="color: #f78fe7;">:defer</span> 5
  <span style="color: #f78fe7;">:commands</span> (async-byte-compile-file
             async-bytecomp-package-mode)
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">unless</span> (equal system-type 'windows-nt)
    (<span style="color: #b6a0ff;">setq</span> async-bytecomp-allowed-packages '(all)))
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">if</span> (equal system-type 'windows-nt)
      (async-bytecomp-package-mode -1)
    (async-bytecomp-package-mode 1))
  <span style="color: #f78fe7;">:hook</span> (dired-mode-hook . dired-async-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga37b2b7" class="outline-3">
<h3 id="orga37b2b7">Blacken</h3>
<div class="outline-text-3" id="text-orga37b2b7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">blacken</span> <span style="color: #f78fe7;">:hook</span> (python-mode . blacken-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdeef1c0" class="outline-3">
<h3 id="orgdeef1c0">Completion</h3>
<div class="outline-text-3" id="text-orgdeef1c0">
</div>
<div id="outline-container-orgbb8269c" class="outline-4">
<h4 id="orgbb8269c">Vertico</h4>
<div class="outline-text-4" id="text-orgbb8269c">
<p>
<a href="https://github.com/minad/vertico">https://github.com/minad/vertico</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">vertico</span>
  <span style="color: #f78fe7;">:init</span> (vertico-mode)
  (define-key vertico-map (kbd <span style="color: #79a8ff;">"&lt;tab&gt;"</span>) #'vertico-next)
  (define-key vertico-map (kbd <span style="color: #79a8ff;">"&lt;backtab&gt;"</span>) #'vertico-previous))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ca77a2" class="outline-4">
<h4 id="org8ca77a2">Consult</h4>
<div class="outline-text-4" id="text-org8ca77a2">
<p>
<a href="https://github.com/minad/consult">https://github.com/minad/consult</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">consult</span>
  <span style="color: #f78fe7;">:init</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">Use `</span><span style="color: #00bcff;">consult-completion-in-region</span><span style="color: #989898;">' if Vertico is enabled.</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">Otherwise use the default `</span><span style="color: #00bcff;">completion--in-region</span><span style="color: #989898;">' function.</span>
  (<span style="color: #b6a0ff;">setq</span> completion-in-region-function
        (<span style="color: #b6a0ff;">lambda</span> (<span style="color: #6ae4b9;">&amp;rest</span> args)
          (apply (<span style="color: #b6a0ff;">if</span> vertico-mode
                     #'consult-completion-in-region
                   #'completion--in-region)
                 args))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd1ee7f" class="outline-4">
<h4 id="orgfd1ee7f">Marginalia</h4>
<div class="outline-text-4" id="text-orgfd1ee7f">
<p>
<a href="https://github.com/minad/marginalia/">https://github.com/minad/marginalia/</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">marginalia</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">The :init configuration is always executed (Not lazy!)</span>
  <span style="color: #f78fe7;">:init</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">Must be in the :init section of use-package such that the mode gets</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">enabled right away. Note that this forces loading the package.</span>
  (marginalia-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb3329f" class="outline-4">
<h4 id="orgdb3329f">Orderless</h4>
<div class="outline-text-4" id="text-orgdb3329f">
<p>
<a href="https://github.com/oantolin/orderless">https://github.com/oantolin/orderless</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">orderless</span>
  <span style="color: #f78fe7;">:init</span>
  <span style="color: #989898;">;; </span><span style="color: #989898;">Configure a custom style dispatcher (see the Consult wiki)</span>
  (<span style="color: #b6a0ff;">setq</span> orderless-style-dispatchers '(+orderless-dispatch)
        orderless-component-separator #'orderless-escapable-split-on-space)
  (<span style="color: #b6a0ff;">setq</span> completion-styles '(orderless flex partial-completion substring basic)
        completion-category-defaults nil
        completion-category-overrides '((file (styles partial-completion)))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb2343ac" class="outline-3">
<h3 id="orgb2343ac">Default Text Scale</h3>
<div class="outline-text-3" id="text-orgb2343ac">
<p>
Increase or decrease font size everywhere with <code>C-M-=</code> and <code>C-M--</code>
</p>

<p>
<a href="https://github.com/purcell/default-text-scale">https://github.com/purcell/default-text-scale</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">default-text-scale</span> <span style="color: #f78fe7;">:defer</span> 7 <span style="color: #f78fe7;">:config</span> (default-text-scale-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f72e56" class="outline-3">
<h3 id="org7f72e56">Diminish</h3>
<div class="outline-text-3" id="text-org7f72e56">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">diminish</span> <span style="color: #f78fe7;">:defer</span> 2
  <span style="color: #f78fe7;">:diminish</span> abbrev-mode
  <span style="color: #f78fe7;">:diminish</span> auto-fill-function <span style="color: #989898;">;; </span><span style="color: #989898;">wtf?!</span>
  <span style="color: #f78fe7;">:diminish</span> eldoc-mode
  <span style="color: #f78fe7;">:diminish</span> hs-minor-mode
  <span style="color: #f78fe7;">:diminish</span> highlight-changes-mode
  <span style="color: #f78fe7;">:diminish</span> ts-key-mode
  <span style="color: #f78fe7;">:diminish</span> org-indent-mode
  <span style="color: #f78fe7;">:diminish</span> org-src-mode
  <span style="color: #f78fe7;">:diminish</span> subword-mode
  <span style="color: #f78fe7;">:hook</span>
  (org-indent-mode . (<span style="color: #b6a0ff;">lambda</span> () (diminish 'org-indent-mode)))
  (hs-minor-mode . (<span style="color: #b6a0ff;">lambda</span> () (diminish 'hs-minor-mode))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org53f4d65" class="outline-3">
<h3 id="org53f4d65">Docker</h3>
<div class="outline-text-3" id="text-org53f4d65">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">docker</span> <span style="color: #f78fe7;">:bind</span> (<span style="color: #79a8ff;">"C-c C-d"</span> . docker))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">dockerfile-mode</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org95a77a7" class="outline-3">
<h3 id="org95a77a7">Eglot</h3>
<div class="outline-text-3" id="text-org95a77a7">
<p>
Emacs Polyglot: an Emacs LSP client that stays out of your way.
</p>

<p>
<a href="https://github.com/joaotavora/eglot">https://github.com/joaotavora/eglot</a>
</p>

<p>
The Language Server Protocol (LSP) defines the protocol used between an editor
or IDE and a language server that provides language features like auto
complete, go to definition, find all references etc. The goal of the Language
Server Index Format (LSIF, pronounced like "else if") is to support rich code
navigation in development tools or a Web UI without needing a local copy of the
source code.
</p>

<p>
<a href="https://microsoft.github.io/language-server-protocol/">https://microsoft.github.io/language-server-protocol/</a>
</p>

<div class="org-src-container">
<pre class="src src-shell">pip install python-lsp-server
go install golang.org/x/tools/gopls@latest
npm install -g typescript-language-server typescript
npm install -g bash-language-server
npm install -g dockerfile-language-server-nodejs
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">eglot</span>
  <span style="color: #f78fe7;">:hook</span>
  (prog-mode . eglot-ensure)
  (shell-script-mode . eglot-ensure))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9156e0" class="outline-3">
<h3 id="orgf9156e0">Exec path from shell</h3>
<div class="outline-text-3" id="text-orgf9156e0">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">exec-path-from-shell</span> <span style="color: #f78fe7;">:defer</span> 10
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:commands</span> exec-path-from-shell-initialize
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">setq</span> exec-path-from-shell-check-startup-files 'nil)
  <span style="color: #f78fe7;">:config</span>
  (exec-path-from-shell-initialize)
  (exec-path-from-shell-copy-env <span style="color: #79a8ff;">"DEVPATH"</span>)
  (exec-path-from-shell-copy-env <span style="color: #79a8ff;">"PYTHONPATH"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f05923" class="outline-3">
<h3 id="org2f05923">Flycheck</h3>
<div class="outline-text-3" id="text-org2f05923">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">flycheck</span>
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:diminish</span> flycheck-mode
  <span style="color: #f78fe7;">:config</span>
  (flycheck-add-mode 'javascript-eslint 'web-mode)
  <span style="color: #f78fe7;">:hook</span>
  (prog-mode . flycheck-mode)
  (shell-script-mode . flycheck-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org82f09cc" class="outline-3">
<h3 id="org82f09cc">Git</h3>
<div class="outline-text-3" id="text-org82f09cc">
</div>
<div id="outline-container-org8570d55" class="outline-4">
<h4 id="org8570d55">Gitlab CI</h4>
<div class="outline-text-4" id="text-org8570d55">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">gitlab-ci-mode</span>
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.gitlab-ci.yaml\\'"</span>
  <span style="color: #79a8ff;">"\\.gitlab-ci.yml\\'"</span>
  <span style="color: #f78fe7;">:hook</span>
  (yaml-mode . hs-minor-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c732d9" class="outline-4">
<h4 id="org9c732d9">Git Timemachine</h4>
<div class="outline-text-4" id="text-org9c732d9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">git-timemachine</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf7b8f6" class="outline-4">
<h4 id="orgbf7b8f6">Lazygit</h4>
<div class="outline-text-4" id="text-orgbf7b8f6">
<p>
Clone some or all of my projects on GitLab or GitHub via the magic of APIs and
Emacs' <code>completing-read</code>.
</p>

<p>
Get the source from <a href="https://gitlab.com/tslight/lazygit">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">lazygit</span> <span style="color: #f78fe7;">:ensure</span> nil
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:load-path</span> <span style="color: #79a8ff;">"~/src/lazygit.el"</span>
  <span style="color: #f78fe7;">:bind-keymap</span>
  (<span style="color: #79a8ff;">"C-c g"</span> . lazygit-map))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">lazygitlab</span> <span style="color: #f78fe7;">:ensure</span> nil
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:load-path</span> <span style="color: #79a8ff;">"~/src/lazygit.el"</span>
  <span style="color: #f78fe7;">:bind-keymap</span>
  (<span style="color: #79a8ff;">"C-c L"</span> . lazygitlab-map))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">lazygithub</span> <span style="color: #f78fe7;">:ensure</span> nil
  <span style="color: #f78fe7;">:unless</span> (eq system-type 'windows-nt)
  <span style="color: #f78fe7;">:load-path</span> <span style="color: #79a8ff;">"~/src/lazygit.el"</span>
  <span style="color: #f78fe7;">:bind-keymap</span>
  (<span style="color: #79a8ff;">"C-c H"</span> . lazygithub-map))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeeb7e36" class="outline-4">
<h4 id="orgeeb7e36">Magit</h4>
<div class="outline-text-4" id="text-orgeeb7e36">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">magit</span>
  <span style="color: #f78fe7;">:bind*</span>
  (<span style="color: #79a8ff;">"C-x g"</span> . magit-status)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">when</span> (eq system-type 'windows-nt)
    (<span style="color: #b6a0ff;">if</span> (file-readable-p <span style="color: #79a8ff;">"C:/Program Files/Git/bin/git.exe"</span>)
        (<span style="color: #b6a0ff;">setq</span> magit-git-executable <span style="color: #79a8ff;">"C:/Program Files/Git/bin/git.exe"</span>))
    (<span style="color: #b6a0ff;">when</span> (file-directory-p <span style="color: #79a8ff;">"C:/Program Files/Git/bin"</span>)
      (<span style="color: #b6a0ff;">setq</span> exec-path (add-to-list 'exec-path <span style="color: #79a8ff;">"C:/Program Files/Git/bin"</span>))
      (setenv <span style="color: #79a8ff;">"PATH"</span> (concat <span style="color: #79a8ff;">"C:\\Program Files\\Git\\bin;"</span> (getenv <span style="color: #79a8ff;">"PATH"</span>)))))
  (<span style="color: #b6a0ff;">setq</span> magit-clone-set-remote.pushDefault t)
  (<span style="color: #b6a0ff;">setq</span> magit-completing-read-function 'magit-builtin-completing-read))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">magit-repos</span> <span style="color: #f78fe7;">:ensure</span> nil
  <span style="color: #f78fe7;">:bind*</span> (<span style="color: #79a8ff;">"C-x C-g"</span> . magit-list-repositories)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">setq</span> magit-repository-directories `((<span style="color: #79a8ff;">"~/"</span> . 0)
                                       (<span style="color: #79a8ff;">"~/src"</span> . 10)
                                       (<span style="color: #79a8ff;">"~/oe-developers"</span> . 10)))
  (<span style="color: #b6a0ff;">setq</span> magit-repolist-columns
        '((<span style="color: #79a8ff;">"Flag"</span> 5 magit-repolist-column-flag ((<span style="color: #f78fe7;">:right-align</span> t) nil))
          (<span style="color: #79a8ff;">"Name"</span> 25 magit-repolist-column-ident nil)
          (<span style="color: #79a8ff;">"Version"</span> 25 magit-repolist-column-version nil)
          (<span style="color: #79a8ff;">"Pull"</span> 5 magit-repolist-column-unpulled-from-upstream ((<span style="color: #f78fe7;">:right-align</span> t) nil))
          (<span style="color: #79a8ff;">"Push"</span> 5 magit-repolist-column-unpushed-to-upstream ((<span style="color: #f78fe7;">:right-align</span> t) nil))
          (<span style="color: #79a8ff;">"Path"</span> 99 magit-repolist-column-path nil)))
  (<span style="color: #b6a0ff;">setq</span> magit-repolist-sort-key '(<span style="color: #79a8ff;">"Flag"</span> . t)))
</pre>
</div>

<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">forge</span> <span style="color: #f78fe7;">:unless</span> (equal system-type 'windows-nt) <span style="color: #f78fe7;">:after</span> magit)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd3a05bc" class="outline-3">
<h3 id="orgd3a05bc">Go mode</h3>
<div class="outline-text-3" id="text-orgd3a05bc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">go-mode</span>
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-go-indent</span> ()
    (<span style="color: #b6a0ff;">setq</span> indent-tabs-mode 1)
    (<span style="color: #b6a0ff;">setq</span> tab-width 2))
  <span style="color: #f78fe7;">:hook</span>
  (go-mode . ts-go-indent)
  (before-save . gofmt-before-save))
</pre>
</div>
</div>
</div>

<div id="outline-container-org773f407" class="outline-3">
<h3 id="org773f407">Hungry delete</h3>
<div class="outline-text-3" id="text-org773f407">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">hungry-delete</span> <span style="color: #f78fe7;">:defer</span> 6 <span style="color: #f78fe7;">:config</span> (global-hungry-delete-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org39c7c93" class="outline-3">
<h3 id="org39c7c93">JS2 mode</h3>
<div class="outline-text-3" id="text-org39c7c93">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">js2-mode</span>
  <span style="color: #f78fe7;">:hook</span>
  (js-mode . js2-minor-mode)
  (js2-mode . js2-imenu-extras-mode)
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.js\\'"</span>)

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">js2-refactor</span>
  <span style="color: #f78fe7;">:hook</span> (js2-mode . js2-refactor-mode)
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> js2-mode-map
              (<span style="color: #79a8ff;">"C-k"</span> . js2r-kill))
  <span style="color: #f78fe7;">:config</span> (js2r-add-keybindings-with-prefix <span style="color: #79a8ff;">"C-c C-j"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga618927" class="outline-3">
<h3 id="orga618927">JSON</h3>
<div class="outline-text-3" id="text-orga618927">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">json-mode</span>
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ts-json-mode-setup</span> ()
    (json-mode)
    (json-pretty-print (point-min) (point-max))
    (goto-char (point-min))
    (set-buffer-modified-p nil))
  (add-to-list 'auto-mode-alist
               '(<span style="color: #79a8ff;">"\\.json\\'"</span> . 'ts-json-mode-setup)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">json-navigator</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org2679f74" class="outline-3">
<h3 id="org2679f74">Markdown</h3>
<div class="outline-text-3" id="text-org2679f74">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">markdown-mode</span>
  <span style="color: #f78fe7;">:commands</span> (markdown-mode gfm-mode)
  <span style="color: #f78fe7;">:mode</span> ((<span style="color: #79a8ff;">"README\\.md\\'"</span> . gfm-mode)
         (<span style="color: #79a8ff;">"\\.md\\'"</span> . gfm-mode)
         (<span style="color: #79a8ff;">"\\.markdown\\'"</span> . gfm-mode))
  <span style="color: #f78fe7;">:init</span> (<span style="color: #b6a0ff;">setq</span> markdown-command <span style="color: #79a8ff;">"multimarkdown"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3119e6" class="outline-3">
<h3 id="orgb3119e6">Org</h3>
<div class="outline-text-3" id="text-orgb3119e6">
</div>
<div id="outline-container-org1dba6c6" class="outline-4">
<h4 id="org1dba6c6">htmlize</h4>
<div class="outline-text-4" id="text-org1dba6c6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">htmlize</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org17358c3" class="outline-3">
<h3 id="org17358c3">Powershell</h3>
<div class="outline-text-3" id="text-org17358c3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">powershell</span> <span style="color: #f78fe7;">:mode</span> ((<span style="color: #79a8ff;">"\\.ps1\\'"</span> . powershell-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org05db64e" class="outline-3">
<h3 id="org05db64e">Projectile</h3>
<div class="outline-text-3" id="text-org05db64e">
<p>
Don't tangle this block if <code>emacs-version</code> &gt; 28, as Emacs 28 has the this
functionality built in via <code>project.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">projectile</span> <span style="color: #f78fe7;">:diminish</span>
  <span style="color: #f78fe7;">:unless</span> (not (version&lt; emacs-version <span style="color: #79a8ff;">"28"</span>))
  <span style="color: #f78fe7;">:bind-keymap</span>
  (<span style="color: #79a8ff;">"C-x p"</span> . projectile-command-map)
  <span style="color: #f78fe7;">:config</span>
  (projectile-mode)
  <span style="color: #989898;">;; </span><span style="color: #989898;">(setq projectile-completion-system 'ivy)</span>
  (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">magit</span> nil t)
    (mapc #'projectile-add-known-project
          (mapcar #'file-name-as-directory (magit-list-repos)))
    <span style="color: #989898;">;; </span><span style="color: #989898;">Optionally write to persistent `</span><span style="color: #00bcff;">projectile-known-projects-file</span><span style="color: #989898;">'</span>
    (projectile-save-known-projects)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e9d172" class="outline-3">
<h3 id="org1e9d172">Restclient</h3>
<div class="outline-text-3" id="text-org1e9d172">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">restclient</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org82e6d30" class="outline-3">
<h3 id="org82e6d30">systemd</h3>
<div class="outline-text-3" id="text-org82e6d30">
<p>
Don't tangle this block if <code>system-type</code> is <code>windows-nt</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">systemd</span> <span style="color: #f78fe7;">:unless</span> (equal system-type 'windows-nt))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8938ec7" class="outline-3">
<h3 id="org8938ec7">Terraform</h3>
<div class="outline-text-3" id="text-org8938ec7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">terraform-mode</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org69726a1" class="outline-3">
<h3 id="org69726a1">Trashed</h3>
<div class="outline-text-3" id="text-org69726a1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">trashed</span> <span style="color: #f78fe7;">:bind</span> (<span style="color: #79a8ff;">"C-c f t"</span> . trashed))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd3404b" class="outline-3">
<h3 id="orgfd3404b">Web Mode</h3>
<div class="outline-text-3" id="text-orgfd3404b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">web-mode</span>
  <span style="color: #f78fe7;">:mode</span>
  <span style="color: #79a8ff;">"\\.phtml\\'"</span>
  <span style="color: #79a8ff;">"\\.tpl\\.php\\'"</span>
  <span style="color: #79a8ff;">"\\.[agj]sp\\'"</span>
  <span style="color: #79a8ff;">"\\.as[cp]x\\'"</span>
  <span style="color: #79a8ff;">"\\.erb\\'"</span>
  <span style="color: #79a8ff;">"\\.mustache\\'"</span>
  <span style="color: #79a8ff;">"\\.djhtml\\'"</span>
  <span style="color: #79a8ff;">"\\.html\\.twig\\'"</span>
  <span style="color: #79a8ff;">"\\.html?\\'"</span>
  <span style="color: #79a8ff;">"\\.php?\\'"</span>
  <span style="color: #79a8ff;">"\\.css?\\'"</span>
  <span style="color: #f78fe7;">:hook</span>
  (web-mode . js2-minor-mode)
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">setq</span> web-mode-content-type <span style="color: #79a8ff;">"jsx"</span>
        web-mode-enable-auto-quoting nil
        web-mode-code-indent-offset 2
        web-mode-markup-indent-offset 2
        web-mode-attr-indent-offset 2
        web-mode-css-indent-offset 2
        web-mode-code-indent-offset 2
        web-mode-enable-auto-pairing t
        web-mode-enable-css-colorization t
        web-mode-enable-block-face t
        web-mode-enable-part-face t
        web-mode-enable-comment-keywords t)
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-args"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-calls"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-concats"</span> . nil))
  (add-to-list 'web-mode-indentation-params '(<span style="color: #79a8ff;">"lineup-ternary"</span> . nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab63bb0" class="outline-3">
<h3 id="orgab63bb0">Which Key</h3>
<div class="outline-text-3" id="text-orgab63bb0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">which-key</span> <span style="color: #f78fe7;">:defer</span> 5 <span style="color: #f78fe7;">:config</span> (which-key-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd55ee51" class="outline-3">
<h3 id="orgd55ee51">Writeable Grep</h3>
<div class="outline-text-3" id="text-orgd55ee51">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">wgrep</span> <span style="color: #f78fe7;">:commands</span> wgrep
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> grep-mode-map
              (<span style="color: #79a8ff;">"e"</span> . wgrep-change-to-wgrep-mode)
              (<span style="color: #79a8ff;">"C-x C-q"</span> . wgrep-change-to-wgrep-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5820145" class="outline-3">
<h3 id="org5820145">YAML</h3>
<div class="outline-text-3" id="text-org5820145">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">highlight-indentation</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yaml-mode</span>
  <span style="color: #f78fe7;">:hook</span>
  (yaml-mode . highlight-indentation-mode)
  (yaml-mode . hs-minor-mode)
  (yaml-mode . display-line-numbers-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f13247" class="outline-3">
<h3 id="org4f13247">Yasnippet</h3>
<div class="outline-text-3" id="text-org4f13247">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet</span> <span style="color: #f78fe7;">:hook</span> (prog-mode . yas-minor-mode))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet-classic-snippets</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yasnippet-snippets</span>)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Toby Slight</p>
<p class="date">Created: 2023-01-09 Mon 01:09</p>
</div>
</body>
</html>