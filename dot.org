#+TITLE: *NIX AGNOSTIC CONFIGURATION (dot)FILES
#+PROPERTY: header-args :cache yes
#+PROPERTY: header-args+ :mkdirp yes
#+PROPERTY: header-args+ :padline no
#+PROPERTY: header-args+ :results silent
#+PROPERTY: header-args+ :tangle-mode (identity #o644)

These blocks/this file is suitable for tangling on any Unix-like system.

#+begin_src emacs-lisp :tangle no
  (org-babel-tangle)
#+end_src

* GIT
** CONFIG
#+BEGIN_SRC conf :tangle ~/.config/git/config
  [color]
  ui = true
  [push]
  default = current
  [alias]
  a = add
  b = branch
  c = commit
  cl = clone
  cm = commit -m
  co = checkout
  l = log --graph --decorate --pretty=oneline --abbrev-commit
  m = merge
  P = pull
  p = push
  rb = rebase
  rv = revert
  r = remote
  s = status
  [core]
  autocrlf = false
  whitespace = trailing-space,space-before-tab
  [pull]
  rebase = false
  [init]
  defaultBranch = main
  [user]
  name = tslight
  email = tslight@pm.com
#+END_SRC
** IGNORE
#+BEGIN_SRC conf :tangle ~/.config/git/ignore
  .DS_Store
  .localized
  desktop.ini
  ,*.swp
  ,*~
  #*#
  #*
  TAGS
  tags
#+END_SRC
* KARABINER

#+BEGIN_SRC javascript :tangle (if (eq system-type 'darwin) "~/.config/karabiner/karabiner.json" "no")
  {
    "profiles": [
      {
        "complex_modifications": {
          "rules": [
            {
              "description": "PC-Style Browser open location (Ctrl+L)",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^org\\.mozilla\\.firefox$",
                        "^org\\.mozilla\\.firefoxdeveloperedition$",
                        "^org\\.mozilla\\.nightly$",
                        "^com\\.microsoft\\.Edge",
                        "^com\\.microsoft\\.edgemac",
                        "^com\\.google\\.Chrome$",
                        "^com\\.brave\\.Browser$",
                        "^com\\.apple\\.Safari$"
                      ],
                      "type": "frontmost_application_if"
                    }
                  ],
                  "from": {
                    "key_code": "l",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "l",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style Close Window",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "w",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "w",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style Redo",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "y",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "z",
                      "modifiers": ["left_command", "left_shift"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style Undo",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "z",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "z",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style New Tab",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "t",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "t",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style Reload(F5, Ctrl+R)",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "r",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "r",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                },
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "f5",
                    "modifiers": { "optional": ["any"] }
                  },
                  "to": [
                    {
                      "key_code": "r",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "PC-Style Copy/Paste/Cut",
              "manipulators": [
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "c",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "c",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                },
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "v",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "v",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                },
                {
                  "conditions": [
                    {
                      "bundle_identifiers": [
                        "^com\\.microsoft\\.rdc$",
                        "^com\\.microsoft\\.rdc\\.",
                        "^net\\.sf\\.cord$",
                        "^com\\.thinomenon\\.RemoteDesktopConnection$",
                        "^com\\.itap-mobile\\.qmote$",
                        "^com\\.nulana\\.remotixmac$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                        "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                        "^com\\.teamviewer\\.TeamViewer$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.2X\\.Client\\.Mac$",
                        "^com\\.OpenText\\.Exceed-TurboX-Client$",
                        "^com\\.realvnc\\.vncviewer$",
                        "^com\\.citrix\\.receiver\\.icaviewer",
                        "^com\\.vmware\\.fusion$",
                        "^com\\.vmware\\.horizon$",
                        "^com\\.vmware\\.view$",
                        "^com\\.parallels\\.desktop$",
                        "^com\\.parallels\\.vm$",
                        "^com\\.parallels\\.desktop\\.console$",
                        "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                        "^com\\.citrix\\.XenAppViewer$",
                        "^com\\.vmware\\.proxyApp\\.",
                        "^com\\.parallels\\.winapp\\.",
                        "^com\\.utmapp\\.UTM$",
                        "^com\\.apple\\.Terminal$",
                        "^com\\.googlecode\\.iterm2$",
                        "^co\\.zeit\\.hyperterm$",
                        "^co\\.zeit\\.hyper$",
                        "^io\\.alacritty$",
                        "^org\\.alacritty$",
                        "^net\\.kovidgoyal\\.kitty$",
                        "^com\\.mitchellh\\.ghostty$",
                        "^org\\.gnu\\.Emacs$",
                        "^org\\.gnu\\.AquamacsEmacs$",
                        "^org\\.gnu\\.Aquamacs$",
                        "^org\\.pqrs\\.unknownapp\\.conkeror$"
                      ],
                      "type": "frontmost_application_unless"
                    }
                  ],
                  "from": {
                    "key_code": "x",
                    "modifiers": {
                      "mandatory": ["control"],
                      "optional": ["any"]
                    }
                  },
                  "to": [
                    {
                      "key_code": "x",
                      "modifiers": ["left_command"]
                    }
                  ],
                  "type": "basic"
                }
              ]
            },
            {
              "description": "Left Arrow -> Command when held",
              "manipulators": [
                {
                  "from": {
                    "key_code": "left_arrow",
                    "modifiers": { "optional": ["any"] }
                  },
                  "to": [{ "key_code": "left_command" }],
                  "to_if_alone": [{ "key_code": "left_arrow" }],
                  "type": "basic"
                }
              ]
            }
          ]
        },
        "name": "Default profile",
        "parameters": { "delay_milliseconds_before_open_device": 1200 },
        "selected": true,
        "simple_modifications": [
          {
            "from": { "key_code": "caps_lock" },
            "to": [{ "key_code": "escape" }]
          },
          {
            "from": { "key_code": "escape" },
            "to": [{ "key_code": "caps_lock" }]
          },
          {
            "from": { "key_code": "left_command" },
            "to": [{ "key_code": "left_control" }]
          },
          {
            "from": { "key_code": "left_control" },
            "to": [{ "key_code": "left_command" }]
          },
          {
            "from": { "key_code": "right_command" },
            "to": [{ "key_code": "right_control" }]
          }
        ],
        "virtual_hid_keyboard": { "keyboard_type_v2": "iso" }
      }
    ]
  }
#+END_SRC

* KITTY
#+BEGIN_SRC conf :tangle ~/.config/kitty/kitty.conf
  font_size 12.0
  scrollback_lines 10000
  copy_on_select yes
  strip_trailing_spaces smart
  terminal_select_modifiers ctrl
  hide_window_decorations yes
  clipboard_control write-clipboard write-primary no-append
  # term xterm-kitty
  term xterm-256color
  macos_option_as_alt yes
  map ctrl+Tab        next_tab
  map kitty_mod+Tab   previous_tab
  map ctrl+Escape goto_tab -1
  map ctrl+equal      change_font_size all +2.0
  map ctrl+minus      change_font_size all -2.0
  map kitty_mod+equal change_font_size all 0
#+END_SRC
* SHELLS
** ALIASES
#+BEGIN_SRC sh :tangle ~/.aliases
  case "$OSTYPE" in
      darwin*)
          alias bye="sudo shutdown -h now"
          alias cpu="sysctl -n machdep.cpu.brand_string"
          alias enabled_services='sudo launchctl list'
          alias grep='grep --color=always'
          alias l='ls -Gh'
          alias ll='ls -laGh'
          alias lsblk='diskutil list'
          alias rb='sudo reboot'
          alias srch='sudo /usr/libexec/locate.updatedb && locate -i'
          command -v brew >/dev/null 2>&1 && alias update='brew update && brew upgrade --greedy && softwareupdate -i --all'
          command -v osx-cpu-temp >/dev/null 2>&1 && alias temp='osx-cpu-temp -c -g -f'
          alias zzz='pmset sleepnow'
          alias kanataStart="sudo launchctl load /Library/LaunchDaemons/com.example.kanata.plist && sudo launchctl start com.example.kanata"
          alias kanataStop="sudo launchctl stop com.example.kanata && sudo launchctl unload /Library/LaunchDaemons/com.example.kanata.plist"
          ;;
      freebsd*)
          alias bye="sudo shutdown -p now"
          alias rb='sudo reboot'
          alias l='ls -Gh'
          alias ll='ls -laGh'
          alias grep='grep --color=always'
          alias lsblk='geom disk list'
          alias update='sudo pkg update && sudo pkg upgrade'
          ;;
      linux*)
          alias bye="systemctl poweroff"
          alias powertune='sudo powertop --auto-tune'
          alias enabled_services='systemctl list-unit-files --state=enabled'
          alias ipa="ip -brief -color -pretty address | grep -v lo | grep UP"
          alias ls='ls --color=always'
          alias l='ls -F'
          alias la='ls -aF'
          alias ll='ls -Fhl'
          alias lla='ls -aFhl'
          alias rb='systemctl reboot'
          alias srch='sudo updatedb && locate -i'
          alias zzz='systemctl suspend'
          alias ZZZ='systemctl hibernate'
          if command -v lsb_release &> /dev/null; then
              case "$(lsb_release -is)" in
                  Debian)
                      alias update="sudo apt -t $(lsb_release -cs)-backports update -y && sudo apt -t $(lsb_release -cs)-backports dist-upgrade -y"
                      alias install="sudo apt -t $(lsb_release -cs)-backports -y"
                      ;;
                  Ubuntu)
                      alias update="sudo apt update -y && sudo apt dist-upgrade -y"
                      alias install="sudo apt install -y"
                      ;;
                  Debian|Ubuntu)
                      alias clean="sudo apt autoremove -y && sudo apt autoclean -y && sudo apt clean -y"
                      alias purge="sudo apt purge -y"
                      alias bat="batcat"
                      ;;
                  CentOS|Fedora)
                      alias clean="sudo dnf autoremove"
                      alias update="sudo dnf upgrade"
                      alias install="sudo dnf install"
                      alias remove="sudo dnf remove"
                      ;;
                  Arch*|Manjaro*)
                      alias clean="sudo pacman -Rcns $(pacman -Qtdq)"
                      alias update="sudo pacman --sync --refresh --sysupgrade"
                      alias install="sudo pacman --sync --needed"
                      alias remove="sudo pacman --remove --nosave --recursive --cascade"
                      ;;
              esac
          fi
          ;;
      netbsd*)
          alias battery='envstat -d acpibat0'
          alias bye='shutdown -p now'
          alias l='ls -F'
          alias l='ls -F'
          alias la='ls -aF'
          alias ll='ls -Fhl'
          alias lla='ls -aFhl'
          alias pkg='pkgin'
          alias spkg='sudo pkgin'
          alias rb='shutdown -r now'
          alias zzz='sudo sysctl -w hw.acpi.sleep.state=3'
          ;;
      openbsd*)
          alias battery='sysctl -a | grep bat'
          alias bye='shutdown -p now'
          alias killall='zap -f'
          alias l='ls -F'
          alias la='ls -aF'
          alias ll='ls -Fhl'
          alias lla='ls -aFhl'
          alias lock='lock -np' # no timeout & use user's password
          alias pkg_search='pkg_info -Q'
          alias sensors='sysctl hw.sensors'
          alias srch='doas /usr/libexec/locate.updatedb && locate -i'
          alias temp='sysctl hw.sensors | egrep -i "fan|temp"'
          ;;
  esac

  alias add="awk '{s+=\$1} END {print s}'" # adds columns of numbers via stdin
  alias cp='cp -i'
  alias d='docker'
  alias d2d='for f in *; do mv "$f" "${f// - /-}"; done' # convert ' - ' to '-'
  alias df='df -h'
  alias dh='dirs -v'
  alias du='du -h'
  alias fuck='sudo $(history -p \!\!)'
  alias h='history'
  alias ha='history 0'
  alias j='jobs -l'
  alias lc='grep -cv "^$"' # line count ignoring empty lines
  alias m='make'
  alias mc='make clean'
  alias mi='make install clean'
  alias mkdir='mkdir -p'
  alias mv='mv -i'
  alias p='pwd'
  alias path="echo "$PATH" | tr -s : \\\n"
  alias pg='pgrep -ail'
  alias ping4='ping -c 4'
  alias pingg='ping -c 4 8.8.8.8'
  alias pip='pip3'
  alias python='python3'
  alias py='python3'
  alias rm='rm -i'
  alias s2us='for f in *; do mv "$f" "${f// /_}"; done' # convert ' ' to '_'
  alias sshaa='eval $(ssh-agent) && ssh-add'
  alias uc='grep -Ev "^#|^\s+#|^\t+#|^$"' # uncomment
  alias up='uptime'

  command -v bat >/dev/null 2>&1 && alias cat='bat'
  command -v colordiff >/dev/null 2>&1 && alias diff='colordiff'
  command -v emacs &>/dev/null && alias e='emacs -nw'
  command -v emacsclient &>/dev/null && alias ec='emacsclient -c -a "" -nw'
  command -v exa &>/dev/null && \
      { \
        alias l='exa'; \
        alias la='exa --all'; \
        alias ll='exa --long --group --git'; \
      }
  command -v git &>/dev/null && alias g='git'
  command -v sudo &>/dev/null && alias se='sudoedit'

  if command -v tmux &>/dev/null; then
      # https://github.com/areina/stumpwm.d/blob/master/applications.lisp
      tmux_create_or_attach () {
          [ -z "$TMUX" ] && \
              { tmux -q has-session && tmux attach -d || tmux -u; } || \
                  { tmux new-session -d \; choose-tree -Zs; }
      }
      alias t='tmux_create_or_attach'
  fi

  if command -v vim &>/dev/null; then
      alias vi="vim"
  elif command -v nvim &> /dev/null; then
      alias vi="nvim"
  elif command -v elvis &> /dev/null; then
      alias vi="elvis"
  fi

  if command -v kubectl &>/dev/null; then
      alias k="kubectl"
      alias kl="kubectl logs"
      alias kx="kubectl exec --stdin --tty"
      complete -F __start_kubectl k
      complete -F __start_kubectl kl
      complete -F __start_kubectl kx
  fi
#+END_SRC
** BASH
*** BASH PROFILE
#+BEGIN_SRC sh :tangle ~/.bash_profile
  #shellcheck disable=SC2155,SC1090,SC2093
  [ -f "$HOME"/etc/profile ] && source "$HOME"/etc/profile
  [ -f "$HOME"/.profile ] && source "$HOME"/.profile

  export BLOCK_SIZE=human-readable
  export EDITOR="emacsclient -c -nw"
  export ALTERNATE_EDITOR=""
  export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'
  export PAGER="$(type -P less || type -P more)"
  export GTK_THEME=Emacs

  # Colorfull manpages (works with less as a pager)
  # https://www.tecmint.com/view-colored-man-pages-in-linux/
  export LESS_TERMCAP_mb=$'\e[1;32m'
  export LESS_TERMCAP_md=$'\e[1;32m'
  export LESS_TERMCAP_me=$'\e[0m'
  export LESS_TERMCAP_se=$'\e[0m'
  export LESS_TERMCAP_so=$'\e[01;33m'
  export LESS_TERMCAP_ue=$'\e[0m'
  export LESS_TERMCAP_us=$'\e[1;4;31m'

  PATH="${HOME}/bin:${PATH}"
  PATH="${HOME}/.local/bin:${PATH}"

  [ -d "$HOME/go" ] && export GOPATH="$HOME/go"
  [ -d "/usr/local/go" ] && export GOROOT="/usr/local/go"
  [ -n "$GOROOT" ] && PATH="$GOROOT/bin:${PATH}"
  [ -n "$GOPATH" ] && PATH="$GOPATH/bin:${PATH}"
  export PATH

  MANPATH="${HOME}/.local/share/man:${MANPATH}"
  MANPATH="${HOME}/opt/share/man:${MANPATH}"
  export MANPATH

  umask 022

  [ -f "$HOME"/.bashrc ] && source "$HOME"/.bashrc
#+END_SRC

*** BASHRC
#+BEGIN_SRC sh :tangle ~/.bashrc
  export HISTCONTROL=ignoreboth:erasedups
  export HISTFILESIZE=999999
  export HISTSIZE=999999
  export HISTIGNORE="h:history:[bf]g:exit:^ll$:^lla$:^ls$"
  export HISTTIMEFORMAT="%h %d %H:%M:%S "

  [ -z "$PS1" ] && return # If not running interactively, don't do anything
  [ -f /etc/bash.bashrc ] && source /etc/bash.bashrc
  [ -f /usr/share/bash-completion/bash_completion ] && \
      source /usr/share/bash-completion/bash_completion

  # https://bugzilla.redhat.com/show_bug.cgi?id=878428
  [ -f  /usr/share/git-core/contrib/completion/git-prompt.sh ] && \
      . /usr/share/git-core/contrib/completion/git-prompt.sh
  # https://stackoverflow.com/a/17508424
  [ -f  /usr/share/git/completion/git-prompt.sh ] && \
      . /usr/share/git/completion/git-prompt.sh

  export RED="\\[\\e[1;31m\\]"
  export GRN="\\[\\e[1;32m\\]"
  export YEL="\\[\\e[1;33m\\]"
  export MAG="\\[\\e[1;35m\\]"
  export CYN="\\[\\e[1;36m\\]"
  export OFF="\\[\\e[0m\\]"

  export GIT_PS1_SHOWDIRTYSTATE=yes
  export GIT_PS1_SHOWSTASHSTATE=yes
  export GIT_PS1_SHOWUNTRACKEDFILES=true
  export GIT_PS1_SHOWUPSTREAM=yes

  if [ "$(id -u)" -eq 0 ]; then
      export PS1="${RED}\\u${YEL}@${RED}\\h${YEL}:${MAG}\\W \\n${YEL}\$? \$ ${OFF}"
  else
      export PS1="${GRN}\\u${YEL}@${GRN}\\h${YEL}:${MAG}\\W \\n${YEL}\$? \$ ${OFF}"
  fi

  if [[ "${BASH_VERSINFO[0]}" -ge 4 ]]; then
      shopt -s autocd       # cd without cd. who knew?
      shopt -s checkjobs    # don't exit if we still have jobs running
      shopt -s dirspell     # correct directory spelling
      shopt -s globstar     # pattern match ** in filename context
  fi

  shopt -s cdspell      # correct minor cd spelling errors
  shopt -s checkwinsize # update lines and columns when resizing
  shopt -s cmdhist      # save multi line cmds as one entry
  shopt -s dotglob      # show dotfiles when expanding
  shopt -s extglob      # enable extended pattern matching
  shopt -s histappend   # don't overwrite history file on exit
  shopt -s nocaseglob   # match filename case insensitively
  complete -cf sudo     # completion after sudo
  complete -cf man      # same, but for man

  [ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

  stty -ixon # disable ctrl-s/q flow control

  [ -f "$HOME"/.aliases ] && source "$HOME"/.aliases
  [ -f "$HOME"/.functions ] && source "$HOME"/.functions

  if command -v kubectl &>/dev/null; then
      source <(kubectl completion bash)
  fi
#+END_SRC
*** INPUTRC
#+BEGIN_SRC sh :tangle ~/.inputrc
  $include /etc/inputrc

  set bell-style none
  set show-all-if-ambiguous on
  set show-all-if-unmodified on
  set completion-ignore-case on

  #menu-complete-display-prefix on
  # TAB: menu-complete
  # "\e[Z": menu-complete-backward

  "\en": history-search-forward
  "\ep": history-search-backward
  "\em": "\C-a\eb\ed\C-y\e#man \C-y\C-m\C-p\C-p\C-a\C-d\C-e"
  "\eh": "\C-a\eb\ed\C-y\e#man \C-y\C-m\C-p\C-p\C-a\C-d\C-e"

  set keyseq-timeout 1200
  set colored-stats on
  set colored-completion-prefix on
#+END_SRC

** FUNCTIONS
#+BEGIN_SRC sh :tangle ~/.functions
  if echo "$0" | grep -q bash; then
      if [ -d "$HOME"/bin/lib/bash ]; then
          for f in "$HOME"/bin/lib/bash/*; do
              source "$f"
          done
      fi
  fi

  ansi() {
      for i in {30..38}; do
          echo -e "\033[0;${i}m Normal: (0;$i); \033[1;${i}m Light: (1;$i)"
      done
  }

  bzipr () {
      for dir in "$1"; do
          base=$(basename "$dir")
          tar cvjf "${base}.tar.bz2" "$dir"
      done
  }

  # cd () {
  #     builtin cd "$@"
  #     if [ -f "Pipfile" ] ; then
  #         pipenv shell
  #     fi
  # }

  ddpp() {
      sudo dd if="$1" of=/dev/"$2" conv=fsync status=progress bs=4M && sudo sync
  }

  cdot () {
      for x in $(seq "$1"); do
          cd ..
      done
  }

  calc () {
      echo "scale=3;$@" | bc -l
  }

  cheat () {
      curl cheat.sh/${1:-cheat};
  }

  countdown() {
      clear
      for i in $(seq "${1-10}" -1 0); do
          printf "%04d\n" "${i}" |figlet |lolcat
          sleep 1
          clear
      done
      play -q -n synth .8 sine 4100 fade q 0.1 .3 0.1 repeat 3
  }

  dos2unix_recursive () {
      find "$1" -type f\
           -exec grep -Ilq "" {} \; \
           -exec dos2unix {} \;
  }

  dusort () {
      # d1 = depth 1, sort -hr = human-readable & reverse
      du -hd1 "$1" | sort -hr
  }

  emojis() {
      for (( x = 2600; x <= 2700; x++ )); do
          echo -n -e " \u${x}"
      done
      echo
  }

  f() {
      find . -iname "*$1*" -exec ls -1rt "{}" +
  } 2>/dev/null

  fixperms () {
      local path=$(eval echo "${3//>}") # santize input so find doesn't break on spaces or ~
      local -i fileperms="$2" dirperms="$1"
      find "$path" -type d -exec chmod "$dirperms" {} \;
      find "$path" -type f -exec chmod "$fileperms" {} \;
  }

  memsum() {
      ps -eo size,pid,user,command --sort -size | \
          awk '{ hr=$1/1024 ; printf("%13.2f Mb ",hr) } { for ( x=4 ; x<=NF ; x++ ) { printf("%s ",$x) } print "" }' | \
          cut -d "" -f2 | \
          cut -d "-" -f1| \
          grep "${1}" | grep -v grep
  }

  memusage() {
      #Report Total Used and Available mem in human readable format
      total=$(head -1 /proc/meminfo |awk '{print $2}')
      avail=$(head -2 /proc/meminfo |tail -1 |awk '{print $2}')
      used=$(( total - avail ))
      totalMB=$(( total / 1024 ))
      availMB=$(( avail / 1024 ))
      usedMB=$(( used / 1024 ))
      echo -ne "${totalMB} MB total, ${usedMB} MB used, ${availMB} MB free.\n"
  }

  mkcd () {
      mkdir -p "$1" && cd "$1"
  }

  mtail () {
      trap 'kill $(jobs -p)' EXIT
      for file in "$@"; do
          tail -f "$file" &
      done
      wait
  }

  peek () {
      tmux split-window -h -p 48 "$PAGER" "$@" || exit
  }

  pgrepkill () {
      if pid=($(pgrep -i "$1")); then
          for p in "${pid[@]}"; do
              if ps -p "$p" &> /dev/null; then
                  echo "Killing $1 process: $p"
                  sudo kill -9 "$p"
              fi
          done
      else
          echo "No $1 processes found."
      fi
  }

  psee () {
      tput setaf 3
      printf "\nYou should probably be using $(tput setaf 6)pgrep -ail$(tput setaf 3)...\n\n"
      tput sgr0
      local char="${1:0:1}" rest="${1:1}"
      ps aux | grep -i "[$char]$rest" | awk '{printf ("%s %i %s %s\n", $1, $2, $9, $11)}'
      echo
  }

  rgrep() {
      # https://stackoverflow.com/questions/16956810/how-do-i-find-all-files-containing-specific-text-on-linux
      grep -rnw "${2}" -e "${1}"
  }

  rwc() {
      find "$1" -iname "$2" -exec wc -l {} +
  }

  rssget () {
      curl "$1" | grep -E "http.*\.$2" | sed "s/.*\(http.*\.$2\).*/\1/" | xargs wget -nc
  }

  tv() {
      tmux new-session \; \
           split-window -v ranger\; \
           split-window -v htop\; \
           select-pane -t 1 \; \
           split-window -v pwsh\; \
           split-window -h ipython\; \
           select-pane -t 1 \; \
           split-window -h\;
  }

  th() {
      tmux new-session \; \
           split-window -h ipython3\; \
           split-window -v\; \
           select-pane -t 1 \; \
           split-window -v node\; \
           new-window -n fm ranger\; \
           select-window -t 1\; \
           select-pane -t 1
  }

  weather() {
      # https://twitter.com/igor_chubin # Try wttr moon
      curl "https://wttr.in/${1:-London}"
  }

  moon() {
      # https://twitter.com/igor_chubin # Try wttr moon
      curl "https://wttr.in/${1:-moon}"
  }
#+END_SRC
** ZSH
*** ZSHENV
#+BEGIN_SRC sh :tangle ~/.zshenv
  export HISTFILE=$HOME/.zsh_history
  export HISTSIZE=100000
  export SAVEHIST=$HISTSIZE
  export EDITOR="emacsclient -nw -c"
  export ALTERNATE_EDITOR=""
  export PAGER=less
  export GTK_THEME=Emacs
  export BLOCK_SIZE=human-readable
  export DIRSTACKSIZE=12
  export KEYTIMEOUT=1
  export EMPLOYER="oe-developers"
  export DEVPATH="$HOME/$EMPLOYER"

  WORDCHARS=${WORDCHARS/\-} # adds - to word delimiter
  WORDCHARS=${WORDCHARS/\.} # adds . to word delimiter
  WORDCHARS=${WORDCHARS/\/} # adds / to word delimiter
  WORDCHARS=${WORDCHARS/\\} # adds \ to word delimiter
  WORDCHARS=${WORDCHARS/\=} # adds = to word delimiter
  WORDCHARS=${WORDCHARS/\_} # adds _ to word delimiter
  export WORDCHARS

  [ -d "$HOME/go" ] && export GOPATH="$HOME/go"
  command -v brew &> /dev/null && export GOROOT="$(brew --prefix golang)/libexec"
  [ -d "/usr/local/go" ] && export GOROOT="/usr/local/go"

  typeset -U CDPATH cdpath
  # https://superuser.com/a/1054825
  cdpath=(
      $HOME
      $HOME/src
      "$HOME/$EMPLOYER"
      $cdpath
  )

  typeset -U PATH path
  path=(
      $HOME/bin
      $HOME/.local/bin
      $GOPATH/bin
      $GOROOT/bin
      $path
  )

  if [[ "$(uname)" == "Darwin" ]]; then
      if [[ "$(arch)" == "i386" ]]; then
          alias ibrew='arch -x86_64 /usr/local/homebrew/bin/brew'
          if [[ -d /usr/local/homebrew/bin ]]; then
              path=(/usr/local/homebrew/bin $path)
          fi
          if [[ -d /usr/local/homebrew/Caskroom/miniconda/base/bin ]]; then
              path=(/usr/local/homebrew/Caskroom/miniconda/base/bin $path)
          fi
      elif [[ "$(arch)" == "arm64" &&  -d  /opt/homebrew/Caskroom/miniconda/base/bin ]]; then
          path=(/opt/homebrew/Caskroom/miniconda/base/bin $path)
      fi
  fi

  export PATH

  umask 022
#+END_SRC

*** ZSHRC
#+BEGIN_SRC sh :tangle ~/.zshrc
  zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*' # case insensitivity
  zstyle ':completion:*' menu select # arrow select
  zstyle ':completion:*' rehash true # auto add new commands
  zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;32'
  zstyle ':completion:*:default' list-colors "${(@s.:.)LS_COLORS}"
  zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,user,%cpu,tty,cputime,cmd'
  zstyle ':completion:*:make:*:targets' call-command true # make target completions
  zstyle ':completion:*:make::' tag-order targets variables # show targets before variables
  zstyle ':completion:*:processes' command 'ps -au $USER'
  zstyle ':completion:*:processes-names' command 'ps -e -o comm='

  autoload -Uz compinit && compinit -u      # completion library
  autoload -Uz bashcompinit && bashcompinit # bash completions too please
  autoload -Uz colors && colors             # colour library
  autoload -Uz zmv                          # batch rename library
  # autoload -Uz promptinit && promptinit && prompt vcs

  setopt auto_name_dirs         # absolute name becomes dir
  setopt autocd                 # cd without typing cd. omg.
  setopt chaselinks             # follow links in cd.
  setopt complete_in_word       # complete unique matches
  setopt correct                # allow me to be slack
  setopt extended_glob          # set awesome to max
  setopt hist_expire_dups_first # trim duplicates from file first
  setopt hist_find_no_dups      # when searching don't find duplicates
  setopt hist_ignore_all_dups   # don't store duplicates
  setopt hist_ignore_space      # don't store cmds that start with a space
  setopt hist_no_store          # don't store history cmds
  setopt inc_append_history     # immediately write cmd after enter
  setopt longlistjobs           # display PID when suspending processes as well
  setopt list_ambiguous         # complete until it gets ambiguous
  setopt magic_equal_subst      # expand inside equals
  setopt nobeep                 # stop harassing me
  setopt nonomatch              # try to avoid the 'zsh: no matches found...'
  setopt prompt_subst           # param expansion, cmd substitution, &  math
  unsetopt flow_control         # stty ixon doesn't work, but this does.
  unsetopt completealiases      # supposedly allows aliases to be completed, but
  # I turn it off because it breaks mine..
  ttyctl -f                     # avoid having to manually reset the terminal

  # bindkey -v # vi style bindings
  exit_zsh() { exit }
  zle -N exit_zsh
  # bindkey '^D' exit_zsh

  bindkey '^[[Z' reverse-menu-complete # shift-tab cycles backwards
  bindkey \^U backward-kill-line # ctrl-u (whole-line by default)

  # Alt-n & Alt-p to search history using current input
  autoload -Uz history-search-end
  zle -N history-beginning-search-backward-end history-search-end
  zle -N history-beginning-search-forward-end history-search-end
  bindkey '\ep' history-beginning-search-backward-end
  bindkey '\en' history-beginning-search-forward-end

  # Arrow keys to do history search
  autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
  zle -N up-line-or-beginning-search
  zle -N down-line-or-beginning-search
  bindkey "^[[A" up-line-or-beginning-search
  bindkey "^[[B" down-line-or-beginning-search

  [[ $TERM == "dumb" ]] && unsetopt zle && PS1='$ ' # emacs tramp workaround

  # Directory shortcuts
  hash -d src=$HOME/src
  hash -d wrk="$HOME/$EMPLOYER"

  command -v kubectl &>/dev/null && source <(kubectl completion zsh)

  prompt_vcs_setup() {
      zstyle ':vcs_info:*' enable git svn
      zstyle ':vcs_info:git:*' formats '%B%F{cyan}(%b)%f'

      autoload -Uz vcs_info

      precmd_vcs_info() { vcs_info; }
      precmd_functions+=( precmd_vcs_info )

      setopt prompt_subst

      local user_at_host="%B%F{green}%n%B%F{yellow}@%B%F{green}%m%b%f"
      local cwd="%B%F{yellow}:%F{magenta}%1~%b%f"
      local git_branch=\$vcs_info_msg_0_
      local exit_status="%B%(?.%F{yellow}.%F{red}%?)"
      local priv="%B%F{yellow}%#%b%f"

      PS1="${user_at_host}${cwd} ${git_branch}"$'\n'"${exit_status} ${priv} "
      PS2="> "

      prompt_opts=( cr percent )
  }

  prompt_vcs_setup "$@"

  [ -f $HOME/.aliases ] && . $HOME/.aliases
  [ -f $HOME/.functions ] && . $HOME/.functions
#+END_SRC
* TMUX

#+BEGIN_SRC conf :tangle ~/.tmux.conf
  ## RE-BIND PREFIX
  # set -g prefix C-j
  # unbind-key C-b
  # bind C-j send-prefix

  set -g allow-passthrough on
  set -ga update-environment TERM
  set -ga update-environment TERM_PROGRAM
  ## MISC
  set -g base-index 1
  set -g pane-base-index 1
  set -g history-limit 42420
  set -g renumber-windows on
  set -g set-titles on
  set -g set-titles-string "#T: [#S] #I: #W: #P"
  set -g display-panes-time 4000 # I'm slow and indecisive!
  # set -g default-terminal "screen-256color"
  set -g escape-time 0 # default is 500ms which feels like forever..
  #set -g mode-keys vi

  ## STATUS BAR
  set-option -g status-interval 5
  set-option -g automatic-rename on
  set-option -g automatic-rename-format '#{b:pane_current_path}'

  ## COLORS
  set -g message-style bg=default,fg=brightgreen
  set -g mode-style bg=default,fg=brightgreen
  set -g status-style bg=default,fg=brightgreen
  set -g window-status-style bold
  set -g window-status-current-style underscore,fg=brightyellow

  ## STATUS
  set -g status-interval 60
  set -g status-left "[#S] "
  set -g status-left-length 50
  set -g status-right "#(cat /sys/class/power_supply/BAT0/capacity)% %H:%M %a %d/%m"
  set -g status-right-length 50
  set -g window-status-current-format "#I: #W.#P*"

  ## MOUSE
  set -g mouse on
  bind -n MouseDown2Status copy-mode

  ## KEYS
  bind C-l switch-client -l
  bind C-c new-session
  bind C-r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"
  bind -n M-Up select-pane -U
  bind -n M-Down select-pane -D
  bind -n M-Left select-pane -L
  bind -n M-Right select-pane -R
  bind -n C-Up resize-pane -U 5
  bind -n C-Down resize-pane -D 5
  bind -n C-Left resize-pane -L 5
  bind -n C-Right resize-pane -R 5
  # copy to system clipboard using xsel
  bind -T copy-mode C-w send -X copy-pipe "xsel -i -b"
  bind -T copy-mode w send -X copy-pipe "xsel -i -b"
  bind -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel "xsel -i -b"
  bind -T copy-mode Space send -X begin-selection
  bind -T copy-mode k send -X copy-end-of-line "xsel -i -b"
  # copy mode motion
  bind -T copy-mode b send -X cursor-left
  bind -T copy-mode f send -X cursor-right
  bind -T copy-mode n send -X cursor-down
  bind -T copy-mode p send -X cursor-up
  bind -T copy-mode a send -X start-of-line
  bind -T copy-mode e send -X end-of-line
  bind -T copy-mode [ send -X previous-paragraph
  bind -T copy-mode ] send -X next-paragraph
  bind -T copy-mode C-< send -X top-line
  bind -T copy-mode C-> send -X bottom-line
  bind -T copy-mode < send -X history-top
  bind -T copy-mode > send -X history-bottom
  # search pane
  bind -T copy-mode r command-prompt -i -I "#{pane_search_string}" -p "(search up)" "send -X search-backward-incremental \"%%%\""
  bind -T copy-mode s command-prompt -i -I "#{pane_search_string}" -p "(search down)" "send -X search-forward-incremental \"%%%\""
#+END_SRC
* WAYLAND
*** NIRI
#+begin_src kdl :tangle ~/.config/niri/config.kdl
  // This config is in the KDL format: https://kdl.dev
  // "/-" comments out the following node.
  // Check the wiki for a full description of the configuration:
  // https://yalter.github.io/niri/Configuration:-Introduction

  // Input device configuration.
  // Find the full list of options on the wiki:
  // https://yalter.github.io/niri/Configuration:-Input
  input {
          keyboard {
                  xkb {
                          layout "gb"
                          // options "grp:win_space_toggle,compose:ralt,ctrl:nocaps"
                  }

                  // Enable numlock on startup, omitting this setting disables it.
                  numlock
          }

          touchpad {
                  // off
                  tap
                  // dwt
                  // dwtp
                  // drag false
                  // drag-lock
                  natural-scroll
                  // accel-speed 0.2
                  // accel-profile "flat"
                  // scroll-method "two-finger"
                  // disabled-on-external-mouse
          }

          mouse {
                  // off
                  // natural-scroll
                  // accel-speed 0.2
                  // accel-profile "flat"
                  // scroll-method "no-scroll"
          }

          trackpoint {
                  // off
                  // natural-scroll
                  // accel-speed 0.2
                  // accel-profile "flat"
                  // scroll-method "on-button-down"
                  // scroll-button 273
                  // scroll-button-lock
                  // middle-emulation
          }

          // Uncomment this to make the mouse warp to the center of newly focused windows.
          // warp-mouse-to-focus

          // Focus windows and outputs automatically when moving the mouse into them.
          // Setting max-scroll-amount="0%" makes it work only on windows already fully on screen.
          // focus-follows-mouse max-scroll-amount="0%"
  }

  // Find more information on the wiki:
  // https://yalter.github.io/niri/Configuration:-Outputs
  output "eDP-1" {
          background-color "#000"
          backdrop-color "#203"
  }
  output "DP-1" {
          focus-at-startup
          background-color "#000"
          backdrop-color "#203"
  }

  // https://yalter.github.io/niri/Configuration:-Layout
  layout {
          // Set gaps around windows in logical pixels.
          gaps 0
          background-color "#000"

          // When to center a column when changing focus, options are:
          // - "never", default behavior, focusing an off-screen column will keep at the left
          //   or right edge of the screen.
          // - "always", the focused column will always be centered.
          // - "on-overflow", focusing a column will center it if it doesn't fit
          //   together with the previously focused column.
          center-focused-column "never"

          // You can customize the widths that "switch-preset-column-width" (Mod+R) toggles between.
          preset-column-widths {
                  // Proportion sets the width as a fraction of the output width, taking gaps into account.
                  // For example, you can perfectly fit four windows sized "proportion 0.25" on an output.
                  // The default preset widths are 1/3, 1/2 and 2/3 of the output.
                  proportion 0.33333
                  proportion 0.5
                  proportion 0.66667
                  proportion 0.99999
                  // Fixed sets the width in logical pixels exactly.
                  // fixed 1920
          }

          // You can also customize the heights that "switch-preset-window-height" (Mod+Shift+R) toggles between.
          // preset-window-heights { }

          // You can change the default width of the new windows.
          default-column-width { proportion 0.99999; }
          // If you leave the brackets empty, the windows themselves will decide their initial width.
          // default-column-width {}

          // By default focus ring and border are rendered as a solid background rectangle
          // behind windows. That is, they will show up through semitransparent windows.
          // This is because windows using client-side decorations can have an arbitrary shape.
          //
          // If you don't like that, you should uncomment `prefer-no-csd` below.
          // Niri will draw focus ring and border *around* windows that agree to omit their
          // client-side decorations.
          //
          // Alternatively, you can override it with a window rule called
          // `draw-border-with-background`.

          // You can change how the focus ring looks.
          focus-ring {
                  width 2
                  active-color "#B28"
                  inactive-color "#627"
          }

          border { off; }
          shadow { off; }

          // Struts shrink the area occupied by windows, similarly to layer-shell panels.
          // You can think of them as a kind of outer gaps. They are set in logical pixels.
          // Left and right struts will cause the next window to the side to always be visible.
          // Top and bottom struts will simply add outer gaps in addition to the area occupied by
          // layer-shell panels and regular gaps.
          struts {
                  // left 64
                  // right 64
                  // top 64
                  // bottom 64
          }
  }

  // Note that running niri as a session supports xdg-desktop-autostart,
  spawn-at-startup "waybar"

  // To run a shell command (with variables, pipes, etc.), use spawn-sh-at-startup:
  spawn-sh-at-startup "wlsunset -l 51.50 -L -0.12"
  spawn-sh-at-startup "swayidle -w timeout 120 'niri msg action power-off-monitors' timeout 300 'swaylock -c 000000' before-sleep 'swaylock -c 000000'"

  hotkey-overlay { skip-at-startup; }

  // Uncomment this line to ask the clients to omit their client-side decorations if possible.
  prefer-no-csd

  // You can change the path where screenshots are saved.
  screenshot-path "~/Pictures/Screenshots/Screenshot from %Y-%m-%d %H-%M-%S.png"

  // You can also set this to null to disable saving screenshots to disk.
  // screenshot-path null

  // Animation settings.
  // The wiki explains how to configure individual animations:
  // https://yalter.github.io/niri/Configuration:-Animations
  animations { off; }

  // Window rules let you adjust behavior for individual windows.
  // Find more information on the wiki:
  // https://yalter.github.io/niri/Configuration:-Window-Rules

  // Work around WezTerm's initial configure bug
  // by setting an empty default-column-width.
  window-rule {
          // This regular expression is intentionally made as specific as possible,
          // since this is the default config, and we want no false positives.
          // You can get away with just app-id="wezterm" if you want.
          match app-id=r#"^org\.wezfurlong\.wezterm$"#
          default-column-width {}
  }

  // Open the Firefox picture-in-picture player as floating by default.
  window-rule {
          // This app-id regular expression will work for both:
          // - host Firefox (app-id is "firefox")
          // - Flatpak Firefox (app-id is "org.mozilla.firefox")
          match app-id=r#"firefox$"# title="^Picture-in-Picture$"
          open-floating true
  }

  // Example: block out two password managers from screen capture.
  // (This example rule is commented out with a "/-" in front.)
  /-window-rule {
          match app-id=r#"^org\.keepassxc\.KeePassXC$"#
          match app-id=r#"^org\.gnome\.World\.Secrets$"#

          block-out-from "screen-capture"

          // Use this instead if you want them visible on third-party screenshot tools.
          // block-out-from "screencast"
  }

  // Example: enable rounded corners for all windows.
  // (This example rule is commented out with a "/-" in front.)
  /-window-rule {
          geometry-corner-radius 12
          clip-to-geometry true
  }

  binds {
          // Keys consist of modifiers separated by + signs, followed by an XKB key name
          // in the end. To find an XKB name for a particular key, you may use a program
          // like wev.
          //
          // "Mod" is a special modifier equal to Super when running on a TTY, and to Alt
          // when running as a winit window.
          //
          // Most actions that you can bind here can also be invoked programmatically with
          // `niri msg action do-something`.

          // Mod-Shift-/, which is usually the same as Mod-?,
          // shows a list of important hotkeys.
          Mod+Slash { show-hotkey-overlay; }

          // Suggested binds for running programs: terminal, app launcher, screen locker.
          Mod+T hotkey-overlay-title="Open Terminal" { spawn "kitty"; }
          Mod+W hotkey-overlay-title="Open Web Browser" { spawn "librewolf"; }
          Mod+Space hotkey-overlay-title="Launch Programs" { spawn "fuzzel"; }
          Mod+Ctrl+Q hotkey-overlay-title="Lock Screen" { spawn "swaylock" "-c" "000000"; }
          // Use spawn-sh to run a shell command. Do this if you need pipes, multiple commands, etc.
          // Note: the entire command goes as a single argument. It's passed verbatim to `sh -c`.
          Mod+E hotkey-overlay-title="Open Editor" { spawn-sh "emacsclient -c -a ''"; }

          // Example volume keys mappings for PipeWire & WirePlumber.
          // The allow-when-locked=true property makes them work even when the session is locked.
          // Using spawn-sh allows to pass multiple arguments together with the command.
          // "-l 1.0" limits the volume to 100%.
          XF86AudioMute        allow-when-locked=true { spawn-sh "wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle"; }
          XF86AudioLowerVolume allow-when-locked=true { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-"; }
          XF86AudioRaiseVolume allow-when-locked=true { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+"; }
          XF86AudioMicMute     allow-when-locked=true { spawn-sh "wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle"; }
          F1                   allow-when-locked=true { spawn-sh "wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle"; }
          F2                   allow-when-locked=true { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-"; }
          F3                   allow-when-locked=true { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+"; }
          F4                   allow-when-locked=true { spawn-sh "wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle"; }

          // Example media keys mapping using playerctl.
          // This will work with any MPRIS-enabled media player.
          XF86AudioPlay        allow-when-locked=true { spawn-sh "playerctl play-pause"; }
          XF86AudioStop        allow-when-locked=true { spawn-sh "playerctl stop"; }
          XF86AudioPrev        allow-when-locked=true { spawn-sh "playerctl previous"; }
          XF86AudioNext        allow-when-locked=true { spawn-sh "playerctl next"; }
          F9                   allow-when-locked=true { spawn-sh "playerctl play-pause"; }
          F10                  allow-when-locked=true { spawn-sh "playerctl stop"; }
          F11                  allow-when-locked=true { spawn-sh "playerctl previous"; }
          F12                  allow-when-locked=true { spawn-sh "playerctl next"; }

          // Example brightness key mappings for brightnessctl.
          // You can use regular spawn with multiple arguments too (to avoid going through "sh"),
          // but you need to manually put each argument in separate "" quotes.
          XF86MonBrightnessDown allow-when-locked=true { spawn "brightnessctl" "--class=backlight" "set" "10%-"; }
          XF86MonBrightnessUp   allow-when-locked=true { spawn "brightnessctl" "--class=backlight" "set" "+10%"; }
          F5                    allow-when-locked=true { spawn "brightnessctl" "--class=backlight" "set" "10%-"; }
          F6                    allow-when-locked=true { spawn "brightnessctl" "--class=backlight" "set" "+10%"; }

          // Open/close the Overview: a zoomed-out view of workspaces and windows.
          // You can also move the mouse into the top-left hot corner,
          // or do a four-finger swipe up on a touchpad.
          Mod+O repeat=false { toggle-overview; }

          Mod+Q repeat=false { close-window; }

          Mod+Left  { focus-column-left; }
          Mod+Down  { focus-window-down; }
          Mod+Up    { focus-window-up; }
          Mod+Right { focus-column-right; }
          Mod+H     { focus-column-left; }
          Mod+J     { focus-window-down; }
          Mod+K     { focus-window-up; }
          Mod+L     { focus-column-right; }

          Mod+Ctrl+Left  { move-column-left; }
          Mod+Ctrl+Down  { move-window-down; }
          Mod+Ctrl+Up    { move-window-up; }
          Mod+Ctrl+Right { move-column-right; }
          Mod+Ctrl+H     { move-column-left; }
          Mod+Ctrl+J     { move-window-down; }
          Mod+Ctrl+K     { move-window-up; }
          Mod+Ctrl+L     { move-column-right; }

          // Alternative commands that move across workspaces when reaching
          // the first or last window in a column.
          // Mod+J     { focus-window-or-workspace-down; }
          // Mod+K     { focus-window-or-workspace-up; }
          // Mod+Ctrl+J     { move-window-down-or-to-workspace-down; }
          // Mod+Ctrl+K     { move-window-up-or-to-workspace-up; }

          Mod+Home { focus-column-first; }
          Mod+End  { focus-column-last; }
          Mod+Ctrl+Home { move-column-to-first; }
          Mod+Ctrl+End  { move-column-to-last; }

          Mod+Shift+Left  { focus-monitor-left; }
          Mod+Shift+Down  { focus-monitor-down; }
          Mod+Shift+Up    { focus-monitor-up; }
          Mod+Shift+Right { focus-monitor-right; }
          Mod+Shift+H     { focus-monitor-left; }
          Mod+Shift+J     { focus-monitor-down; }
          Mod+Shift+K     { focus-monitor-up; }
          Mod+Shift+L     { focus-monitor-right; }

          Mod+Alt+Ctrl+Left  { move-column-to-monitor-left; }
          Mod+Alt+Ctrl+Down  { move-column-to-monitor-down; }
          Mod+Alt+Ctrl+Up    { move-column-to-monitor-up; }
          Mod+Alt+Ctrl+Right { move-column-to-monitor-right; }
          Mod+Alt+Ctrl+H     { move-column-to-monitor-left; }
          Mod+Alt+Ctrl+J     { move-column-to-monitor-down; }
          Mod+Alt+Ctrl+K     { move-column-to-monitor-up; }
          Mod+Alt+Ctrl+L     { move-column-to-monitor-right; }

          // Alternatively, there are commands to move just a single window:
          // Mod+Shift+Ctrl+Left  { move-window-to-monitor-left; }
          // ...

          // And you can also move a whole workspace to another monitor:
          // Mod+Shift+Ctrl+Left  { move-workspace-to-monitor-left; }
          // ...

          Mod+Page_Down      { focus-workspace-down; }
          Mod+Page_Up        { focus-workspace-up; }
          Mod+U              { focus-workspace-down; }
          Mod+I              { focus-workspace-up; }
          Mod+Ctrl+Page_Down { move-column-to-workspace-down; }
          Mod+Ctrl+Page_Up   { move-column-to-workspace-up; }
          Mod+Ctrl+U         { move-column-to-workspace-down; }
          Mod+Ctrl+I         { move-column-to-workspace-up; }

          // Alternatively, there are commands to move just a single window:
          // Mod+Ctrl+Page_Down { move-window-to-workspace-down; }
          // ...

          Mod+Shift+Page_Down { move-workspace-down; }
          Mod+Shift+Page_Up   { move-workspace-up; }
          Mod+Shift+U         { move-workspace-down; }
          Mod+Shift+I         { move-workspace-up; }

          // You can bind mouse wheel scroll ticks using the following syntax.
          // These binds will change direction based on the natural-scroll setting.
          //
          // To avoid scrolling through workspaces really fast, you can use
          // the cooldown-ms property. The bind will be rate-limited to this value.
          // You can set a cooldown on any bind, but it's most useful for the wheel.
          Mod+WheelScrollDown      cooldown-ms=150 { focus-workspace-down; }
          Mod+WheelScrollUp        cooldown-ms=150 { focus-workspace-up; }
          Mod+Ctrl+WheelScrollDown cooldown-ms=150 { move-column-to-workspace-down; }
          Mod+Ctrl+WheelScrollUp   cooldown-ms=150 { move-column-to-workspace-up; }

          Mod+WheelScrollRight      { focus-column-right; }
          Mod+WheelScrollLeft       { focus-column-left; }
          Mod+Ctrl+WheelScrollRight { move-column-right; }
          Mod+Ctrl+WheelScrollLeft  { move-column-left; }

          // Usually scrolling up and down with Shift in applications results in
          // horizontal scrolling; these binds replicate that.
          Mod+Shift+WheelScrollDown      { focus-column-right; }
          Mod+Shift+WheelScrollUp        { focus-column-left; }
          Mod+Ctrl+Shift+WheelScrollDown { move-column-right; }
          Mod+Ctrl+Shift+WheelScrollUp   { move-column-left; }

          // Similarly, you can bind touchpad scroll "ticks".
          // Touchpad scrolling is continuous, so for these binds it is split into
          // discrete intervals.
          // These binds are also affected by touchpad's natural-scroll, so these
          // example binds are "inverted", since we have natural-scroll enabled for
          // touchpads by default.
          // Mod+TouchpadScrollDown { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.02+"; }
          // Mod+TouchpadScrollUp   { spawn-sh "wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.02-"; }

          // You can refer to workspaces by index. However, keep in mind that
          // niri is a dynamic workspace system, so these commands are kind of
          // "best effort". Trying to refer to a workspace index bigger than
          // the current workspace count will instead refer to the bottommost
          // (empty) workspace.
          //
          // For example, with 2 workspaces + 1 empty, indices 3, 4, 5 and so on
          // will all refer to the 3rd workspace.
          Mod+1 { focus-workspace 1; }
          Mod+2 { focus-workspace 2; }
          Mod+3 { focus-workspace 3; }
          Mod+4 { focus-workspace 4; }
          Mod+5 { focus-workspace 5; }
          Mod+6 { focus-workspace 6; }
          Mod+7 { focus-workspace 7; }
          Mod+8 { focus-workspace 8; }
          Mod+9 { focus-workspace 9; }
          Mod+Ctrl+1 { move-column-to-workspace 1; }
          Mod+Ctrl+2 { move-column-to-workspace 2; }
          Mod+Ctrl+3 { move-column-to-workspace 3; }
          Mod+Ctrl+4 { move-column-to-workspace 4; }
          Mod+Ctrl+5 { move-column-to-workspace 5; }
          Mod+Ctrl+6 { move-column-to-workspace 6; }
          Mod+Ctrl+7 { move-column-to-workspace 7; }
          Mod+Ctrl+8 { move-column-to-workspace 8; }
          Mod+Ctrl+9 { move-column-to-workspace 9; }

          // Alternatively, there are commands to move just a single window:
          // Mod+Ctrl+1 { move-window-to-workspace 1; }

          // Switches focus between the current and the previous workspace.
          Mod+Tab { focus-workspace-previous; }

          // The following binds move the focused window in and out of a column.
          // If the window is alone, they will consume it into the nearby column to the side.
          // If the window is already in a column, they will expel it out.
          Mod+BracketLeft  { consume-or-expel-window-left; }
          Mod+BracketRight { consume-or-expel-window-right; }

          // Consume one window from the right to the bottom of the focused column.
          Mod+Comma  { consume-window-into-column; }
          // Expel the bottom window from the focused column to the right.
          Mod+Period { expel-window-from-column; }

          Mod+R { switch-preset-column-width; }
          // Cycling through the presets in reverse order is also possible.
          // Mod+R { switch-preset-column-width-back; }
          Mod+Shift+R { switch-preset-window-height; }
          Mod+Ctrl+R { reset-window-height; }
          Mod+M { maximize-column; }
          Mod+F { fullscreen-window; }

          // Expand the focused column to space not taken up by other fully visible columns.
          // Makes the column "fill the rest of the space".
          Mod+Ctrl+F { expand-column-to-available-width; }

          Mod+C { center-column; }

          // Center all fully visible columns on screen.
          Mod+Ctrl+C { center-visible-columns; }

          // Finer width adjustments.
          // This command can also:
          // * set width in pixels: "1000"
          // * adjust width in pixels: "-5" or "+5"
          // * set width as a percentage of screen width: "25%"
          // * adjust width as a percentage of screen width: "-10%" or "+10%"
          // Pixel sizes use logical, or scaled, pixels. I.e. on an output with scale 2.0,
          // set-column-width "100" will make the column occupy 200 physical screen pixels.
          Mod+Minus { set-column-width "-10%"; }
          Mod+Equal { set-column-width "+10%"; }

          // Finer height adjustments when in column with other windows.
          Mod+Shift+Minus { set-window-height "-10%"; }
          Mod+Shift+Equal { set-window-height "+10%"; }

          // Move the focused window between the floating and the tiling layout.
          Mod+V       { toggle-window-floating; }
          Mod+Shift+V { switch-focus-between-floating-and-tiling; }

          // Toggle tabbed column display mode.
          // Windows in this column will appear as vertical tabs,
          // rather than stacked on top of each other.
          Mod+Ctrl+t { toggle-column-tabbed-display; }

          // Actions to switch layouts.
          // Note: if you uncomment these, make sure you do NOT have
          // a matching layout switch hotkey configured in xkb options above.
          // Having both at once on the same hotkey will break the switching,
          // since it will switch twice upon pressing the hotkey (once by xkb, once by niri).
          // Mod+Space       { switch-layout "next"; }
          // Mod+Shift+Space { switch-layout "prev"; }

          Mod+P { screenshot; }
          Mod+Ctrl+P { screenshot-screen; }
          Mod+Alt+P { screenshot-window; }

          // Applications such as remote-desktop clients and software KVM switches may
          // request that niri stops processing the keyboard shortcuts defined here
          // so they may, for example, forward the key presses as-is to a remote machine.
          // It's a good idea to bind an escape hatch to toggle the inhibitor,
          // so a buggy application can't hold your session hostage.
          //
          // The allow-inhibiting=false property can be applied to other binds as well,
          // which ensures niri always processes them, even when an inhibitor is active.
          Mod+Escape allow-inhibiting=false { toggle-keyboard-shortcuts-inhibit; }

          // The quit action will show a confirmation dialog to avoid accidental exits.
          Mod+Ctrl+BackSpace { quit; }

          // Powers off the monitors. To turn them back on, do any input like
          // moving the mouse or pressing any other key.
          XF86Display { power-off-monitors; }
          F7 { power-off-monitors; }
  }
#+end_src

*** WAYBAR
**** CONFIG
#+begin_src json :tangle ~/.config/waybar/config.jsonc
  {
    "layer": "top",
    "position": "left",
    "spacing": 12,
    "modules-center": [
      "cpu",
      "memory",
      "disk",
      "systemd-failed-units",
      "network",
      "backlight",
      "pulseaudio",
      "battery",
      "temperature",
      "idle_inhibitor",
      "tray",
      "clock",
      "custom/power"
    ],
    "cpu": {
      "format": "{usage}%",
    },
    "memory": {
      "format": "{}%",
      "tooltip-format": "RAM: {used}GB/{total}GB\nSWAP: {swapUsed}GB/{swapTotal}GB",
    },
    "disk": {
      "format": "{percentage_used}%",
      "tooltip-format": "{used}/{total}"
    },
    "systemd-failed-units": {
      "format-ok": "",
      "format": "{nr_failed}",
      "tooltip-format": "System: {nr_failed_system}\nUser: {nr_failed_user}",
    },
    "network": {
      "format-wifi": "{signalStrength}%",
      "format-ethernet": "",
      "format-linked": "",
      "format-disabled": "",
      "format-disconnected": "",
      "tooltip-format": "{ifname}\n{essid}\n{ipaddr}/{cidr}\nVia: {gwaddr}\nUpload: {bandwidthUpBytes}\nDownload: {bandwidthDownBytes}",
    },
    "temperature": {
      "critical-threshold": 75,
      "warning-threshold": 60,
      "format-critical": "{temperatureC}C ",
      "format-warning": "",
      "format": "",
      "tooltip-format": "{temperatureC}C",
    },
    "backlight": {
      "format": "",
      "tooltip-format": "{percent}%"
    },
    "pulseaudio": {
      "format": "",
      "tooltip-format": "{volume}%",
      "format-muted": "",
    },
    "battery": {
      "format": "",
      "full-at": 98,
      "states": {
        "good": 80,
        "warning": 30,
        "critical": 20
      },
      "tooltip-format": "{capacity}%\n{time}\n{cycles} cycles\n{health}% health",
      "format-full": "",
      "format-good": "",
      "format-charging": "",
      "format-discharging": "",
      "format-discharging-warning": "",
      "format-discharging-critical": "{capacity}%",
    },
    "idle_inhibitor": {
      "format": "{icon}",
      "format-icons": {
        "activated": "",
        "deactivated": ""
      },
      "timeout": 120
    },
    "tray": {
      "spacing": 10,
    },
    "clock": {
      "format": "{:%H:%M\n%d/%m}",
      "tooltip-format": "<big>{:%Y %B}</big>\n<tt><small>{calendar}</small></tt>",
    },
    "custom/power": {
      "format" : "",
      "tooltip": false,
      "menu": "on-click",
      "menu-file": "$HOME/.config/waybar/power_menu.xml",
      "menu-actions": {
        "shutdown": "shutdown",
        "reboot": "reboot",
        "suspend": "systemctl suspend",
        "hibernate": "systemctl hibernate"
      }
    }
  }
#+end_src
**** STYLE
#+begin_src css :tangle ~/.config/waybar/style.css
  ,* {
    font-family: FontAwesome, Roboto, Helvetica, Arial, sans-serif;
    font-size: 15px;
    font-weight: bold;
  }

  window#waybar {
    background-color: #000;
    color: #ffffff;
  }

  window#waybar.hidden {
    opacity: 1;
  }

  #network,
  #cpu,
  #memory,
  #disk,
  #temperature,
  #backlight,
  #pulseaudio,
  #battery,
  #idle_inhibitor,
  #tray,
  #clock {
    padding: 0 2px;
    color: #fff;
  }

  #network {
    background-color: #627;
    color: #FFF
  }

  #network.ethernet {
    background-color: #000;
    color: #FFF
  }

  #network.disconnected {
    background-color: #900;
  }

  #cpu {
    background-color: #B28;
    color: #FFF;
  }

  #memory {
    background-color: #627;
    color: #FFF;
  }

  #disk {
    background-color: #B28;
    color: #FFF;
  }

  #temperature {
    background-color: #000;
    color: #FFF;
  }

  #temperature.critical {
    background-color: #800;
    color: #FFF;
  }

  #backlight {
    background-color: #000;
  }

  #pulseaudio {
    background-color: #000;
  }

  #battery {
    background-color: #000;
    color: #FFF;
  }

  #battery.charging, #battery.plugged {
    background-color: #000;
    color: #FFF;
  }

  @keyframes blink {
    to {
      background-color: #FF0;
      color: #000;
    }
  }

  /* Using steps() instead of linear as a timing function to limit cpu usage */
  #battery.critical:not(.charging) {
    background-color: #900;
    color: #FFF;
    animation-name: blink;
    animation-duration: 0.5s;
    animation-timing-function: steps(12);
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  #idle_inhibitor {
    background-color: #000;
  }

  #idle_inhibitor.activated {
    background-color: #000;
  }

  #tray {
    background-color: #000;
  }

  #tray > .passive {
    -gtk-icon-effect: dim;
  }

  #tray > .needs-attention {
    -gtk-icon-effect: highlight;
    background-color: #800;
  }

  #clock {
    background-color: #000000;
  }
#+end_src
**** POWER
#+begin_src xml :tangle ~/.config/waybar/power_menu.xml
  <?xml version="1.0" encoding="UTF-8"?>
  <interface>
    <object class="GtkMenu" id="menu">
      <child>
        <object class="GtkMenuItem" id="suspend">
          <property name="label">Suspend</property>
        </object>
      </child>
      <child>
        <object class="GtkMenuItem" id="hibernate">
          <property name="label">Hibernate</property>
        </object>
      </child>
      <child>
        <object class="GtkMenuItem" id="shutdown">
          <property name="label">Shutdown</property>
        </object>
      </child>
      <child>
        <object class="GtkSeparatorMenuItem" id="delimiter1"/>
      </child>
      <child>
        <object class="GtkMenuItem" id="reboot">
          <property name="label">Reboot</property>
        </object>
      </child>
    </object>
  </interface>
#+end_src

* COMMENT Local Variables                                  :NOEXPORT:ARCHIVE:
# Local Variables:
# eval: (add-hook 'after-save-hook 'org-babel-tangle nil t)
# End:
